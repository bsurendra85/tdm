webpackJsonp([19],{ChhE:function(s,n){s.exports=[{file:"README.md",lang:"md",section:"part1",code:'<h2 id="nested-forms">Nested forms</h2>\n<p>At the UI level, form&#39;s are usually flat and it is a common practice to\navoid nested form&#39;s within a form.</p>\n<p>When facing nested forms they are usually opened in a separate page, a\ndialog window, a different tab, etc...</p>\n<p>The library supports that out of the box, the manual way is to filter out\nthe field that is a nested form and display it in a different dynamic\nform somewhere else.</p>\n<p>There are other methods which we will cover in the next chapters.</p>\n<h2 id="flattening">Flattening</h2>\n<p>Another approach is to flatten a nested object(s) so it appears as all\nof the fields in that object belong to the root form.</p>\n<p>This is does not change the structure, it&#39;s is a virtual change that is\napplied only for the UI.</p>\n<div class="info">\nThe <strong>renderer</strong> does not nor care about flattening, it is completely\ntransparent.\n</div>\n\n<h3 id="objects-not-types">Objects, not types</h3>\n<p>Notice the terminology used:</p>\n<blockquote>\n<p>Another approach is to flatten a nested object</p>\n</blockquote>\n<p>Flattening is done on <strong>objects</strong> and not on models, a model is an\nobject but an object is not a model.</p>\n<p>It means that plain JS object can be used, this is important as it\nallows ad-hoc object to form definitions.</p>\n<p>Let&#39;s refactor our <code>Hero</code> model to include a nested object, we add the\n<code>base</code> property that represents the base camp for our hero. The base\nhas a name and coordinates which is also a nested object.</p>\n<pre class="lang-ts"><code class="lang-ts">  base: {\n    name: <span class="hljs-built_in">string</span>;\n    coordinates: {\n      lng: <span class="hljs-built_in">number</span>;\n      lat: <span class="hljs-built_in">number</span>;\n    }\n  };\n</code></pre>\n<p>When we add this to the <code>Hero</code> class we get into a depth of 3:</p>\n<p><code>root -&gt; base -&gt; coordinates</code></p>\n<p>We want to flatten this structure so in the UI we will see something\nlike this:</p>\n<pre class="lang-ts"><code class="lang-ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> Hero {\n  id: <span class="hljs-built_in">number</span>;\n  name: <span class="hljs-built_in">string</span>;\n  hasTracking: <span class="hljs-built_in">boolean</span>;\n  doubleAgent: <span class="hljs-built_in">boolean</span>;\n  bmi: <span class="hljs-built_in">number</span>;\n  superPower: <span class="hljs-string">\'selfHealing\'</span> | <span class="hljs-string">\'flying\'</span> | <span class="hljs-string">\'cloaking\'</span> | <span class="hljs-string">\'cloning\'</span> | <span class="hljs-string">\'invisibility\'</span>;\n\n  <span class="hljs-comment">// Flattened base </span>\n  name: <span class="hljs-built_in">string</span>;\n  lng: <span class="hljs-built_in">number</span>;\n  lat: <span class="hljs-built_in">number</span>;\n}\n</code></pre>\n<div class="info">\nNotice that the <code>name</code> property from <code>base</code> collides with the <code>name</code>\nproperty on the <code>Hero</code>. Because this is not a structural change we do\nnot care, the user will see the <code>label</code> of each field.\n</div>\n\n<p>Now let&#39;s defined the schema for flattening <code>base</code>, we will start with\nthe <code>name</code> property first:</p>\n<pre class="lang-ts"><code class="lang-ts">  <span class="hljs-meta">@Prop</span>({\n    form: {\n      flatten: {\n        name: {\n          required: <span class="hljs-literal">true</span>,\n          render: {\n            vType: <span class="hljs-string">\'text\'</span>,\n            label: <span class="hljs-string">\'Base Name\'</span>,\n          }\n        }\n      }\n    }\n  })\n  base: {\n    name: <span class="hljs-built_in">string</span>;\n    coordinates: {\n      lng: <span class="hljs-built_in">number</span>;\n      lat: <span class="hljs-built_in">number</span>;\n    }\n  };\n</code></pre>\n<p>Instead of setting a <code>render</code> object we set a <code>flatten</code> object.</p>\n<p><code>flatten</code> is an object with property names that match the property names\nof the object we are flattening and the values are <code>FormPropMetadataArgs</code></p>\n<pre class="lang-ts"><code class="lang-ts">flatten: { [key: <span class="hljs-built_in">string</span>]: FormPropMetadataArgs };\n</code></pre>\n<p>It&#39;s is like we are defining a new model class without the class and\ndecorators, just with plain objects.</p>\n<div class="info">\nIf it is not clear don&#39;t worry, we will try to explain it from a\ndifferent angle at the end. For now let&#39;s continue with the flat\ndefinition\n</div>\n\n<pre class="lang-ts"><code class="lang-ts">  <span class="hljs-meta">@Prop</span>({\n    form: {\n      flatten: {\n        name: {\n          required: <span class="hljs-literal">true</span>,\n          render: {\n            vType: <span class="hljs-string">\'text\'</span>,\n            label: <span class="hljs-string">\'Base Name\'</span>,\n          }\n        },\n        coordinates: {\n          flatten: {\n            lng: {\n              render: {\n                vType: <span class="hljs-string">\'number\'</span>,\n                label: <span class="hljs-string">\'Base Longitude\'</span>\n              }\n            },\n            lat: {\n              render: {\n                vType: <span class="hljs-string">\'number\'</span>,\n                label: <span class="hljs-string">\'Base Latitude\'</span>\n              }\n            }\n          }\n        }\n      }\n    }\n  })\n</code></pre>\n<p>You can nest <code>flatten</code> definitions as much as you want, there is not\nlimit.</p>\n<p><code>FormPropMetadataArgs</code> definitions within a flatten definition are\nidentical to <code>FormPropMetadataArgs</code> defined on the root. You can see\nthe <code>required</code> validation on <code>name</code> above, it will work just like any\nrequired definition on the root.</p>\n<h2 id="don-t-flat-out">Don&#39;t flat out</h2>\n<p>Flattening is a powerful feature, it allows re-modeling of complex\nobjects without much effort, however there is a cost:</p>\n<ul>\n<li>Flattening is not type safe</li>\n<li>Flattening is cumbersome, it is not clear as models and classes and\nmost definitely harder to maintain.</li>\n<li>Access to flattened metadata is done with dot notation (magic string)</li>\n<li>Some scenarios require manual type (TypeScript) definitions,\nwe will cover those later</li>\n</ul>\n<p>Use it wisely.</p>\n<div class="info">\nYou can view the final structure of our <code>Hero</code> in the source code view\nof the dashboard below.\n</div>'},{file:"README.md",lang:"md",section:"part2",code:'<div class="info">\n <strong>childForm</strong> will be covered later.\n</div>\n\n<h2 id="another-view">Another view</h2>\n<p>We promised another view, let&#39;s try:</p>\n<p>If we take the <code>flatten</code> definition we just defined and try to build\nmodel classes out of it? what would it looks like?</p>\n'},{file:"README.md",lang:"md",section:"part3",code:'<p>The metadata is identical, only TypeScript types are missing and that\ncan also be defined manually, as we will see later.</p>\n<p>If we remove the decorators we are left with the same objects.</p>\n<p>Another view, the last one, let&#39;s think of a similar library like <code>@tdm</code>,\nwritten in JS and not TS, if we go out of the type world straight into\nplain old JS world, how would we describe the metadata to that library? </p>\n<p>We will demonstrate with the <code>coordinates</code> object but it&#39;s the same for \nall others.</p>\n<pre class="lang-ts"><code class="lang-ts"><span class="hljs-keyword">const</span> coordinates = {\n  lng: {            <span class="hljs-comment">/* THIS IS THE METADATA OBJECT IN @Prop */</span>\n    form: {\n      render: {\n        vType: <span class="hljs-string">\'number\'</span>,\n        label: <span class="hljs-string">\'Base Longitude\'</span>\n      }\n    }    \n  },\n  lat: {\n    form: {\n      render: {\n        vType: <span class="hljs-string">\'number\'</span>,\n        label: <span class="hljs-string">\'Base Latitude\'</span>\n      }\n    }\n  }\n}\n</code></pre>\n'},{file:"flattening.component.ts",lang:"ts",section:"default",code:'<span class="hljs-keyword">import</span> { Component } <span class="hljs-keyword">from</span> <span class="hljs-string">\'@angular/core\'</span>;\n<span class="hljs-keyword">import</span> { Hero } <span class="hljs-keyword">from</span> <span class="hljs-string">\'./model\'</span>;\n\n<span class="hljs-meta">@Component</span>({\n  selector: <span class="hljs-string">\'form-flattening\'</span>,\n  templateUrl: <span class="hljs-string">\'./flattening.component.html\'</span>,\n  styleUrls: [ <span class="hljs-string">\'./flattening.component.scss\'</span> ],\n})\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> FlatteningComponent {\n  model = <span class="hljs-keyword">new</span> Hero();\n}\n',title:"Component"},{file:"flattening.component.html",lang:"html",section:"tdmDemo",code:'  <span class="hljs-tag">&lt;<span class="hljs-name">dynamic-form</span> #<span class="hljs-attr">dynForm</span> [<span class="hljs-attr">model</span>]=<span class="hljs-string">"model"</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">mat-raised-button</span> <span class="hljs-attr">color</span>=<span class="hljs-string">"primary"</span>\n            [<span class="hljs-attr">disabled</span>]=<span class="hljs-string">"dynForm.form.status !== \'VALID\' || !dynForm.form.dirty"</span>\n            (<span class="hljs-attr">click</span>)=<span class="hljs-string">"dynForm.tdmForm.commitToModel(true)"</span>&gt;</span>SAVE<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">mat-button</span> [<span class="hljs-attr">disabled</span>]=<span class="hljs-string">"dynForm.form.pristine"</span> (<span class="hljs-attr">click</span>)=<span class="hljs-string">"dynForm.tdmForm.reset()"</span>&gt;</span>CANCEL<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>\n  <span class="hljs-tag">&lt;/<span class="hljs-name">dynamic-form</span>&gt;</span>',title:"Template"},{file:"flattening.component.scss",lang:"scss",section:"default",code:'<span class="hljs-selector-class">.code-class</span> {\n  <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span>;\n  <span class="hljs-attribute">max-height</span>: <span class="hljs-number">400px</span>;\n}\n',title:"Style"},{file:"other-view.md",lang:"md",section:"coordinates",code:'<pre class="lang-ts"><code class="lang-ts">coordinates: {\n  lng: {\n    render: {\n      vType: <span class="hljs-string">\'number\'</span>,\n      label: <span class="hljs-string">\'Base Longitude\'</span>\n    }\n  },\n  lat: {\n    render: {\n      vType: <span class="hljs-string">\'number\'</span>,\n      label: <span class="hljs-string">\'Base Latitude\'</span>\n    }\n  }\n}\n</code></pre>\n'},{file:"other-view.md",lang:"md",section:"coordinatesClass",code:'<pre class="lang-ts"><code class="lang-ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> Coordinates {\n  <span class="hljs-meta">@FormProp</span>({\n    render: {\n      vType: <span class="hljs-string">\'number\'</span>,\n      label: <span class="hljs-string">\'Base Longitude\'</span>\n    }\n  })\n  lng: <span class="hljs-built_in">number</span>;\n\n  <span class="hljs-meta">@FormProp</span>({\n    render: {\n      vType: <span class="hljs-string">\'number\'</span>,\n      label: <span class="hljs-string">\'Base Latitude\'</span>\n    }\n  })\n  lat: <span class="hljs-built_in">number</span>;\n}\n</code></pre>\n'},{file:"other-view.md",lang:"md",section:"base",code:'<pre class="lang-ts"><code class="lang-ts">name: {\n  required: <span class="hljs-literal">true</span>,\n  render: {\n    vType: <span class="hljs-string">\'text\'</span>,\n    label: <span class="hljs-string">\'Base Name\'</span>,\n  }\n},\ncoordinates: {\n  flatten: <span class="hljs-comment">/* JUST DID ABOVE */</span>\n}\n</code></pre>\n'},{file:"other-view.md",lang:"md",section:"baseClass",code:'<pre class="lang-ts"><code class="lang-ts">\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> Base {\n  <span class="hljs-meta">@FormProp</span>({\n    required: <span class="hljs-literal">true</span>,\n    render: {\n      vType: <span class="hljs-string">\'text\'</span>,\n      label: <span class="hljs-string">\'Base Name\'</span>,\n    }\n  })\n  name: <span class="hljs-built_in">string</span>;\n\n  <span class="hljs-meta">@Prop</span>({\n    form: {\n      childForm: <span class="hljs-literal">true</span>\n    }\n  })\n  coordinates: Coordinates;\n}\n</code></pre>\n'},{file:"model.ts",lang:"ts",section:"default",code:'<span class="hljs-keyword">import</span> { Model, Prop } <span class="hljs-keyword">from</span> <span class="hljs-string">\'@tdm/ngx-dynamic-forms\'</span>;\n\n<span class="hljs-meta">@Model</span>({\n  form: <span class="hljs-literal">true</span>\n})\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> Hero {\n  <span class="hljs-meta">@Prop</span>({\n    form: {\n      render: {\n        vType: <span class="hljs-string">\'number\'</span>,\n        label: <span class="hljs-string">\'Hero ID\'</span>\n      }\n    }\n  })\n  id: <span class="hljs-built_in">number</span>;\n\n  <span class="hljs-meta">@Prop</span>({\n    form: {\n      required: <span class="hljs-literal">true</span>,\n      render: {\n        vType: <span class="hljs-string">\'text\'</span>,\n        label: <span class="hljs-string">\'Hero Name\'</span>\n      }\n    }\n  })\n  name: <span class="hljs-built_in">string</span>;\n\n  <span class="hljs-meta">@Prop</span>({\n    form: {\n      render: {\n        vType: <span class="hljs-string">\'boolean\'</span>,\n        label: <span class="hljs-string">\'Has Tracking Device\'</span>\n      }\n    }\n  })\n  hasTracking: <span class="hljs-built_in">boolean</span>;\n\n  <span class="hljs-meta">@Prop</span>({\n    form: {\n      render: {\n        vType: <span class="hljs-string">\'slideToggle\'</span>,\n        label: <span class="hljs-string">\'Double Agent\'</span>\n      }\n    }\n  })\n  doubleAgent: <span class="hljs-built_in">boolean</span>;\n\n  <span class="hljs-meta">@Prop</span>({\n    form: {\n      render: {\n        vType: <span class="hljs-string">\'slider\'</span>,\n        label: <span class="hljs-string">\'BMI Index\'</span>,\n        data: { min: <span class="hljs-number">1</span>, max: <span class="hljs-number">35</span> }\n      }\n    }\n  })\n  bmi: <span class="hljs-built_in">number</span>;\n\n  <span class="hljs-meta">@Prop</span>({\n    form: {\n      render: {\n        vType: <span class="hljs-string">\'select\'</span>,\n        label: <span class="hljs-string">\'Super Power\'</span>,\n        data: {\n          options: [\n            { value: <span class="hljs-string">\'selfHealing\'</span>, label: <span class="hljs-string">\'Self Healing\'</span> },\n            { value: <span class="hljs-string">\'flying\'</span>, label: <span class="hljs-string">\'Flying\'</span> },\n            { value: <span class="hljs-string">\'cloaking\'</span>, label: <span class="hljs-string">\'Cloaking\'</span> },\n            { value: <span class="hljs-string">\'cloning\'</span>, label: <span class="hljs-string">\'Cloaning\'</span> },\n            { value: <span class="hljs-string">\'invisibility\'</span>, label: <span class="hljs-string">\'Invisibility\'</span> }\n          ]\n        }\n      }\n    }\n  })\n  superPower: <span class="hljs-string">\'selfHealing\'</span> | <span class="hljs-string">\'flying\'</span> | <span class="hljs-string">\'cloaking\'</span> | <span class="hljs-string">\'cloning\'</span> | <span class="hljs-string">\'invisibility\'</span>;\n\n  <span class="hljs-meta">@Prop</span>({\n    form: {\n      flatten: {\n        name: {\n          required: <span class="hljs-literal">true</span>,\n          render: {\n            vType: <span class="hljs-string">\'text\'</span>,\n            label: <span class="hljs-string">\'Base Name\'</span>,\n          }\n        },\n        coordinates: {\n          flatten: {\n            lng: {\n              render: {\n                vType: <span class="hljs-string">\'number\'</span>,\n                label: <span class="hljs-string">\'Base Longitude\'</span>\n              }\n            },\n            lat: {\n              render: {\n                vType: <span class="hljs-string">\'number\'</span>,\n                label: <span class="hljs-string">\'Base Latitude\'</span>\n              }\n            }\n          }\n        }\n      }\n    }\n  })\n  base: {\n    name: <span class="hljs-built_in">string</span>;\n    coordinates: {\n      lng: <span class="hljs-built_in">number</span>;\n      lat: <span class="hljs-built_in">number</span>;\n    }\n  };\n}\n',title:"Model"}]}});
//# sourceMappingURL=FlatteningComponent.5c7f5c45228c0a68a961.chunk.js.map