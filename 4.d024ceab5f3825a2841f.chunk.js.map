{"version":3,"sources":["./src/demo/modules/@playground/playground-page/playground-page.component.html","./src/demo/modules/@playground/module.ts","./src/demo/modules/@playground/models/Users/UsersBaseClass.ts","./src/demo/modules/@playground/models/Users/UserConst.ts","./src/demo/modules/@playground/models/Users/UsersInterface.ts","./src/demo/modules/@playground/models/Users/UserDAO.ts","./src/demo/modules/@playground/playground-page/playground-page.component.ts"],"names":["_l","core","common","_ck","_v","_co","component","transform","user","$rc","busy$","busy","PlaygroundModule","UsersBaseClass_User_","User_","this","id","prototype","bfRef","console","log","afRef","postDeserializedHandler","resp","options","postHandler","bfQuery","next","then","coll","length","afQuery","tslib_es6","Object","data","src","alias","method","Get","post","handler","event","action","UserConst_User_","_super","UserBaseClass","endpoint","urlParams","limit","UsersInterface","_this","apply","arguments","UsersInterface_1","headers","validation","name","validate","ctx","errorMessage","User_1","pre","a","b","setIdentity","skip","UserConst","UserDAO_UserDAO","UserDAO","bfFindById","afFindById","UserDAO_1","Éµ0","User","playground_page_component_PlaygroundPageComponent","PlaygroundPageComponent","ngDAO","get","findById","err","alert","angularHttp","gogo","events$","subscribe","e","type","setTimeout","disconnect","$refresh"],"mappings":"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","file":"4.d024ceab5f3825a2841f.chunk.js","sourcesContent":["<div class=\"page-padding\">\n  <h1>Obs$  : {{ user.$rc.busy$ | async }}</h1>\n  <h1>Static: {{ user.$rc.busy }}</h1>\n  <pre>{{user | json}}</pre>\n</div>\n\n\n\n// WEBPACK FOOTER //\n// ./src/demo/modules/@playground/playground-page/playground-page.component.html","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\n\nimport { SharedModule } from '@shared';\nimport { PlaygroundPageComponent } from './playground-page';\nimport { ROUTES } from './routes';\n\n/**\n * An example of handling non-resource oriented REST API's.\n *\n * @demo core: Identity, ExtendAction, transformNameStrategy, skip\n * @demo angular-http: HttpResource, UrlParam\n */\n@NgModule({\n  declarations: [\n    PlaygroundPageComponent\n  ],\n  imports: [\n    SharedModule,\n\n    RouterModule.forChild(ROUTES)\n  ],\n})\nexport class PlaygroundModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/demo/modules/@playground/module.ts","/**\n * Model usage example - Base class implementation\n *\n * This example demonstrates model creation using 2 concrete classes.\n * A private base class that exposes all of the structure and provides implementation and an exposed empty class.\n * The base class is wrapping an empty class that is used as an export, this class should be left empty.\n *\n * Pros:\n *   - Interfaces exposed for both static and instance\n *   - Single place for concrete implementation\n *   - Exporting a native class and not const + type\n *   - Should support angular DI\n *\n * Cons:\n *   - Having 2 classes, cumbersome.\n *   - Members defined ONLY IN the exposed implementation (i.e. not part of the private class) will\n *     appear as member on the return type of INSTANCE methods that return \"this\" but WILL NOT\n *     appear on the return type of STATIC methods that return \"this\" - CONFUSING.\n */\n\n\nimport { Injectable } from '@angular/core';\nimport { Hook, BeforeHook, AfterHook, TDMCollection, Prop, Exclude, ExecuteResponse, Identity } from '@tdm/data';\nimport { ARMixin, HttpResource, HttpAction, UrlParam, HttpActionOptions, HttpActionMethodType } from '@tdm/ngx-http-client';\n\nexport class User_ implements   BeforeHook<'bfRef', HttpActionOptions>,\n                                AfterHook<'afRef', HttpActionOptions> {\n\n  @Identity()\n  @UrlParam() id: number = 2; // this will go into the \"endpoint\" from the instance!\n\n  @Prop({\n    alias: 'username'\n  })\n  username__: string;\n\n\n  @Prop({\n    alias: 'motto'\n  })\n  @Exclude()\n  _motto_: string;\n\n  constructor() { }\n\n  @BeforeHook('$refresh')\n  bfRef() {\n    console.log('BeforeRefresh');\n  }\n\n  @AfterHook('$refresh')\n  afRef() {\n    console.log('AfterRefresh');\n  }\n\n  @HttpAction({\n    method: HttpActionMethodType.Get,\n    post: User_.prototype.postDeserializedHandler\n  })\n  postDeserialized: (options?: HttpActionOptions) => ARMixin<User_>;\n  private postDeserializedHandler(resp: ExecuteResponse, options?: HttpActionOptions) {\n  }\n\n  @HttpAction({\n    method: HttpActionMethodType.Get,\n    post: {\n      handler: User_.prototype.postHandler,\n    }\n  })\n  raw: (options?: HttpActionOptions) => ARMixin<User_>;\n  private postHandler(resp: ExecuteResponse, options?: HttpActionOptions) {\n  }\n\n  static num: number;\n\n  @Hook({event: 'before', action: 'query'})\n  static bfQuery(this: TDMCollection<ARMixin<User_>>) {\n    this.$rc.next()\n      .then( coll => {\n        console.log(`BeforeQuery-AfterQuery: got ${coll.length}`)\n      });\n    console.log('BeforeQuery');\n  }\n\n  @Hook({event: 'after', action: 'query'})\n  static afQuery(this: TDMCollection<ARMixin<User_>>) {\n    console.log('AfterQuery');\n    console.log(`AfterQuery: got ${this.length}`)\n  }\n\n}\n\n@HttpResource({\n  endpoint: '/api/users/:id?',\n  urlParams: { // there are hard coded params\n    limit: '5' // not in path so will go to query string (?param=15)\n  },\n})\n@Injectable()\nexport class UserBaseClass extends ARMixin(User_) { }\n\n\n// UserBaseClass.find(2).username__;                                    // OK\n// UserBaseClass.find(2).usernam23e;                                    // SHOULD ERROR\n// UserBaseClass.num;                                                   // OK\n// new UserBaseClass().$refresh().username__;                           // OK\n// const user: UserBaseClass = new UserBaseClass();                     // OK\n// user.$refresh().username__;                                          // OK\n// user.$refresh().abcd;                                                // SHOULD ERROR\n// user.$rc.next().then( u => u.id );                                   // OK\n// user.$rc.next().then( u => u.f34 );                                  // SHOULD ERROR\n// UserBaseClass.query().$rc.next().then(coll => coll );     // OK\n// UserBaseClass.query().$rc.next().then(coll => coll.sdfd );           // SHOULD ERROR\n\n\n\n// WEBPACK FOOTER //\n// ./src/demo/modules/@playground/models/Users/UsersBaseClass.ts","/**\n * Model usage example - Base class implementation\n *\n * This example demonstrates model creation using 2 concrete classes.\n * A private base class that exposes all of the structure and provides implementation and an exposed empty class.\n * The base class is wrapping an empty class that is used as an export, this class should be left empty.\n *\n * Pros:\n *   - Single class, no interface, all in one place\n *   - Single place for concrete implementation\n *   - Can't make mistakes of implementing public API in wrong place.\n *   - Allows inheritance\n *\n * Cons:\n *   - Requires manual type creation (https://github.com/Microsoft/TypeScript/issues/6606)\n *   - For multiple mixins need to create type without ARMixin<> help.\n *     https://github.com/Microsoft/TypeScript/issues/13798\n *   - Won't work with angular DI + AOT (https://github.com/angular/angular/issues/14128)\n */\n\n\nimport { Injectable } from '@angular/core';\nimport { Hook, BeforeHook, AfterHook, TDMCollection, Prop, Exclude, ExecuteResponse, ExtendAction, ExecuteContext, IdentityValueType, Identity } from '@tdm/data';\nimport { ARMixin, HttpResource, HttpAction, UrlParam, HttpActionOptions, HttpActionMethodType } from '@tdm/ngx-http-client';\n\n@HttpResource({\n  endpoint: '/api/users/:id?',\n  urlParams: {\n    limit: '5'\n  },\n  skip: true\n})\n@Injectable()\nclass User_ implements  BeforeHook<'bfRef', HttpActionOptions>,\n                        AfterHook<'afRef', HttpActionOptions> {\n\n  @Identity()\n  @UrlParam() id: number = 2; // this will go into the \"endpoint\" from the instance!\n\n  @Prop({\n    alias: 'username',\n    validation: {\n      name: 'test-validator',\n      validate(ctx) {\n        return false;\n      },\n      errorMessage(ctx) {\n        return 'validation error';\n      }\n    }\n  })\n  username__: string;\n\n\n  @Prop({\n    alias: 'motto'\n  })\n  @Exclude()\n  _motto_: string;\n\n  constructor() { }\n\n  @Hook({event: 'before', action: '$refresh'})\n  bfRef() {\n    console.log('BeforeRefresh');\n  }\n\n  @Hook({event: 'after', action: '$refresh'})\n  afRef() {\n    console.log('AfterRefresh');\n  }\n\n  @HttpAction({\n    method: HttpActionMethodType.Get,\n    post: User_.prototype.postDeserializedHandler\n  })\n  postDeserialized: (options?: HttpActionOptions) => ARMixin<User_>;\n  private postDeserializedHandler(resp: ExecuteResponse, options?: HttpActionOptions) {\n  }\n\n  @HttpAction({\n    method: HttpActionMethodType.Get,\n    post: {\n      handler: User_.prototype.postHandler,\n    }\n  })\n  raw: (options?: HttpActionOptions) => ARMixin<User_>;\n  private postHandler(resp: ExecuteResponse, options?: HttpActionOptions) {\n  }\n\n  static num: number;\n\n  @Hook({event: 'before', action: 'query'})\n  static bfQuery(this: TDMCollection<ARMixin<User_>>) {\n    this.$rc.next()\n      .then( coll => {\n        console.log(`BeforeQuery-AfterQuery: got ${coll.length}`)\n      });\n    console.log('BeforeQuery');\n  }\n\n  @Hook({event: 'after', action: 'query'})\n  static afQuery(this: TDMCollection<ARMixin<User_>>) {\n    console.log('AfterQuery');\n    console.log(`AfterQuery: got ${this.length}`)\n  }\n\n  @ExtendAction({\n    pre: (ctx: ExecuteContext<any>, id: IdentityValueType, a:number, b: number, options: HttpActionOptions) => {\n      ctx.setIdentity(id);\n      return options;\n    }\n  })\n  static find: (id: IdentityValueType, a:number, b: number, options?: HttpActionOptions) => ARMixin<User_>;\n}\n\nexport const UserConst = ARMixin(User_);\nexport type UserConst = ARMixin<User_>;\n\n// UserConst.find(2, 3, 4).username__;                              // OK\n// UserConst.find(2, 3, 4).usernam23e;                              // SHOULD ERROR\n// UserConst.num;                                                   // OK\n// new UserConst().$refresh().username__;                           // OK\n// const user: UserConst = new UserConst();                         // OK\n// user.$refresh().username__;                                      // OK\n// user.$refresh().abcd;                                            // SHOULD ERROR\n// user.$rc.next().then( u => u.id );                               // OK\n// user.$rc.next().then( u => u.f34 );                              // SHOULD ERROR\n// UserConst.query().$rc.next().then(coll => coll );     // OK\n// UserConst.query().$rc.next().then(coll => coll.sdfd );           // SHOULD ERROR\n\n\n\n// WEBPACK FOOTER //\n// ./src/demo/modules/@playground/models/Users/UserConst.ts","/**\n * Model usage example - Interfaces\n *\n * This example demonstrates model creation using 1 concrete class and 2 interfaces.\n * The interfaces provides the structure for both the static and instance shape, the concrete class\n * provides implementation and it is exposed.\n *\n * Pros:\n *   - Design fits I in SOLID\n *   - single concrete implementation\n *   - Exporting a native class and not const + type\n *   - Should support angular DI\n *\n * Cons:\n *   - Double the work, a lot of boilerplate\n *   - Writing interfaces for instance & static, cumbersome\n *   - Members defined ONLY IN the concrete implementation (i.e. not part of the interface) will\n *     appear as member on the return type of INSTANCE methods that return \"this\" but WILL NOT\n *     appear on the return type of STATIC methods that return \"this\" - CONFUSING.\n */\n\nimport { Injectable } from '@angular/core';\nimport { Hook, BeforeHook, AfterHook, ActiveRecord, TDMCollection, Constructor, Prop, Exclude, ExecuteResponse, Identity } from '@tdm/data';\nimport { ARMixin, HttpResource, HttpAction, UrlParam, HttpActionOptions, HttpActionMethodType } from '@tdm/ngx-http-client';\n\n\nexport interface IUserInterfaceStatic extends Constructor<IUserInterface> {\n  bfQuery(this: TDMCollection<ARMixin<IUserInterface>>);\n  afQuery(this: TDMCollection<ARMixin<IUserInterface>>);\n}\n\nexport interface IUserInterface extends ActiveRecord<IUserInterface, HttpActionOptions> {\n  id: number;\n  username__: string;\n  _motto_: string;\n\n  rawDeserialized: (options?: HttpActionOptions) => ARMixin<IUserInterface>;\n  raw: (options?: HttpActionOptions) => ARMixin<IUserInterface>;\n}\n\n@HttpResource({\n  endpoint: '/api/users/:id?',\n  urlParams: { // there are hard coded params\n    limit: '5' // not in path so will go to query string (?param=15)\n  },\n  headers: {} // set custom headers for this resource\n  // more... setting the transformer (incoming result to object), security etc...\\\n})\n@Injectable()\nexport class UsersInterface extends ARMixin<IUserInterface, IUserInterfaceStatic>()\n                            implements  IUserInterface,\n                                        BeforeHook<'bfRef', HttpActionOptions>,\n                                        AfterHook<'afRef', HttpActionOptions> {\n\n  @Identity()\n  @UrlParam() id: number = 2; // this will go into the \"endpoint\" from the instance!\n\n  @Prop({\n    alias: 'username'\n  })\n  username__: string;\n\n\n  @Prop({\n    alias: 'motto'\n  })\n  @Exclude()\n  _motto_: string;\n\n\n  @BeforeHook('$refresh')\n  bfRef() {\n    console.log('BeforeRefresh');\n  }\n\n  @AfterHook('$refresh')\n  afRef() {\n    console.log('AfterRefresh');\n  }\n\n  @HttpAction({\n    method: HttpActionMethodType.Get,\n    post: UsersInterface.prototype.postDeserializedHandler\n  })\n  postDeserialized: (options?: HttpActionOptions) => ARMixin<UsersInterface>;\n  private postDeserializedHandler(resp: ExecuteResponse, options?: HttpActionOptions) {\n  }\n\n  @HttpAction({\n    method: HttpActionMethodType.Get,\n    post: {\n      handler: UsersInterface.prototype.postHandler,\n    }\n  })\n  raw: (options?: HttpActionOptions) => ARMixin<UsersInterface>;\n  private postHandler(resp: ExecuteResponse, options?: HttpActionOptions) {\n  }\n\n  static num: number;\n\n  @Hook({event: 'before', action: 'query'})\n  static bfQuery(this: TDMCollection<ARMixin<UsersInterface>>) {\n    this.$rc.next()\n      .then( coll => {\n        console.log(`BeforeQuery-AfterQuery: got ${coll.length}`)\n      });\n    console.log('BeforeQuery');\n  }\n\n  @Hook({event: 'after', action: 'query'})\n  static afQuery(this: TDMCollection<ARMixin<UsersInterface>>) {\n    console.log('AfterQuery');\n    console.log(`AfterQuery: got ${this.length}`)\n  }\n}\n\n// UsersInterface.find(2).username__;                                   // OK\n// UsersInterface.find(2).usernam23e;                                   // SHOULD ERROR\n// UsersInterface.num;                                                  // OK\n// new UsersInterface().$refresh().username__;                          // OK\n// const user: UsersInterface = new UsersInterface();                   // OK\n// user.$refresh().username__;                                          // OK\n// user.$refresh().abcd;                                                // SHOULD ERROR\n// user.$rc.next().then( u => u.id );                                   // OK\n// user.$rc.next().then( u => u.f34 );                                  // SHOULD ERROR\n// UsersInterface.query().$rc.next().then( coll => coll );   // OK\n// UsersInterface.query().$rc.next().then( coll => coll.sdfd );         // SHOULD ERROR\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/demo/modules/@playground/models/Users/UsersInterface.ts","/**\n * Model usage example - Base class implementation\n *\n * This example demonstrates model creation using 2 concrete classes.\n * A private base class that exposes all of the structure and provides implementation and an exposed empty class.\n * The base class is wrapping an empty class that is used as an export, this class should be left empty.\n *\n * Pros:\n *   - Single class, no interface, all in one place\n *   - Single place for concrete implementation\n *   - Can't make mistakes of implementing public API in wrong place.\n *   - Allows inheritance\n *\n * Cons:\n *   - Requires manual type creation (https://github.com/Microsoft/TypeScript/issues/6606)\n *   - For multiple mixins need to create type without ARMixin<> help.\n *     https://github.com/Microsoft/TypeScript/issues/13798\n *   - Won't work with angular DI + AOT (https://github.com/angular/angular/issues/14128)\n */\n\n\nimport { Injectable } from '@angular/core';\nimport { Hook, BeforeHook, AfterHook, TDMCollection, Prop, Exclude, ExecuteResponse, ExtendAction, ExecuteContext, IdentityValueType, Identity } from '@tdm/data';\nimport { ARMixin, HttpResource, HttpAction, UrlParam, HttpActionOptions, HttpActionMethodType } from '@tdm/ngx-http-client';\n\n@HttpResource({\n  endpoint: '/api/users/:id?',\n  urlParams: {\n    limit: '5'\n  }\n})\n@Injectable()\nexport class UserDAO implements  BeforeHook<'bfRef', HttpActionOptions>,\n                        AfterHook<'afRef', HttpActionOptions> {\n\n  @Identity()\n  @UrlParam() id: number = 2; // this will go into the \"endpoint\" from the instance!\n\n  @Prop({\n    alias: 'username'\n  })\n  username__: string;\n\n\n  @Prop({\n    alias: 'motto'\n  })\n  @Exclude()\n  _motto_: string;\n\n  constructor() { }\n\n  @Hook({event: 'before', action: '$refresh'})\n  bfRef() {\n    console.log('BeforeRefresh');\n  }\n\n  @Hook({event: 'after', action: '$refresh'})\n  afRef() {\n    console.log('AfterRefresh');\n  }\n\n  @HttpAction({\n    method: HttpActionMethodType.Get,\n    post: UserDAO.prototype.postDeserializedHandler\n  })\n  postDeserialized: (options?: HttpActionOptions) => ARMixin<UserDAO>;\n  private postDeserializedHandler(resp: ExecuteResponse, options?: HttpActionOptions) {\n  }\n\n  @HttpAction({\n    method: HttpActionMethodType.Get,\n    post: {\n      handler: UserDAO.prototype.postHandler,\n    }\n  })\n  raw: (options?: HttpActionOptions) => ARMixin<UserDAO>;\n  private postHandler(resp: ExecuteResponse, options?: HttpActionOptions) {\n  }\n\n  static num: number;\n\n  @Hook({event: 'before', action: 'query'})\n  static bfQuery(this: TDMCollection<ARMixin<UserDAO>>) {\n    this.$rc.next()\n      .then( coll => {\n        console.log(`BeforeQuery-AfterQuery: got ${coll.length}`)\n      });\n    console.log('BeforeQuery');\n  }\n\n  @Hook({event: 'before', action: 'findById'})\n  static bfFindById(this: TDMCollection<ARMixin<UserDAO>>) {\n    console.log('BeforeFindById');\n  }\n  @Hook({event: 'after', action: 'findById'})\n  static afFindById(this: TDMCollection<ARMixin<UserDAO>>) {\n    console.log('AfterFindById');\n  }\n\n  @Hook({event: 'after', action: 'query'})\n  static afQuery(this: TDMCollection<ARMixin<UserDAO>>) {\n    console.log('AfterQuery');\n    console.log(`AfterQuery: got ${this.length}`)\n  }\n\n  @ExtendAction({\n    pre: (ctx: ExecuteContext<any>, id: IdentityValueType, a:number, b: number, options: HttpActionOptions) => {\n      ctx.setIdentity(id);\n      return options;\n    }\n  })\n  static find: (id: IdentityValueType, a:number, b: number, options?: HttpActionOptions) => ARMixin<UserDAO>;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/demo/modules/@playground/models/Users/UserDAO.ts","import { Component } from '@angular/core';\nimport { DAO } from '@tdm/data';\nimport { NgDAO } from '@tdm/ngx-http-client';\n\nimport { UserBaseClass, UserConst, UsersInterface, UserDAO } from '../models';\n\nconst User = UserConst;\ntype User = UserConst;\n\n\n\n@Component({\n  selector: 'vehicle-page',\n  styleUrls: [ './playground-page.component.css' ],\n  templateUrl: './playground-page.component.html'\n})\nexport class PlaygroundPageComponent {\n  public user: User;\n\n  constructor(ngDAO: NgDAO) {\n    ngDAO.get(UserDAO).findById(6)\n      .then( user => {\n        console.log(user);\n      }, err => alert(err));\n\n    DAO.angularHttp(UserDAO).findById(5)\n      .then( user => {\n        console.log(user);\n      }, err => alert(err));\n    // this.user = new User();\n    this.user = User.findById(5);\n\n    // this.user.rawDeserialized({trailingSlashes: 'force'}).$rc.next()\n    //   .then( () => this.user.raw({withCredentials: true}).$rc.next() )\n    //   .then( () => this.gogo());\n\n\n    // this.user.id = 5;\n    // this.user.$refresh().$rc.next()\n    //   .then(() => {\n    //\n    //   })\n    //   .catch((err) => {\n    //   console.error(err);\n    //   });\n\n\n    // this.gogo();\n\n    // UserConst.query().$rc.next()\n    //   .then( coll => {\n    //   })\n  }\n\n  gogo() {\n\n    let $rc = this.user.$rc;\n    let subs = $rc.events$.subscribe(e => {\n      console.log(e.type);\n      if (e.type === 'ActionError') {\n        console.log(e['error'])\n      } else if (e.type === 'ActionEnd') {\n        setTimeout(() => {\n          this.user.id--;\n          if (this.user.id === 0) {\n            $rc.disconnect();\n          } else {\n            this.user.$refresh();\n          }\n        }, 500)\n      }\n    });\n\n    this.user.id = 2;\n    this.user.$refresh();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/demo/modules/@playground/playground-page/playground-page.component.ts"],"sourceRoot":"webpack:///"}