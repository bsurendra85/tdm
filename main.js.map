{"version":3,"sources":["webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/src/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/src/lib/add/target-metadata.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/src/lib/core.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/src/lib/decorators.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/add/mapping/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/add/model/decorator.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/add/model/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/add/model/model.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/add/model/target-metadata.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/add/target-store/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/fw/base-metadata.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/fw/errors.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/fw/events.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/fw/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/fw/lazy-ref.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/fw/metadata-framework/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/fw/metadata-framework/meta-class-get.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/fw/metadata-framework/meta-class.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/fw/metadata-framework/utils.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/fw/normalize.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/fw/set-map-ext.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/fw/utils.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/mapping/direct-mapper/direct-mapper.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/mapping/errors.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/mapping/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/mapping/mapper.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/mapping/plain-object-mapper.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/mapping/prop-container.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/mapping/target-transformer.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/metadata/exclude.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/metadata/helpers.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/metadata/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/metadata/prop.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/metadata/relation.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/metadata/target-metadata.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/metadata/target-store.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/metadata/type.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/model/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/model/tdm-collection.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/model/tdm-model.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/core/tdm/src/lib/tdm.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/plugin/active-record/src/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/plugin/active-record/src/lib/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/plugin/control-flow/src/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/plugin/control-flow/src/lib/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/plugin/control-flow/src/lib/rc-ext.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/plugin/rx-resource-control/src/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/plugin/rx-resource-control/src/lib/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/plugin/rx-resource-control/src/lib/rc-ext.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/active-record/interfaces.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/core-validators.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/core/action-controller.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/core/execute-context.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/core/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/core/target-validator.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/dao/dao.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/dao/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/dao/symbols.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/data.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/default-config.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/events/events.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/events/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/events/interfaces.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/events/internal.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/events/simple-events.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/fw/errors.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/fw/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/fw/interfaces.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/fw/plugin.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/metadata/decorators.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/metadata/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/metadata/meta-types/action.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/metadata/meta-types/adapter.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/metadata/meta-types/extend-action.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/metadata/meta-types/hook.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/metadata/meta-types/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/metadata/meta-types/relations.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/metadata/set-action-metadata-helpers.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/metadata/store.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/resource-control.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/transformation/decorators.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/transformation/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/transformation/meta-class.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/transformation/mixins.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/transformation/prop.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/transformation/relations.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/transformation/target-metadata.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/transformation/target-store.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/data/src/lib/utils/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/ngx-http-client/src/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/ngx-http-client/src/lib/active-record/ar-mixin.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/ngx-http-client/src/lib/active-record/http-active-record.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/ngx-http-client/src/lib/active-record/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/ngx-http-client/src/lib/core/http-adapter.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/ngx-http-client/src/lib/core/http-dao.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/ngx-http-client/src/lib/core/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/ngx-http-client/src/lib/decorators.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/ngx-http-client/src/lib/http-default-config.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/ngx-http-client/src/lib/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/ngx-http-client/src/lib/metadata/action.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/ngx-http-client/src/lib/metadata/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/ngx-http-client/src/lib/metadata/method-mapper.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/ngx-http-client/src/lib/metadata/resource.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/ngx-http-client/src/lib/metadata/url-params.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/ngx-http-client/src/lib/module.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/ngx-http-client/src/lib/register.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/ngx-http-client/src/lib/utils/match-pattern.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/ngx-http-client/src/lib/utils/path-to-regexp.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/tixin/src/index.ts","webpack:////Users/shlomiassaf/Desktop/Code/shlomi/__LIB__/tdm/libs/tixin/src/lib/tixin.ts","webpack:///./$_lazy_route_resource lazy namespace object","webpack:///./src/environments/environment.ts","webpack:///./src/init-tdm.ts","webpack:///./src/main.ts","webpack:///./src/modules/@app/app.component.html","webpack:///./src/modules/@app/app.component.scss","webpack:///./src/modules/@app/app.component.ts","webpack:///./src/modules/@app/app.module.ts","webpack:///./src/modules/@app/app.routes.ts","webpack:///./src/modules/@app/home/home.component.css","webpack:///./src/modules/@app/home/home.component.html","webpack:///./src/modules/@app/home/home.component.ts","webpack:///./src/modules/@app/home/index.ts","webpack:///./src/modules/@app/index.ts","webpack:///./src/modules/@app/no-content/index.ts","webpack:///./src/modules/@app/no-content/no-content.component.ts","webpack:///./src/modules/@shared/cdk-detail-row.directive.ts","webpack:///./src/modules/@shared/components/code-view/code-view.component.html","webpack:///./src/modules/@shared/components/code-view/code-view.component.scss","webpack:///./src/modules/@shared/components/code-view/code-view.component.ts","webpack:///./src/modules/@shared/components/feature-list/feature-list.component.html","webpack:///./src/modules/@shared/components/feature-list/feature-list.component.scss","webpack:///./src/modules/@shared/components/feature-list/feature-list.component.ts","webpack:///./src/modules/@shared/components/index.ts","webpack:///./src/modules/@shared/components/led/led.component.html","webpack:///./src/modules/@shared/components/led/led.component.scss","webpack:///./src/modules/@shared/components/led/led.component.ts","webpack:///./src/modules/@shared/components/markdown-view/markdown-view.component.html","webpack:///./src/modules/@shared/components/markdown-view/markdown-view.component.scss","webpack:///./src/modules/@shared/components/markdown-view/markdown-view.component.ts","webpack:///./src/modules/@shared/components/package-welcome/package-welcome.component.html","webpack:///./src/modules/@shared/components/package-welcome/package-welcome.component.scss","webpack:///./src/modules/@shared/components/package-welcome/package-welcome.component.ts","webpack:///./src/modules/@shared/components/tutorial-page/index.ts","webpack:///./src/modules/@shared/components/tutorial-page/tutorial-page.component.html","webpack:///./src/modules/@shared/components/tutorial-page/tutorial-page.component.scss","webpack:///./src/modules/@shared/components/tutorial-page/tutorial-page.component.ts","webpack:///./src/modules/@shared/components/ui-block.component.ts","webpack:///./src/modules/@shared/data-source/data-source-container.ts","webpack:///./src/modules/@shared/data-source/data-source.directive.ts","webpack:///./src/modules/@shared/data-source/filtering.ts","webpack:///./src/modules/@shared/data-source/index.ts","webpack:///./src/modules/@shared/data-source/pagination.ts","webpack:///./src/modules/@shared/data-source/sorting.ts","webpack:///./src/modules/@shared/directives/anchor-trap.directive.ts","webpack:///./src/modules/@shared/index.ts","webpack:///./src/modules/@shared/material.ts","webpack:///./src/modules/@shared/modules.ts","webpack:///./src/modules/@shared/pipes/code-filter.pipe.ts","webpack:///./src/modules/@shared/pipes/index.ts","webpack:///./src/modules/@shared/services/location.service.ts","webpack:///./src/modules/@shared/services/top-nav.service.ts","webpack:///./src/modules/@shared/services/tutorial.service.ts","webpack:///./src/modules/@shared/services/ui-block.ts","webpack:///./src/modules/@shared/shared.module.ts","webpack:///./src/modules/@shared/toc/index.ts","webpack:///./src/modules/@shared/toc/toc-area.directive.ts","webpack:///./src/modules/@shared/toc/toc-head.directive.ts","webpack:///./src/modules/@shared/toc/toc-link-template.ts","webpack:///./src/modules/@shared/toc/toc.component.html","webpack:///./src/modules/@shared/toc/toc.component.ts","webpack:///./src/modules/@shared/toc/toc.module.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["/*\n       * Public API Surface of mylib\n       */\nexport * from './lib/core';\n","import {\n  TargetMetadata,\n  DecoratorInfo,\n  PropMetadata,\n  isString\n} from '@tdm/core/tdm';\nimport { Prop } from '../decorators';\n\ndeclare module '@tdm/core/tdm/lib/metadata/target-metadata' {\n  interface TargetMetadata<T, Z> {\n    getCreateProp(info: DecoratorInfo | string): PropMetadata;\n  }\n}\n\n(function (CLS: typeof TargetMetadata) {\n  CLS.prototype.getCreateProp = function getCreateProp(info: DecoratorInfo | string): PropMetadata {\n    const name = isString(info) ? info : info.name;\n\n    if (!this.config.has(PropMetadata, name)) {\n      Prop()(this.target.prototype, name);\n    }\n\n    return this.config.get(PropMetadata, name);\n  };\n})(TargetMetadata);\n","import { directMapper, TDMModelBase } from '@tdm/core/tdm';\n\nexport {\n  // fw\n  errors,\n  Errors,\n  Constructor,\n  TransformDir,\n  TransformFn,\n  TransformStrategy,\n  NamingStrategyConfig,\n  // metadata\n  ModelMetadataArgs,\n  TypeDefinition,\n  TypeMetadataArgs,\n  PropMetadataArgs,\n  RelationMetadataArgs,\n  ExcludeMetadataArgs,\n  // here was tdm\n  TDMCollection,\n  TDMModel,\n  TDMModelBase,\n  // add/model\n  Model,\n  // mapping\n  directMapper,\n  TransformationError,\n  DirectSerializeMapper,\n  DirectDeserializeMapper\n} from '@tdm/core/tdm';\n\nexport { Type, Prop, Exclude, Relation, Identity } from './decorators';\n\nimport './add/target-metadata';\n\n// public serialize / deserialize functions\nimport { Constructor, MapperFactory, targetStore } from '@tdm/core/tdm';\n\n/**\n * Serialize a class instance into a plain object.\n * @param mapper\n * @param instance\n * @param type optional, if not set taken from instance.constructor\n * @returns\n */\nexport function serialize<T, Z>(\n  mapper: MapperFactory,\n  instance: T,\n  type?: Z & Constructor<T>\n): any {\n  return targetStore.serialize(\n    type || (instance.constructor as any),\n    mapper.serializer(instance)\n  );\n}\n\n/**\n * Automatically serialize an instance.\n * This method will serialize an instance by first trying to locate the target using the `constructor` function.\n * If a target is found and if it's a model target (i.e. ModelMetadata) it will try to get the mapper assign for that\n * model.\n *\n * If no target, model or mapper was found it will use the fallbackMapper mapper provided, or `directMapper`\n * if no fallback is provided provided.\n *\n * Note that when provided a fallback mapper, make sure it is able to serialize unknown targets. (plain objects)\n */\nexport function autoSerialize(\n  instance: any,\n  fallbackMapper: MapperFactory = directMapper\n): any {\n  const tMeta = targetStore.getTargetMeta(<any>instance.constructor);\n  const mapper =\n    (tMeta && tMeta.hasModel && tMeta.model().mapper) || fallbackMapper;\n  return serialize(mapper, instance);\n}\n\n/**\n * De-serialize a plain object into a the provided instance or, when no instance is provided, to a new instance.\n */\nexport function deserialize<T, Z>(\n  mapper: MapperFactory,\n  plainObject: any,\n  type: Z & Constructor<T>,\n  instance?: any\n): T {\n  return targetStore.deserialize(\n    mapper.deserializer(plainObject, type),\n    instance\n  );\n}\n\n/**\n * Automatically de-serialize an object to/into an instance.\n * This method will de-serialize an object by first trying to locate a model (i.e. ModelMetadata) for the target.\n * If a model is found it will try to get the mapper assign for that model.\n *\n * If no model or mapper was found it will use the fallbackMapper mapper provided, or `directMapper`\n * if no fallback is provided provided.\n *\n */\nexport function autoDeserialize<T, Z>(\n  plainObject: any,\n  type: Z & Constructor<T>,\n  instance: any = null,\n  fallbackMapper: MapperFactory = directMapper\n): T {\n  const tMeta = targetStore.getTargetMeta(type);\n  const mapper =\n    (tMeta && tMeta.hasModel && tMeta.model().mapper) || fallbackMapper;\n  return deserialize(mapper, plainObject, type, instance);\n}\n\n(function (CLS: typeof TDMModelBase) {\n  CLS.clone = function(\n    resource: any,\n    mapperFactory: MapperFactory = directMapper\n  ) {\n    return autoDeserialize(\n      autoSerialize(resource, mapperFactory),\n      <any>resource.constructor,\n      null,\n      mapperFactory\n    );\n  };\n})(TDMModelBase);\n","import {\n  Constructor,\n  MetaClass,\n  targetStore,\n  TypeMetadata,\n  ExcludeMetadata,\n  ExcludeMetadataArgs,\n  PropMetadata,\n  RelationMetadata,\n  TypeDefinition, // leave for angular AOT compiler.\n  PropMetadataArgs, // leave for angular AOT compiler.\n  RelationMetadataArgs // leave for angular AOT compiler.\n} from '@tdm/core/tdm';\n\ntargetStore.on.processType((target: Constructor<any>) => {\n  const meta = targetStore.getTargetMeta(target);\n  meta.getValues(RelationMetadata).forEach(relation => {\n    // Its possible to set @Relation() without @Prop(), so make sure to create one if not set by the user.\n    const prop = meta.getCreateProp(relation.decoratorInfo);\n    prop.setRelationship(relation);\n\n    // if the fk is a different key, attach a reference to the foreign key PropMetadata (and create 1 if not there)\n    if (relation.name !== relation.foreignKey) {\n      meta.getCreateProp(relation.foreignKey).foreignKeyOf = prop;\n    }\n  });\n});\n\n/**\n * @propertyDecorator instance\n * @param def\n */\nexport const Prop = MetaClass.decorator(PropMetadata, true);\n\n/** @internal */\nexport let exclude: any = {};\nexclude = MetaClass.decorator(ExcludeMetadata, true, 'classPropMethod'); // for Angular AOT\n\n/**\n * @propertyDecorator instance\n */\nexport function Exclude(\n  metaArgs?: ExcludeMetadataArgs\n): (\n  target: Object | Function,\n  key?: TdmPropertyKey,\n  desc?: PropertyDescriptor\n) => any {\n  return exclude(metaArgs) as any;\n}\n\n/**\n * @propertyDecorator instance\n * @param def\n */\nexport const Relation = MetaClass.decorator(RelationMetadata, true);\n\n/**\n * @propertyDecorator instance\n * @param def\n */\nexport const Type = MetaClass.decorator(TypeMetadata);\n\n/**\n * @propertyDecorator instance\n */\nexport function Identity(): Function {\n  return (target: Object, key: TdmPropertyKey) => {\n    targetStore.getTargetMeta(<any>target.constructor).model().identity = key;\n  };\n}\n","/*\n       * Public API Surface of mylib\n       */\nexport * from './lib/tdm';\n","import { Tixin } from '@tdm/tixin';\nimport { TargetMetadata } from '../../metadata/target-metadata';\nimport { TargetStore, targetStore } from '../../metadata/target-store';\nimport { Model } from '../model';\nimport {\n  SerializeMapper,\n  DeserializeMapper,\n  TransformationError\n} from '../../mapping';\nimport { TargetTransformer } from '../../mapping/target-transformer';\nimport { Constructor, isFunction, array, LazyInit } from '../../fw';\n\ndeclare module '../../metadata/target-store' {\n  interface TargetStore {\n    serialize(target: Constructor<any>, mapper: SerializeMapper): any;\n\n    /**\n     * Deserialize a known target.\n     * @param mapper\n     * @param instance Optional, if not set a new instance of the type will be created.\n     */\n    deserialize(\n      mapper: DeserializeMapper,\n      instance?: any\n    ): any | any[] | undefined;\n\n    /**\n     * Plain deserializer, deserialize with no metadata.\n     * @param mapper\n     * @param instance Optional, if not set a new instance of will be created.\n     */\n    deserializePlain(mapper: DeserializeMapper, instance?: any): any;\n  }\n}\n\ndeclare module '../../metadata/target-metadata' {\n  interface TargetMetadata<T = any, Z = any> {\n    transformer: TargetTransformer<T, Z>;\n    serialize(mapper: SerializeMapper): any;\n    deserialize(\n      mapper: DeserializeMapper,\n      target: any | any[],\n      plain?: boolean\n    ): void;\n  }\n}\n\nexport function initMapping(): void {\n  @Model({ resName: 'InternalPlainObject' })\n  class PlainObject {}\n\n  TargetStore.prototype.serialize = function serialize(\n    target: Constructor<any>,\n    mapper: SerializeMapper\n  ): any {\n    const meta = this.getTargetMeta(target);\n    if (meta) {\n      return meta.serialize(mapper);\n    }\n  };\n\n  /**\n   * Deserialize and instance of \"DeserializeMapper\" into an instance of tge target supplied\n   * @param target\n   * @param mapper\n   * @returns\n   */\n  TargetStore.prototype.deserialize = function deserialize(\n    mapper: DeserializeMapper,\n    instance?: any\n  ): any | any[] | undefined {\n    if (this.hasTarget(mapper.sourceType)) {\n      const meta = this.getTargetMeta(mapper.sourceType);\n      const result: any = instance || meta.model().factory(mapper.isCollection);\n\n      meta.deserialize(mapper, result);\n      return result;\n    } else {\n      return this.deserializePlain(mapper, instance);\n    }\n  };\n\n  /**\n   * Deserialize and instance of \"DeserializeMapper\" into a plain object (object literal)\n   * @param mapper\n   * @param instance Optional, if not set a new instance of will be created.\n   */\n  TargetStore.prototype.deserializePlain = function deserializePlain(\n    mapper: DeserializeMapper,\n    instance?: any\n  ): any {\n    const meta = this.getTargetMeta(PlainObject);\n    const result: any = instance || mapper.isCollection ? [] : {};\n    meta.deserialize(mapper, result, true);\n    return result;\n  };\n\n  class MappingTargetMetadata<T, Z> extends TargetMetadata<T, Z> {\n    @LazyInit(function(this: TargetMetadata<T, Z>): TargetTransformer<T, Z> {\n      return new TargetTransformer<T, Z>(this);\n    })\n    transformer: TargetTransformer<T, Z>;\n\n    serialize(mapper: SerializeMapper): any {\n      return this.transformer.serialize(mapper);\n    }\n\n    deserialize(\n      mapper: DeserializeMapper,\n      target: any | any[],\n      plain: boolean = false\n    ): void {\n      if (mapper.isCollection) {\n        if (!Array.isArray(target)) {\n          throw TransformationError.coll_obj(true);\n        }\n\n        const refItems = target.splice(0, target.length);\n        const identKey = targetStore.getIdentityKey(this.target, 'incoming');\n\n        while (mapper.next()) {\n          let t: any;\n\n          // compare current item to map with a list of items that if we, if we got.\n          // if match use that instance.\n          // TODO: Move compare to the global store, so logic can change without bugs.\n          if (refItems.length > 0 && isFunction(mapper.getIdentity)) {\n            const incomingIdent = mapper.getIdentity();\n            t = array.findRemove(\n              refItems,\n              item => item[identKey] === incomingIdent\n            );\n          }\n\n          if (!t) {\n            t = plain ? {} : this.model().factory(false);\n          }\n\n          this.transformer.deserialize(mapper, t);\n          target.push(t);\n        }\n      } else {\n        if (Array.isArray(target)) {\n          throw TransformationError.coll_obj(false);\n        }\n\n        this.transformer.deserialize(mapper, target);\n      }\n    }\n  }\n\n  Tixin(TargetMetadata, MappingTargetMetadata);\n}\n","import { MetaClass, getProtoChain } from '../../fw';\nimport { targetStore, ModelMetadataArgs } from '../../metadata';\nimport { ModelMetadata } from './model';\n\n/**\n * @propertyDecorator static\n * @param metaArgs\n */\nexport function Model(metaArgs?: ModelMetadataArgs): Function {\n  return (target: any) => {\n    const metaClass = MetaClass.create(ModelMetadata, metaArgs, target);\n    processModel(target, metaClass, metaClass.skip !== true);\n  };\n}\n\n/**\n * Takes a model and process it.\n * The first step is to extend the target, if it inherits.\n * The second step is calling the build() method on the metadata class which will\n * start the event lifecycle.\n */\nexport function processModel(\n  target: any,\n  metaClass: ModelMetadata,\n  build?: boolean\n) {\n  for (let proto of getProtoChain(target)) {\n    if (target !== proto && targetStore.hasTarget(proto)) {\n      targetStore.extend(proto, target);\n    }\n  }\n\n  if (build) {\n    metaClass.build();\n  }\n}\n","import './target-metadata';\nexport { ModelMetadata } from './model';\nexport { Model, processModel } from './decorator';\n","import {\n  getProtoChain,\n  targetEvents,\n  stringify,\n  TransformStrategy,\n  NamingStrategyConfig,\n  MetaClass,\n  BaseMetadata,\n  DecoratorInfo,\n  Constructor,\n  MetaClassMetadata\n} from '../../fw';\nimport { targetStore, TargetMetadata, ModelMetadataArgs } from '../../metadata';\nimport { MapperFactory } from '../../mapping';\n\nexport const MODEL_PH = Symbol('ModelMetadata placeholder');\n\n// exporting to satisfy angular AOT\n/** @internal */\nexport function extendSingle(\n  from: ModelMetadata,\n  to: ModelMetadata | undefined,\n  meta: { from: Constructor<any>; to: Constructor<any> }\n): ModelMetadata | undefined {\n  if (!to) {\n    const tMeta = targetStore.getTargetMeta(meta.to);\n    return (tMeta[MODEL_PH] = from.clone(meta.to));\n  } else {\n    Object.keys(from).forEach(k => {\n      if (!(k in to)) {\n        to[k] = from[k];\n      }\n    });\n  }\n}\n\n@MetaClass<ModelMetadataArgs, ModelMetadata>({\n  allowOn: ['class'],\n  single: true,\n  extendSingle\n})\nexport class ModelMetadata extends BaseMetadata implements ModelMetadataArgs {\n  identity: TdmPropertyKey;\n  resName: string;\n  transformStrategy: TransformStrategy | undefined;\n  transformNameStrategy: NamingStrategyConfig | undefined;\n  mapper: MapperFactory;\n\n  tMeta: TargetMetadata;\n  target: Constructor<any>;\n  skip?: true;\n\n  get built(): boolean {\n    return this._built;\n  }\n\n  private _built: boolean;\n\n  constructor(\n    metaArgs: ModelMetadataArgs,\n    info: DecoratorInfo,\n    target: Constructor<any>\n  ) {\n    super(info);\n\n    const tMeta = targetStore.getTargetMeta(target);\n\n    /*\n    Checking up the proto-tree if there are temp model metadata values set.\n    This allows inheritance of model classes where the base class has no class decorator but do have\n    member decorators.\n\n    ```ts\n        class UserBase {\n          @Identity()\n          @UrlParam() id: number;\n        }\n\n        @HttpResource({\n          endpoint: '/api/users/:id/:param',\n          urlParams: { param: '99' }\n        })\n        class User extends ActiveRecord(UserBase) { }\n    ```\n\n    In the example, UserBase does not have a class decorator but the derived class User does.\n\n    > Note: Stopping on the first prototype that has an instantiated ModelMetadata, we can stop there\n    because implementation will invoke `extend` for prototypes and since it's now an instance it will auto-extend.\n     */\n    const protoChain = getProtoChain(target);\n    for (let i = protoChain.length - 1; i > 0; i--) {\n      // we skip idx 0, its the target itself.\n      const meta =\n        targetStore.hasTarget(protoChain[i]) &&\n        targetStore.getTargetMeta(protoChain[i]);\n      if (meta) {\n        if (meta[MODEL_PH] && !meta.hasModel) {\n          Object.assign(this, meta[MODEL_PH]);\n        } else if (meta.hasModel) {\n          break;\n        }\n      }\n    }\n\n    const classMetadata = tMeta.hasOwnProperty(MODEL_PH) ? tMeta[MODEL_PH] : {};\n    Object.assign(\n      this,\n      classMetadata,\n      metaArgs || {},\n      { target, tMeta } // last obj is for clone, so we won't take previous values\n    );\n\n    if (!this.resName) {\n      this.resName = stringify(target);\n    }\n\n    tMeta[MODEL_PH] = this;\n  }\n\n  clone(target: Constructor<any>): ModelMetadata {\n    const ctor: typeof ModelMetadata = <any>this.constructor;\n    return new ctor(this, this.decoratorInfo, target);\n  }\n\n  factory(isColl: boolean): any {\n    return isColl ? this.tMeta.createCollection() : new this.target();\n  }\n\n  /**\n   * Build the model.\n   * @param safe If set to true will not throw if the model is already built.\n   * @returns true if the model was built by this call\n   */\n  build(safe?: true): boolean {\n    if (this.built) {\n      if (safe === true) {\n        return false;\n      } else {\n        throw new Error(`\"${stringify(this.target)}\" already built.`);\n      }\n    }\n    this._built = true;\n    targetEvents.FIRE.beforeProcessType(this.target);\n    targetEvents.FIRE.processType(this.target);\n    return true;\n  }\n}\n\ndeclare module '../../fw/metadata-framework/meta-class' {\n  namespace MetaClass {\n    function get(\n      target: typeof ModelMetadata\n    ): MetaClassMetadata<ModelMetadataArgs, ModelMetadata>;\n  }\n}\n","import { TargetMetadata } from '../../metadata';\nimport { ModelMetadata, MODEL_PH } from './model';\n\ndeclare module '../../metadata/target-metadata' {\n  interface TargetMetadata<T = any, Z = any> {\n    /**\n     * Indicates if the model returned from model() is a placeholder or a {@link ModelMetadata} instance.\n     */\n    hasModel: boolean;\n\n    /**\n     * Returns a placeholder or the {@link ModelMetadata} instance (or a derived class instance) for the target.\n     *\n     * If a {@link ModelMetadata} instance is not yet created, a plain object is returned.\n     * The plain object is used a a placeholder for storing model metadata before the instance get's created.\n     *\n     * Use the `hasModel` property to check if it is a plain object or a {@link ModelMetadata} instance\n     */\n    model<T extends ModelMetadata>(): T | undefined;\n  }\n}\n\nObject.defineProperty(TargetMetadata.prototype, 'model', {\n  value: function(this: TargetMetadata) {\n    // this[MODEL_PH] is set from ModelMetadata constructor\n    // if not set, create one to act as temporary placeholder until set.\n    // ModelMetadata will grab the data on the placeholder and take it into account\n    return this[MODEL_PH] || (this[MODEL_PH] = {});\n  }\n});\n\nObject.defineProperty(TargetMetadata.prototype, 'hasModel', {\n  get: function(this: TargetMetadata) {\n    return this[MODEL_PH] instanceof ModelMetadata;\n  }\n});\n","import { Constructor, isFunction } from '../../fw/utils';\nimport { TransformDir } from '../../fw/interfaces';\nimport { targetEvents } from '../../fw/events';\nimport {\n  TargetStore,\n  TargetMetadata,\n  PropMetadata,\n  targetStore\n} from '../../metadata';\nimport { ModelMetadata } from '../../add/model';\n\ndeclare module '../../metadata/target-metadata' {\n  interface TargetMetadata<T, Z> {\n    /**\n     * Returns the target's identity key without initiating a target build.\n     * @param target\n     * @param direction\n     * @returns\n     */\n    getIdentityKey(direction?: TransformDir): string | undefined;\n  }\n}\n\ndeclare module '../../metadata/target-store' {\n  interface TargetStore {\n    /**\n     * Returns the target's identity key without initiating a target build.\n     * @param target\n     * @param direction\n     * @returns\n     */\n    getIdentityKey(\n      target: Constructor<any>,\n      direction?: TransformDir\n    ): string | undefined;\n\n    /**\n     * Returns metadata, if not built, builds it\n     * @param target\n     * @param register when true will also register if not exists\n     * @returns\n     */\n    getTargetMeta<T, Z>(\n      target: Z & Constructor<T>\n    ): TargetMetadata<T, Z> | undefined;\n\n    /**\n     * Returns the target's name key without initiating a target build.\n     * @param target\n     * @returns\n     */\n    getTargetName(target: Constructor<any>): string | undefined;\n  }\n}\n\n// set the name for name lookup\ntargetStore.on.processType(target => {\n  const model = targetStore.getTargetMeta(target).model();\n  if (model) {\n    // TODO: make this type safe\n    targetStore['namedTargets'].set(model.resName, target);\n  }\n});\n\nTargetMetadata.prototype.getIdentityKey = function getIdentityKey(\n  this: TargetMetadata,\n  direction?: TransformDir\n): string | undefined {\n  return targetStore.getIdentityKey(this.target, direction);\n};\n\nTargetStore.prototype.getTargetName = function getTargetName(\n  this: TargetStore,\n  target: Constructor<any>\n): string | undefined {\n  return targetStore.getMetaFor(target, ModelMetadata, true, 'resName');\n};\n\nTargetStore.prototype.getTargetMeta = function getTargetMeta(\n  target: Constructor<any>\n): TargetMetadata | undefined {\n  let meta = this.builtTargets.get(target);\n  if (!meta) {\n    const metaArgs = this.targets.get(target);\n\n    if (!metaArgs) {\n      this.registerTarget(target);\n      return this.getTargetMeta(target);\n    }\n\n    meta = new TargetMetadata(target, metaArgs);\n    this.builtTargets.set(target, meta);\n    targetEvents.FIRE.createMetadata(target);\n  }\n  return meta;\n};\n\nTargetStore.prototype.getIdentityKey = function getIdentityKey(\n  this: TargetStore,\n  target: Constructor<any>,\n  direction?: TransformDir\n): string | undefined {\n  const meta = this.getTargetMeta(target);\n  const model = meta.model();\n  const identity = <any>model.identity;\n\n  if (identity) {\n    if (!direction) {\n      return identity;\n    }\n\n    const propMeta = meta.getMetaFor(PropMetadata, identity);\n\n    // apply naming strategy when DONT HAVE ALIAS!\n    if (propMeta.name === propMeta.alias[direction]) {\n      const transformNameStrategy = model.transformNameStrategy;\n\n      if (\n        transformNameStrategy &&\n        isFunction(transformNameStrategy[direction])\n      ) {\n        // in exclusive mode there is no point in have 2 transformation strategies.\n        // incoming is never there since incoming keys are not calculated, only defined Props.\n        if (model.transformStrategy === 'exclusive') {\n          direction = 'outgoing';\n        }\n\n        return transformNameStrategy[direction](propMeta.name);\n      }\n    }\n\n    return direction === 'outgoing'\n      ? propMeta.alias.outgoing\n      : propMeta.alias.incoming;\n  }\n};\n","// tslint:disable:max-classes-per-file\nimport { DecoratorInfo } from './metadata-framework';\nimport { Constructor, reflection } from './utils';\n\nexport abstract class BaseMetadata {\n  /**\n   * The property name that the decorator wraps, if it wraps a property, member or constructor param.\n   * @returns\n   */\n  readonly name: TdmPropertyKey | undefined;\n\n  constructor(public readonly decoratorInfo: DecoratorInfo) {\n    this.name = decoratorInfo.name;\n  }\n}\n\nexport abstract class BaseParamMetadata extends BaseMetadata {\n  readonly paramType: Function | Constructor<any>;\n\n  get paramIndex(): number {\n    return this.decoratorInfo.paramIndex;\n  }\n\n  constructor(di: DecoratorInfo, target: Constructor<any>) {\n    super(di);\n    this.paramType = reflection.paramTypes(target.prototype, this.name)[\n      di.paramIndex\n    ];\n  }\n}\n","import { stringify, isFunction } from './utils';\n\nconst ERROR_EXEC_TYPE = Symbol('Throw');\n\nexport class Errors {\n  /**\n   * Returns a marked Errors repository where the next call to an error object will throw.\n   *\n   * e.g. `errors.THROW().decorator(...)` will throw\n   */\n  get throw(): this {\n    return Object.assign(Object.create(this), { [ERROR_EXEC_TYPE]: 'throw' });\n  }\n\n  protected constructor() {\n    // support for post instantiation mixins on the prototype (plugins) - don't use new.\n    Errors.create(this);\n  }\n\n  decorator(\n    target: any,\n    message: string,\n    propertyName?: TdmPropertyKey\n  ): Error {\n    const CLS = isFunction(target) ? target : target.constructor;\n\n    if (!propertyName) {\n      return this.ERROR(`Invalid decorator @ ${stringify(CLS)}}: ${message}`);\n    } else {\n      const dot = CLS === target ? '#' : '.';\n      return this.ERROR(\n        `Invalid decorator @ ${stringify(target)}${dot}${stringify(\n          propertyName\n        )}: ${message}`\n      );\n    }\n  }\n\n  model(model: any, message: string): Error {\n    return this.ERROR(`Model Error [${stringify(model)}]: ${message}`);\n  }\n\n  modelSingleCol(model: any, expectedCol: boolean): Error {\n    return this.ERROR(\n      `Model Error:` + expectedCol\n        ? `Expected a COLLECTION but got an OBJECT [Target: ${stringify(\n            model\n          )}]`\n        : `Expected an OBJECT but got a COLLECTION [Target: ${stringify(\n            model\n          )}]`\n    );\n  }\n\n  /**\n   * @internal\n   */\n  ERROR<T = any>(message: string, assign?: T): Error & T {\n    const err = new Error(message);\n    if (assign) {\n      Object.assign(err, assign);\n    }\n\n    if (this[ERROR_EXEC_TYPE] === 'throw') {\n      throw err;\n    } else {\n      return <any>err;\n    }\n  }\n\n  /**\n   * Creates a new TargetStore instance.\n   * @param instance optional, used internally\n   */\n  static create(instance?: Errors): Errors {\n    const errors: Errors = instance || Object.create(Errors.prototype);\n    return errors;\n  }\n}\n\nexport const errors: Errors = Errors.create();\n","import { KeySet } from './set-map-ext';\nimport { Constructor, isFunction } from './utils';\nimport { MetadataClassStatic } from './metadata-framework';\n\nconst eventHandlers = new KeySet<\n  TARGET_EVENT_NAMES,\n  (target: Constructor<any>) => void\n>();\nconst metaInitHandlers = new KeySet<\n  Constructor<any>,\n  (target: Constructor<any>, value: any, metaArgs?: any) => void\n>();\n\n/**\n * Event listeners registration object for lifecycle metadata events on a target.\n *\n * @pluginApi\n * @mixable\n * @singleton\n */\nexport class TargetEvents {\n  protected constructor() {\n    // support for post instantiation mixins on the prototype (plugins) - don't use new.\n    TargetEvents.create(this);\n  }\n\n  metaInit<TMetaArgs, TMetaClass, Z>(\n    metaClass: Z & MetadataClassStatic<TMetaArgs, TMetaClass>\n  ) {\n    return {\n      run(\n        handler: (\n          target: Constructor<any>,\n          value: TMetaClass,\n          metaArgs?: TMetaArgs\n        ) => void\n      ): void {\n        metaInitHandlers.add(metaClass, handler);\n      }\n    };\n  }\n\n  /**\n   * Fired when the {@link TargetMetadata} instance is created for the target)\n   *\n   * FireBefore: processType\n   */\n  createMetadata(handler: (target: Constructor<any>) => void): void {\n    if (isFunction(handler)) {\n      eventHandlers.add('createMetadata', handler);\n    }\n  }\n\n  /**\n   * Fired before the type is processed, after extending all metadata.\n   * This event is not guaranteed to fire, it will fire only if the type is decorated with an appropriate decorator.\n   *\n   * FireAfter: createMetadata\n   * FireBefore: processType\n   */\n  beforeProcessType(handler: (target: Constructor<any>) => void): void {\n    if (isFunction(handler)) {\n      eventHandlers.add('beforeProcessType', handler);\n    }\n  }\n\n  /**\n   * Fired when the type is processed, after extending all metadata.\n   * This event is not guaranteed to fire, it will fire only if the type is decorated with an appropriate decorator.\n   *\n   * FireAfter: beforeProcessType\n   */\n  processType(handler: (target: Constructor<any>) => void): void {\n    if (isFunction(handler)) {\n      eventHandlers.add('processType', handler);\n    }\n  }\n\n  FIRE: typeof EVENT_FIRE;\n\n  static create(instance?: TargetEvents): TargetEvents {\n    const targetStore: TargetEvents =\n      instance || Object.create(TargetEvents.prototype);\n    targetStore.FIRE = EVENT_FIRE;\n    return targetStore;\n  }\n}\n\nexport const EVENT_FIRE = {\n  metaInit<TMetaArgs, TMetaClass, Z>(\n    metaClass: Z & MetadataClassStatic<TMetaArgs, TMetaClass>,\n    target: Constructor<any>,\n    value: TMetaClass,\n    metaArgs?: TMetaArgs\n  ): void {\n    const eventMap = metaInitHandlers.get(metaClass);\n    if (eventMap) {\n      Array.from(eventMap.values()).forEach(handler =>\n        handler(target, value, metaArgs)\n      );\n    }\n  },\n  createMetadata: (target: Constructor<any>) =>\n    fireTargetEvent('createMetadata', target),\n  beforeProcessType: (target: Constructor<any>) =>\n    fireTargetEvent('beforeProcessType', target),\n  processType: (target: Constructor<any>) =>\n    fireTargetEvent('processType', target)\n};\n\nexport const targetEvents = TargetEvents.create();\n\ntype TARGET_EVENT_NAMES =\n  | 'createMetadata'\n  | 'beforeProcessType'\n  | 'processType';\n\nfunction fireTargetEvent(event: TARGET_EVENT_NAMES, target: any): void {\n  const eventMap = eventHandlers.get(event);\n  if (eventMap) {\n    Array.from(eventMap.values()).forEach(handler => handler(target));\n  }\n}\n","export * from './errors';\nexport * from './set-map-ext';\nexport * from './utils';\nexport * from './interfaces';\nexport * from './base-metadata';\nexport * from './normalize';\nexport * from './events';\nexport * from './lazy-ref';\nexport * from './metadata-framework/index';\n","/**\n * Same as angular's `forwardRef`, different name to prevent confusion / collusion.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport { isFunction, stringify, Constructor } from './utils';\n\nconst lazyRefKey = Symbol('lazyRef');\nconst toString = function() {\n  return stringify(this());\n};\n\n/**\n * Allows to refer to references which are not yet defined.\n *\n * For instance, `lazyRef` is used when the `token` which we need to refer to for the purposes of\n * DI is declared,\n * but not yet defined. It is also used when the `token` which we use when creating a query is not\n * yet defined.\n *\n * ### Example\n * {@example core/di/ts/forward_ref/forward_ref_spec.ts region='forward_ref'}\n * @experimental\n */\nexport function lazyRef<T extends Constructor<any>>(lazyRefFn: () => T): T {\n  lazyRefFn[lazyRefKey] = lazyRef;\n  lazyRefFn.toString = toString;\n  return lazyRefFn as any;\n}\n\nexport namespace lazyRef {\n  /**\n   * Lazily retrieves the reference value from a lazyRef.\n   *\n   * Acts as the identity function when given a non-forward-ref value.\n   *\n   * ### Example ([live demo](http://plnkr.co/edit/GU72mJrk1fiodChcmiDR?p=preview))\n   *\n   * {@example core/di/ts/forward_ref/forward_ref_spec.ts region='resolve_forward_ref'}\n   *\n   * See: {@link lazyRef}\n   * @experimental\n   */\n  export function resolve(type: any): Constructor<any> {\n    return isFunction(type) && type[lazyRefKey] === lazyRef ? type() : type;\n  }\n}\n","export * from './meta-class-args';\nexport * from './meta-class';\nexport * from './types';\nexport * from './utils';\n\nimport './meta-class-get';\n","import { MetadataClassStatic } from './types';\nimport { MetaClassMetadata, MetaClass, getMetaClass } from './meta-class';\n\ndeclare module './meta-class' {\n  namespace MetaClass {\n    function get<TMetaArgs, TMetaClass>(\n      target: MetadataClassStatic<TMetaArgs, TMetaClass>\n    ): MetaClassMetadata<TMetaArgs, TMetaClass>;\n  }\n}\n\nMetaClass.get = <any>getMetaClass;\n","// This is a core class with lot's of type crazy stuff, enforcing max-line-length will create an unreadable mess\n// tslint:disable:max-line-length\n\nimport {\n  Constructor,\n  isString,\n  stringify,\n  ensureTargetIsType,\n  isFunction\n} from '../utils';\nimport { targetEvents } from '../events';\nimport {\n  MetadataClassStatic,\n  MetaClassInstanceDetails,\n  MetadataCurriedCreate,\n  DecoratorInfo,\n  RegisterFn,\n  ExtendFn,\n  ExtendSingleFn\n} from './types';\nimport { decoratorInfo, extendHelpers, registerHelpers } from './utils';\nimport {\n  ProxyHostMetadataArgs,\n  MetaClassMetadataArgs\n} from './meta-class-args';\n\nconst store = new Map<Constructor<any>, MetaClassMetadata>();\n\n/**\n * A token representing single items (see {@link MetaClassMetadataArgs.single})\n * Use this token as a key for single items in TargetMetadata\n */\nexport class GLOBAL_KEY {} // tslint:disable-line:class-name\n\n/**\n * Represents management and control logic for metadata class's\n */\n// tslint:disable-next-line:max-classes-per-file\nexport class MetaClassMetadata<TMetaArgs = any, TMetaClass = any, Z = any> {\n  private proxyTo: Array<\n    ProxyHostMetadataArgs & { metaClass: MetaClassMetadata }\n  > = [];\n\n  private constructor(\n    public target: Z & MetadataClassStatic<TMetaArgs, TMetaClass>,\n    public metaArgs?: MetaClassMetadataArgs<TMetaArgs, TMetaClass>\n  ) {\n    if (!this.metaArgs) {\n      this.metaArgs = {};\n    } else {\n      if (metaArgs.inherit) {\n        this.metaArgs = metaArgs = Object.assign(\n          {},\n          MetaClass.get(metaArgs.inherit).metaArgs,\n          metaArgs\n        );\n      }\n\n      if (metaArgs.factory) {\n        this.factory = metaArgs.factory;\n      }\n\n      if (metaArgs.register) {\n        if (isString(metaArgs.register)) {\n          this.register = registerHelpers[metaArgs.register];\n        } else if (isFunction(metaArgs.register)) {\n          this.register = metaArgs.register;\n        }\n      }\n\n      if (metaArgs.proxy) {\n        const proxy: ProxyHostMetadataArgs & {\n          metaClass: MetaClassMetadata;\n        } = <any>metaArgs.proxy;\n        proxy.metaClass = this;\n        MetaClass.get(metaArgs.proxy.host).proxyTo.push(proxy);\n      }\n\n      if (metaArgs.extend) {\n        if (metaArgs.single === true) {\n          // TODO: make error message clear;\n          throw new Error(\n            'Extending a single class is done using extendSingle'\n          );\n        }\n        if (isString(metaArgs.extend)) {\n          this.extend = extendHelpers[metaArgs.extend];\n        } else if (isFunction(metaArgs.extend)) {\n          this.extend = metaArgs.extend;\n        }\n      }\n\n      if (isFunction(metaArgs.extendSingle)) {\n        if (metaArgs.single !== true) {\n          // TODO: make error message clear;\n          throw new Error('Extending a non-single class is done using extend');\n        }\n        this.extendSingle = metaArgs.extendSingle;\n      }\n    }\n  }\n\n  /**\n   * Create a new instance of the metadata class\n   * @param metaArgs\n   * @param target\n   * @param key\n   * @param desc\n   * @returns\n   */\n  create(\n    metaArgs: TMetaArgs,\n    target: Object | Function,\n    key?: TdmPropertyKey,\n    desc?: PropertyDescriptor | number\n  ): TMetaClass {\n    return this.createCurry(metaArgs, target, key, desc)();\n  }\n\n  createCurry(\n    metaArgs: TMetaArgs,\n    target: Object | Function,\n    key?: TdmPropertyKey,\n    desc?: PropertyDescriptor | number\n  ): MetadataCurriedCreate<TMetaArgs, TMetaClass> {\n    const info = decoratorInfo(target, key, desc);\n    const allowOn = this.metaArgs.allowOn;\n\n    if (allowOn && allowOn.length > 0) {\n      if (info.type === 'class') {\n        if (allowOn.indexOf('class') === -1) {\n          throw new Error(\n            `Metadata class ${stringify(\n              this.target\n            )} can not decorate a class (${stringify(target)})`\n          );\n        }\n      } else if (info.isStatic) {\n        if (allowOn.indexOf('staticMember') === -1) {\n          throw new Error(\n            `Metadata class ${stringify(\n              this.target\n            )} can not decorate a static member (${stringify(target)}#${key})`\n          );\n        }\n      } else if (info.type === 'param') {\n        if (allowOn.indexOf('param') === -1) {\n          throw new Error(\n            `Metadata class ${stringify(\n              this.target\n            )} can not decorate a param (${stringify(target)}#${key})`\n          );\n        }\n      } else {\n        if (allowOn.indexOf('member') === -1) {\n          throw new Error(\n            `Metadata class ${stringify(\n              this.target\n            )} can not decorate an instance member ` +\n              `(${stringify(target.constructor)}.${key})`\n          );\n        }\n      }\n    }\n\n    const meta = this.factory(metaArgs, target, info, key, desc);\n\n    const curry: MetadataCurriedCreate<TMetaArgs, TMetaClass> = <any>((\n      _meta?: MetaClassInstanceDetails<TMetaArgs, TMetaClass>\n    ): TMetaClass => {\n      if (!_meta) {\n        _meta = meta;\n      }\n\n      // in case factory return undefined\n      if (!_meta) {\n        return;\n      }\n\n      this.register(_meta);\n\n      const chain = this.singleChain(_meta);\n      if (chain) {\n        // we use this class's register implementation for all\n        chain.forEach(c => this.register(c));\n      }\n\n      targetEvents.FIRE.metaInit(\n        _meta.metaClassKey,\n        _meta.target,\n        _meta.metaValue,\n        metaArgs\n      );\n\n      const proxies = this.findProxies(metaArgs);\n      proxies.forEach(ra => {\n        if (ra) {\n          // we check since findProxies returns undefined when no key on metadata arguments was found\n          for (let i = 0, len = ra.args.length; i < len; i++) {\n            ra.meta.create(ra.args[i], target, key, desc);\n          }\n        }\n      });\n\n      return meta && meta.metaValue;\n    });\n\n    curry.meta = meta;\n\n    return curry;\n  }\n\n  createDecorator(type: 'class'): (def: TMetaArgs) => ClassDecorator;\n  createDecorator(type: 'param'): (def: TMetaArgs) => ParameterDecorator;\n  createDecorator(type: 'prop'): (def: TMetaArgs) => PropertyDecorator;\n  createDecorator(type: 'method'): (def: TMetaArgs) => MethodDecorator;\n  createDecorator(\n    type: 'propMethod'\n  ): (def: TMetaArgs) => PropertyDecorator | MethodDecorator;\n  createDecorator(\n    type: 'classPropMethod'\n  ): (def: TMetaArgs) => ClassDecorator | PropertyDecorator | MethodDecorator;\n  createDecorator(): (def: TMetaArgs) => PropertyDecorator | MethodDecorator;\n  createDecorator(\n    optional: true,\n    type: 'class'\n  ): (def?: TMetaArgs) => ClassDecorator;\n  createDecorator(\n    optional: true,\n    type: 'param'\n  ): (def?: TMetaArgs) => ParameterDecorator;\n  createDecorator(\n    optional: true,\n    type: 'prop'\n  ): (def?: TMetaArgs) => PropertyDecorator;\n  createDecorator(\n    optional: true,\n    type: 'method'\n  ): (def?: TMetaArgs) => MethodDecorator;\n  createDecorator(\n    optional: true,\n    type: 'propMethod'\n  ): (def?: TMetaArgs) => PropertyDecorator | MethodDecorator;\n  createDecorator(\n    optional: true,\n    type: 'classPropMethod'\n  ): (def?: TMetaArgs) => ClassDecorator | PropertyDecorator | MethodDecorator;\n  createDecorator(\n    optional: true\n  ): (def?: TMetaArgs) => PropertyDecorator | MethodDecorator;\n  createDecorator(...args: any[]): any {\n    return <any>((def: TMetaArgs) => {\n      return (\n        target: Object | Function,\n        key: TdmPropertyKey,\n        desc?: PropertyDescriptor\n      ) => {\n        this.create(def, target, key, desc);\n      };\n    });\n  }\n\n  /**\n   * @internal\n   * set by target-store.ts\n   */\n  public register: RegisterFn;\n\n  /**\n   * @internal\n   */\n  extend?: ExtendFn;\n  extendSingle?: ExtendSingleFn<TMetaClass>;\n\n  /**\n   * @internal\n   */\n  public factory(\n    metaArgs: TMetaArgs,\n    target: Object | Function,\n    info: DecoratorInfo,\n    key?: TdmPropertyKey,\n    desc?: PropertyDescriptor | number\n  ): MetaClassInstanceDetails<TMetaArgs, TMetaClass> {\n    const type = ensureTargetIsType(target);\n    const meta = {\n      info,\n      target: type,\n      metaClassKey: this.target,\n      metaPropKey: this.metaArgs.single === true ? GLOBAL_KEY : info.name,\n      metaValue: new this.target(metaArgs, info, type)\n    };\n\n    return meta;\n  }\n\n  /**\n   * Given a MetaClassInstanceDetails, if its a single metadata (single) and has a chain (inherit)\n   * it will go up the chain and create MetaClassInstanceDetails that match the given one just with\n   * the inherited class as the metaClass property.\n   *\n   * This is used to allow registering inheriting single metadata classes.\n   * For example, a ModelMetadata might get extended by an adapter resource, the only metadata class\n   * registered is the extending one, if we will not register the ModelMetadata token as well logic\n   * that expects to find it will fail.\n   * @param meta\n   * @returns\n   */\n  private singleChain(\n    meta: MetaClassInstanceDetails<TMetaArgs, TMetaClass>\n  ): Array<MetaClassInstanceDetails<TMetaArgs, TMetaClass>> | undefined {\n    if (this.metaArgs.single === true && this.metaArgs.inherit) {\n      const parentMeta = Object.create(meta);\n      parentMeta.metaClassKey = this.metaArgs.inherit;\n\n      const deep = getMetaClass(this.metaArgs.inherit).singleChain(meta);\n      return deep ? [parentMeta, ...deep] : [parentMeta];\n    }\n  }\n\n  private findProxies(\n    metaArgs: TMetaArgs | undefined\n  ): Array<{ meta: MetaClassMetadata; args: any[] }> {\n    const results: Array<{ meta: MetaClassMetadata; args: any[] }> = [];\n\n    if (metaArgs) {\n      // we need to take into account parent metadata\n      if (this.metaArgs.inherit) {\n        results.splice(\n          0,\n          0,\n          ...MetaClass.get(this.metaArgs.inherit).findProxies(metaArgs)\n        );\n      }\n\n      const local = this.proxyTo.map(proxy => {\n        if (metaArgs.hasOwnProperty(proxy.containerKey)) {\n          const myMetaArgs = isFunction(proxy.before)\n            ? proxy.before(metaArgs[proxy.containerKey])\n            : metaArgs[proxy.containerKey];\n\n          delete metaArgs[proxy.containerKey];\n\n          return proxy.forEach === true && Array.isArray(myMetaArgs)\n            ? { meta: proxy.metaClass, args: myMetaArgs }\n            : { meta: proxy.metaClass, args: [myMetaArgs] };\n        }\n      });\n\n      results.splice(results.length, 0, ...local);\n    }\n    return results;\n  }\n\n  /**\n   * A factory for {@link MetaClassMetadata} instances\n   *\n   * > This will create an instance of a metadata class container.\n   * A Metadata container can create instances of the metadata class it \"contains\", thus, the instance\n   * returned from the static `create` method also has a 'create' method however that instance level\n   * `create` method is a factory for instance of the metadata class, not the container.\n   *\n   * @param target\n   * @param metaArgs\n   * @returns\n   */\n  static create<TMetaArgs = any, TMetaClass = any>(\n    target: MetadataClassStatic<TMetaArgs, TMetaClass>,\n    metaArgs?: MetaClassMetadataArgs<TMetaArgs, TMetaClass>\n  ): MetaClassMetadata<TMetaArgs, TMetaClass> {\n    return new MetaClassMetadata<TMetaArgs, TMetaClass>(target, metaArgs);\n  }\n}\n\nexport function getMetaClass<TMetaArgs = any, TMetaClass = any>(\n  target: MetadataClassStatic<TMetaArgs, TMetaClass>\n): MetaClassMetadata<TMetaArgs, TMetaClass> {\n  return store.get(target);\n}\n\nexport function MetaClass<TMetaArgs, TMetaClass = any, Z = any>(\n  metaArgs?: MetaClassMetadataArgs<TMetaArgs, TMetaClass>\n) {\n  return (\n    target: Z & MetadataClassStatic<TMetaArgs, TMetaClass>\n  ): Z & MetadataClassStatic<TMetaArgs, TMetaClass> | void => {\n    store.set(target, MetaClassMetadata.create(target, metaArgs));\n  };\n}\n\n// tslint:disable-next-line:no-namespace\nexport namespace MetaClass {\n  /**\n   * Creates a metadata class instance.\n   * This is a shortcut for `MetaClass.get(MyMetadataClass).create(...);\n   * @param metaClass\n   * @param metaArgs\n   * @param target\n   * @param key\n   * @param desc\n   */\n  export function create<TMetaArgs, TMetaClass, Z>(\n    metaClass: Z & MetadataClassStatic<TMetaArgs, TMetaClass>,\n    metaArgs: TMetaArgs,\n    target: Object | Function,\n    key?: TdmPropertyKey,\n    desc?: PropertyDescriptor | number\n  ): TMetaClass {\n    return store.get(metaClass).create(metaArgs, target, key, desc);\n  }\n\n  export function decorator<TMetaArgs, TMetaClass, Z>(\n    metaClass: Z & MetadataClassStatic<TMetaArgs, TMetaClass>,\n    type: 'class'\n  ): (def: TMetaArgs) => ClassDecorator;\n  export function decorator<TMetaArgs, TMetaClass, Z>(\n    metaClass: Z & MetadataClassStatic<TMetaArgs, TMetaClass>,\n    type: 'param'\n  ): (def: TMetaArgs) => ParameterDecorator;\n  export function decorator<TMetaArgs, TMetaClass, Z>(\n    metaClass: Z & MetadataClassStatic<TMetaArgs, TMetaClass>,\n    type: 'prop'\n  ): (def: TMetaArgs) => PropertyDecorator;\n  export function decorator<TMetaArgs, TMetaClass, Z>(\n    metaClass: Z & MetadataClassStatic<TMetaArgs, TMetaClass>,\n    type: 'method'\n  ): (def: TMetaArgs) => MethodDecorator;\n  export function decorator<TMetaArgs, TMetaClass, Z>(\n    metaClass: Z & MetadataClassStatic<TMetaArgs, TMetaClass>,\n    type: 'propMethod'\n  ): (def: TMetaArgs) => PropertyDecorator | MethodDecorator;\n  export function decorator<TMetaArgs, TMetaClass, Z>(\n    metaClass: Z & MetadataClassStatic<TMetaArgs, TMetaClass>,\n    type: 'classPropMethod'\n  ): (def: TMetaArgs) => ClassDecorator | PropertyDecorator | MethodDecorator;\n  export function decorator<TMetaArgs, TMetaClass, Z>(\n    metaClass: Z & MetadataClassStatic<TMetaArgs, TMetaClass>\n  ): (\n    def: TMetaArgs\n  ) => (\n    target: Object,\n    propertyKey: string | symbol,\n    descOrIndex?: PropertyDescriptor | number\n  ) => any;\n  export function decorator<TMetaArgs, TMetaClass, Z>(\n    metaClass: Z & MetadataClassStatic<TMetaArgs, TMetaClass>,\n    optional: true,\n    type: 'class'\n  ): (def?: TMetaArgs) => ClassDecorator;\n  export function decorator<TMetaArgs, TMetaClass, Z>(\n    metaClass: Z & MetadataClassStatic<TMetaArgs, TMetaClass>,\n    optional: true,\n    type: 'param'\n  ): (def?: TMetaArgs) => ParameterDecorator;\n  export function decorator<TMetaArgs, TMetaClass, Z>(\n    metaClass: Z & MetadataClassStatic<TMetaArgs, TMetaClass>,\n    optional: true,\n    type: 'prop'\n  ): (def?: TMetaArgs) => PropertyDecorator;\n  export function decorator<TMetaArgs, TMetaClass, Z>(\n    metaClass: Z & MetadataClassStatic<TMetaArgs, TMetaClass>,\n    optional: true,\n    type: 'method'\n  ): (def?: TMetaArgs) => MethodDecorator;\n  export function decorator<TMetaArgs, TMetaClass, Z>(\n    metaClass: Z & MetadataClassStatic<TMetaArgs, TMetaClass>,\n    optional: true,\n    type: 'propMethod'\n  ): (def?: TMetaArgs) => PropertyDecorator | MethodDecorator;\n  export function decorator<TMetaArgs, TMetaClass, Z>(\n    metaClass: Z & MetadataClassStatic<TMetaArgs, TMetaClass>,\n    optional: true,\n    type: 'classPropMethod'\n  ): (def?: TMetaArgs) => ClassDecorator | PropertyDecorator | MethodDecorator;\n  export function decorator<TMetaArgs, TMetaClass, Z>(\n    metaClass: Z & MetadataClassStatic<TMetaArgs, TMetaClass>,\n    optional: true\n  ): (\n    def?: TMetaArgs\n  ) => (\n    target: Object,\n    propertyKey: string | symbol,\n    descOrIndex?: PropertyDescriptor | number\n  ) => any;\n  export function decorator<TMetaArgs, TMetaClass, Z>(\n    metaClass: Z & MetadataClassStatic<TMetaArgs, TMetaClass>,\n    ...args: any[]\n  ): any {\n    return <any>store.get(metaClass).createDecorator();\n  }\n\n  export function defaultRegistrator(\n    fn: (meta: MetaClassInstanceDetails<any, any>) => void\n  ): void {\n    MetaClassMetadata.prototype['register'] = fn;\n  }\n}\n","import { isFunction, isNumber, isStaticDecorator } from '../utils';\nimport {\n  DecoratorInfo,\n  MetaClassRegisterHelpers,\n  MetaClassExtendHelpers,\n  RegisterFn,\n  ExtendFn\n} from './types';\n\nexport function decoratorInfo(...args: any[]): DecoratorInfo {\n  if (isFunction(args[0]) && !args[1]) {\n    // target is function and key is not set\n    return { type: 'class' };\n  } else {\n    const type = args.length === 3 && isNumber(args[2]) ? 'param' : 'member';\n    const result: DecoratorInfo = {\n      type,\n      name: args[1],\n      isStatic: isStaticDecorator(args[0]),\n      hasDescriptor: args.length === 3 && type === 'member'\n    };\n    if (type === 'param') {\n      result.paramIndex = args[2];\n    }\n    return result;\n  }\n}\n\nexport const registerHelpers: MetaClassRegisterHelpers = <any>{};\nexport const extendHelpers: MetaClassExtendHelpers = <any>{};\n\nexport function setMetaHelper(\n  type: 'register',\n  name: keyof MetaClassRegisterHelpers,\n  helperFn: RegisterFn\n): void;\nexport function setMetaHelper(\n  type: 'extend',\n  name: keyof MetaClassExtendHelpers,\n  helperFn: ExtendFn\n): void;\nexport function setMetaHelper(\n  type: 'register' | 'extend',\n  name: any,\n  helperFn: any\n): void {\n  switch (type) {\n    case 'extend':\n      extendHelpers[name] = helperFn;\n      break;\n    case 'register':\n      registerHelpers[name] = helperFn;\n      break;\n    default:\n      break;\n  }\n}\n","import { isString, isFunction } from './utils';\nimport {\n  PropAliasConfig,\n  PropTransformConfig,\n  TransformFn\n} from './interfaces';\n\nexport function propAliasConfig(\n  from: string | Partial<PropAliasConfig>,\n  fallback: string\n): PropAliasConfig {\n  let incoming: string, outgoing: string;\n\n  if (!from) {\n    incoming = outgoing = fallback;\n  } else if (isString(from)) {\n    incoming = outgoing = from;\n  } else {\n    incoming = from.incoming || fallback;\n    outgoing = from.outgoing || fallback;\n  }\n\n  return { incoming, outgoing };\n}\n\nexport function propTransformConfig(\n  from: TransformFn | Partial<PropTransformConfig>\n): PropTransformConfig {\n  let incoming: TransformFn, outgoing: TransformFn;\n\n  if (isFunction(from)) {\n    incoming = outgoing = from;\n  } else if (from) {\n    if (isFunction(from.incoming)) {\n      incoming = from.incoming;\n    }\n    if (isFunction(from.outgoing)) {\n      outgoing = from.outgoing;\n    }\n  }\n\n  return { incoming, outgoing };\n}\n","const emptyIterator = {\n  next() {\n    return { value: null, done: true };\n  },\n  [Symbol.iterator]() {\n    return emptyIterator;\n  }\n};\n\n// TODO: move to separate package along with other utils on @tdm/core\n\n/**\n * A dual map, key->key->value\n */\nexport class DualKeyMap<K, K1, V> {\n  protected map = new Map<K, Map<K1, V>>();\n\n  readonly [Symbol.toStringTag]: 'Map' = 'Map';\n\n  has(type: K): boolean;\n  has(type: K, id: K1): boolean;\n  has(type: K, id?: K1): boolean {\n    if (id === undefined) {\n      return this.map.has(type);\n    } else {\n      const t = this.map.get(type);\n      return t ? t.has(id) : false;\n    }\n  }\n\n  get(type: K): Map<K1, V> | undefined;\n  get(type: K, id: K1): V | undefined;\n  get(type: K, id?: K1): Map<K1, V> | V | undefined {\n    const t = this.map.get(type);\n    return id === undefined ? t : t && t.get(id);\n  }\n\n  delete(type: K): boolean;\n  delete(type: K, id: K1): boolean;\n  delete(type: K, id?: K1): boolean {\n    if (id === undefined) {\n      return this.map.delete(type);\n    } else {\n      const t = this.map.get(type);\n      return !(t && t.delete(id));\n    }\n  }\n\n  set(type: K, map: Map<K1, V>): void;\n  set(type: K, id: K1, value: V): void;\n  set(type: K, idOrMap: K1 | Map<K1, V>, value?: V): void {\n    if (idOrMap instanceof Map) {\n      if (arguments.length === 2) {\n        this.map.set(type, idOrMap);\n      }\n    } else {\n      const t = this.map.get(type) || new Map<K1, V>();\n      t.set(idOrMap, value);\n      this.map.set(type, t);\n    }\n  }\n\n  clear(): void;\n  clear(type: K): void;\n  clear(type?: K): void {\n    if (type === undefined) {\n      this.map.clear();\n    }\n    {\n      const t = this.map.get(type);\n      t && t.clear();\n    }\n  }\n\n  /**\n   * Perform for each on the top-level map.\n   * NOTE: The first parameter must be the boolean true.\n   * @param callbackfn\n   * @param thisArg\n   */\n  forEach(\n    root: true,\n    callbackfn: (value: Map<K1, V>, index: K, map: Map<K1, Map<K1, V>>) => void,\n    thisArg?: any\n  ): void;\n  /**\n   * Perform for each on the 2nd level map\n   * if not, it will\n   * @param callbackfn\n   * @param thisArg\n   */\n  forEach(\n    callbackfn: (value: V, index: K1, map: Map<K1, V>) => void,\n    type: K,\n    thisArg?: any\n  ): void;\n  forEach(\n    callbackfn: true | ((value: V, index: K1, map: Map<K1, V>) => void),\n    type: K | ((value: Map<K1, V>, index: K, map: Map<K1, Map<K1, V>>) => void),\n    thisArg?: any\n  ): void {\n    if (callbackfn === true) {\n      this.map.forEach(type as any, thisArg);\n    } else {\n      const t = this.map.get(type as any);\n      t && t.forEach(callbackfn as any, thisArg);\n    }\n  }\n\n  entries(): IterableIterator<[K, Map<K1, V>]>;\n  entries(type: K): IterableIterator<[K1, V]>;\n  entries(\n    type?: K\n  ): IterableIterator<[K, Map<K1, V>]> | IterableIterator<[K1, V]> {\n    if (type === undefined) {\n      return this.map.entries();\n    } else {\n      const t = this.map.get(type as any);\n      return t ? t.entries() : this.makeEmptyIterator();\n    }\n  }\n\n  keys(): IterableIterator<K>;\n  keys(type: K): IterableIterator<K1>;\n  keys(type?: K): IterableIterator<K> | IterableIterator<K1> {\n    if (type === undefined) {\n      return this.map.keys();\n    } else {\n      const t = this.map.get(type as any);\n      return t ? t.keys() : this.makeEmptyIterator();\n    }\n  }\n\n  values(): IterableIterator<Map<K1, V>>;\n  values(type: K): IterableIterator<V>;\n  values(type?: K): IterableIterator<Map<K1, V>> | IterableIterator<V> {\n    if (type === undefined) {\n      return this.map.values();\n    } else {\n      const t = this.map.get(type as any);\n      return t ? t.values() : this.makeEmptyIterator();\n    }\n  }\n\n  get size(): number {\n    return this.map.size;\n  }\n\n  sizeOf(type: K): number {\n    const t = this.map.get(type);\n    return t ? t.size : 0;\n  }\n\n  private makeEmptyIterator(): IterableIterator<any> {\n    return emptyIterator;\n  }\n\n  [Symbol.iterator](): IterableIterator<[K, Map<K1, V>]> {\n    return this.map[Symbol.iterator]();\n  }\n}\n\n/**\n * The child of Map and Set\n */\nexport class KeySet<K, V> {\n  map = new Map<K, Set<V>>();\n\n  has(key: K, value: V): boolean;\n  has(key: K): boolean;\n  has(key: K, value?: V): boolean {\n    if (arguments.length === 1) {\n      return this.map.has(key);\n    } else {\n      const t = this.map.get(key);\n      return t ? t.has(value) : false;\n    }\n  }\n\n  get(key: K, index: number): V | undefined;\n  get(key: K): Set<V> | undefined;\n  get(key: K, index?: number): Set<V> | V | undefined {\n    if (arguments.length === 1) {\n      return this.map.get(key);\n    } else {\n      const set = this.map.get(key);\n      if (set) {\n        return SetExt.index(set, index);\n      }\n    }\n  }\n\n  /**\n   * Set's the Set for a key.\n   * @param key\n   * @param set An optional set, if not supplied a new Set is created.\n   */\n  set(key: K, set?: Set<V>): Set<V> {\n    if (!set) {\n      set = new Set<V>();\n    }\n    this.map.set(key, set);\n    return set;\n  }\n\n  add(key: K, value: V): this {\n    const t = this.map.get(key) || new Set<V>();\n    t.add(value);\n    this.map.set(key, t);\n    return this;\n  }\n\n  clear(key?: K): void {\n    if (!key) {\n      this.map.clear();\n    } else {\n      const t = this.map.get(key);\n      t && t.clear();\n    }\n  }\n\n  delete(key: K, value?: V): boolean {\n    if (arguments.length === 1) {\n      return this.delete(key);\n    } else {\n      const t = this.map.get(key);\n      return t ? t.delete(value) : false;\n    }\n  }\n\n  forEach(\n    key: K,\n    callbackfn: (value: V, index: V, set: Set<V>) => void,\n    thisArg?: any\n  ): void {\n    const t = this.map.get(key);\n    if (t) {\n      t.forEach(callbackfn, thisArg);\n    }\n  }\n\n  /**\n   * Returns the amount of map entries\n   */\n  get size(): number {\n    return this.map.size;\n  }\n\n  sizeOf(key: K): number {\n    const t = this.map.get(key);\n    return t ? t.size : 0;\n  }\n}\n\nexport class SetExt<T> extends Set<T> {\n  first(): T | undefined {\n    return SetExt.first(this);\n  }\n\n  index(index: number): T | undefined {\n    return SetExt.index(this, index);\n  }\n\n  asArray(): Array<T> {\n    return SetExt.asArray(this);\n  }\n\n  isSuperset(subset: Set<any>): boolean {\n    return SetExt.isSuperset(this, subset);\n  }\n\n  /**\n   * Combine all of the sources\n   * @param source\n   * returns the target\n   */\n  combine(...source: Array<Set<T>>): void;\n  combine(...source: Array<Array<T>>): void;\n  combine(...source: Array<any>): void {\n    SetExt.combine(this, ...source);\n  }\n\n  /**\n   * Deduct all of the sources\n   * @param source\n   * returns the target\n   */\n  deduct(...source: Array<Set<T>>): void {\n    SetExt.deduct(this, ...source);\n  }\n\n  union(...source: Array<Set<T>>): SetExt<T> {\n    return SetExt.union(SetExt as any, this as any, ...source);\n  }\n\n  /**\n   * Returns all the items that were in this set and the supplied set.\n   * @param setA\n   * @param setB\n   * @param initSetExt\n   */\n  intersection(set: Set<T>): SetExt<T> {\n    return SetExt.intersection(this, set as any, true);\n  }\n\n  /**\n   * Returns all the items that are in this set, but not in the target set.\n   * Returns a new SetExt instance.\n   * @param set\n   * @returns\n   */\n  difference(set: Set<T>): SetExt<T> {\n    return SetExt.difference(this, set as any, true);\n  }\n\n  /**\n   * Returns all the items that were not in this set and the supplied set.\n   * Returns a new SetExt instance.\n   * @param set\n   * @returns\n   */\n  negative(set: Set<T>): SetExt<T> {\n    return SetExt.negative(this, set as any, true);\n  }\n\n  static first<T>(set: Set<T>): T | undefined {\n    return set.values().next().value;\n  }\n\n  static index<T>(set: Set<T>, index: number): T | undefined {\n    const iterator = set.values();\n\n    for (let i = 0; i < index; i++) {\n      if (iterator.next().done) {\n        return undefined;\n      }\n    }\n\n    return iterator.next().value;\n  }\n\n  static asArray<T>(set: Set<T>): Array<T> {\n    return Array.from(set);\n  }\n\n  static isSuperset(set: Set<any>, subset: Set<any>): boolean {\n    return !SetExt.asArray(subset).some(v => !set.has(v));\n  }\n\n  /**\n   * Combine all of the sources into the target.\n   * @param target\n   * @param source\n   * returns the target\n   */\n  static combine<T>(target: Set<T>, ...source: Array<Set<T>>): Set<T>;\n  static combine<T>(target: Set<T>, ...source: Array<Array<T>>): Set<T>;\n  static combine<T>(target: Set<T>, ...source: Array<any>): Set<T> {\n    for (let i = 0, len = source.length; i < len; i++) {\n      const arr = Array.isArray(source[i])\n        ? source[i]\n        : SetExt.asArray(source[i]);\n      for (let z = 0, lenZ = arr.length; z < lenZ; z++) {\n        if (!target.has(arr[z])) {\n          target.add(arr[z]);\n        }\n      }\n    }\n    return target;\n  }\n\n  /**\n   * Deduct all of the sources from the target.\n   * @param target\n   * @param source\n   * returns the target\n   */\n  static deduct<T>(target: Set<T>, ...source: Set<T>[]): Set<T> {\n    for (let i = 0, len = source.length; i < len; i++) {\n      const arr = SetExt.asArray(source[i]);\n      for (let z = 0, lenZ = arr.length; z < lenZ; z++) {\n        target.delete(arr[z]);\n      }\n    }\n    return target;\n  }\n\n  static union<T extends Set<any>>(...source: T[]): T {\n    const union: any =\n      typeof source[0] === 'function'\n        ? new (source.shift() as any)()\n        : new Set<any>();\n    SetExt.combine(union, ...source);\n    return union;\n  }\n\n  /**\n   * Returns all the items that were in both sets.\n   * @param setA\n   * @param setB\n   * @param initSetExt\n   */\n  static intersection<T extends Set<any>>(\n    setA: T,\n    setB: T,\n    initSetExt?: boolean\n  ): T {\n    const intersection = initSetExt ? new SetExt<any>() : new Set<any>();\n\n    const arr = SetExt.asArray(setB);\n    for (let z = 0, lenZ = arr.length; z < lenZ; z++) {\n      if (setA.has(arr[z])) {\n        intersection.add(arr[z]);\n      }\n    }\n    return intersection as any;\n  }\n\n  /**\n   * Returns all the items that are in source set, but not in the target set.\n   * @param source\n   * @param target\n   * @param initSetExt\n   * @returns\n   */\n  static difference<T extends Set<any>>(\n    source: T,\n    target: T,\n    initSetExt?: boolean\n  ): T {\n    const difference = initSetExt\n      ? new SetExt<any>(source)\n      : new Set<any>(source);\n\n    const arr = SetExt.asArray(target);\n    for (let z = 0, lenZ = arr.length; z < lenZ; z++) {\n      difference.delete(arr[z]);\n    }\n    return difference as any;\n  }\n\n  /**\n   * Returns all the items that were not in both sets.\n   * @param source\n   * @param target\n   * @param initSetExt\n   * @returns\n   */\n  static negative<T extends Set<any>>(\n    source: T,\n    target: T,\n    initSetExt?: boolean\n  ): T {\n    const negative = initSetExt\n      ? new SetExt<any>(source)\n      : new Set<any>(source);\n\n    const arr = SetExt.asArray(target);\n    for (let z = 0, lenZ = arr.length; z < lenZ; z++) {\n      if (negative.has(arr[z])) {\n        negative.delete(arr[z]);\n      } else {\n        negative.add(arr[z]);\n      }\n    }\n    return negative as any;\n  }\n}\n\nexport class MapExt {\n  /**\n   * Merge source map into target map.\n   * @param target\n   * @param source\n   * @param diffOnly if true will only merge keys from source that does not exist on target.\n   */\n  static mergeInto<K, V>(\n    target: Map<K, V>,\n    source: Map<K, V>,\n    diffOnly?: boolean\n  ): Map<K, V> {\n    const arr = MapExt.asKeyArray(source);\n    for (let i = 0, len = arr.length; i < len; i++) {\n      if (!diffOnly || !target.has(arr[i])) {\n        target.set(arr[i], source.get(arr[i]));\n      }\n    }\n    return target;\n  }\n\n  /**\n   * Set the values of an array into a map\n   * @param arr\n   * @param keySelector A function returning the key to be used in the map\n   * @param map The map to set on, optional. If not set a new map is created.\n   * @param diffOnly Set only new values, optional. Valid only if a map is supplied.\n   * @returns\n   */\n  static fromArray<K, V>(\n    arr: Array<V>,\n    keySelector: (value: V) => K,\n    map?: Map<K, V>,\n    diffOnly?: boolean\n  ): Map<K, V> {\n    if (!(map instanceof Map)) {\n      map = new Map<K, V>();\n      diffOnly = false;\n    }\n\n    for (let i = 0, len = arr.length; i < len; i++) {\n      const key = keySelector(arr[i]);\n      if (!diffOnly || !map.has(key)) {\n        map.set(key, arr[i]);\n      }\n    }\n\n    return map;\n  }\n\n  static asKeyValArray<K, V>(map: Map<K, V>): Array<[K, V]> {\n    return Array.from(map.entries());\n  }\n\n  static asKeyArray<K, V>(map: Map<K, V>): Array<K> {\n    return Array.from(map.keys());\n  }\n\n  static asValArray<K, V>(map: Map<K, V>): Array<V> {\n    return Array.from(map.values());\n  }\n\n  static asObjectLiteral<K, V>(map: Map<K, V>): { [key: string]: V } {\n    return MapExt.asKeyArray(map).reduce((prev, curr) => {\n      prev[curr.toString()] = map.get(curr);\n      return prev;\n    }, {});\n  }\n}\n","export type Constructor<T> = new (...args: any[]) => T;\n\nexport function isNumber(obj: any): obj is number {\n  return typeof obj === 'number';\n}\n\nexport function isString(obj: any): obj is string {\n  return typeof obj === 'string';\n}\n\nexport function isFunction(obj: any): obj is Function {\n  return typeof obj === 'function';\n}\n\nexport function isStaticDecorator(target: any): boolean {\n  return isFunction(target);\n}\n\nconst undef = undefined;\nexport function isUndefined(obj: any): obj is undefined {\n  return obj === undef;\n}\n\nexport function ensureTargetIsType(type: any): any {\n  return isFunction(type) ? type : type.constructor;\n}\n\nexport function isJsObject(obj: any): boolean {\n  return obj !== null && (typeof obj === 'function' || typeof obj === 'object');\n}\nexport function isPrimitive(obj: any): boolean {\n  return !isJsObject(obj);\n}\n\n/**\n * See https://github.com/angular/angular/blob/2.0.0-rc.4/modules/%40angular/facade/src/lang.ts#L149\n * @param token\n * @returns\n */\nexport function stringify(token: any): string {\n  if (typeof token === 'string') {\n    return token;\n  }\n\n  if (token === undefined || token === null) {\n    return '' + token;\n  }\n\n  if (token.name) {\n    return token.name;\n  }\n  if (token.overriddenName) {\n    return token.overriddenName;\n  }\n\n  const res = token.toString();\n  const newLineIndex = res.indexOf('\\n');\n  return newLineIndex === -1 ? res : res.substring(0, newLineIndex);\n}\n\nexport const reflection = {\n  designType(target: any, key: string | symbol): any {\n    return (Reflect as any).getMetadata('design:type', target, key);\n  },\n  paramTypes(target: any, key: string | symbol) {\n    return (Reflect as any).getMetadata('design:paramtypes', target, key);\n  }\n};\n\nexport function LazyInit(getter: Function): PropertyDecorator {\n  return (\n    target: Object,\n    propertyKey: string | symbol,\n    descriptor?: PropertyDescriptor\n  ) => {\n    if (descriptor) {\n      throw new Error('LazyInit can only decorate properties');\n    }\n    Object.defineProperty(target, propertyKey, {\n      get() {\n        const ret = getter.call(this);\n\n        Object.defineProperty(this, propertyKey, { value: ret });\n        return ret;\n      }\n    });\n  };\n}\n\n/**\n * @pluginApi\n */\nexport const array = (function() {\n  const findRemove = <T>(\n    arr: T[],\n    predicate: (value: T) => boolean,\n    thisArg?: any\n  ): T | undefined => {\n    const idx = arr.findIndex(predicate, thisArg);\n    if (idx > -1) {\n      return arr.splice(idx, 1)[0];\n    }\n  };\n\n  return { findRemove };\n})();\n\n/**\n * Returns the chain of prototypes up to Object (not included)\n * @pluginApi\n * @param cls\n */\nexport function getProtoChain(cls: Constructor<any>): Array<Constructor<any>> {\n  const classes = [];\n  while (cls && cls !== Object) {\n    classes.push(cls);\n\n    const proto = Object.getPrototypeOf(cls.prototype);\n    cls = isFunction(proto) || !proto ? proto : proto.constructor;\n  }\n  return classes;\n}\n\nexport function getBaseClass(cls: Constructor<any>): Constructor<any> | void {\n  const proto = Object.getPrototypeOf(cls.prototype);\n  return !proto || isFunction(proto) ? proto : proto.constructor;\n}\n","import { isPrimitive, DualKeyMap } from '../../fw';\nimport { PropMetadata, targetStore } from '../../metadata';\nimport { MapperFactory, DeserializeMapper, SerializeMapper } from '../mapper';\nimport {\n  PropertyContainer,\n  PoClassPropertyMap,\n  transformValueOut\n} from '../prop-container';\nimport { PlainObjectMapper } from '../plain-object-mapper';\n\n/**\n * A mapper that has no mapping effect.\n * Maps every property on the source to the same property on the target.\n * This mapper does not support non primitive id's\n */\nexport class DirectDeserializeMapper extends DeserializeMapper {\n  setRef(value: any): void {\n    if (this.current) {\n      this.existing.set(this.sourceType, this.getIdentity(), value);\n    }\n  }\n\n  readonly isCollection: boolean;\n\n  protected existing: DualKeyMap<any, string, any>;\n  protected get ref(): any | undefined {\n    if (this.current) {\n      return this.existing.get(this.sourceType, this.getIdentity());\n    }\n  }\n\n  protected current: any;\n  protected identity: string;\n  private idx: number = -1;\n\n  constructor(source: any, sourceType: any, plainMapper?: PlainObjectMapper) {\n    super(source, sourceType, plainMapper);\n\n    if (!(this instanceof DirectChildDeserializeMapper)) {\n      this.existing = new DualKeyMap<any, string, any>();\n    }\n\n    this.identity = targetStore.getIdentityKey(this.sourceType, 'outgoing');\n\n    this.isCollection = Array.isArray(source);\n    if (!this.isCollection) {\n      this.current = this.source;\n    }\n  }\n\n  getIdentity(): string {\n    // TODO: Move to the global store, so logic can change without bugs.\n    return this.current[this.identity];\n  }\n\n  next(): boolean {\n    if (this.isCollection) {\n      this.current = this.source[++this.idx];\n      return !!this.current;\n    } else {\n      return false;\n    }\n  }\n\n  getKeys(): string[] {\n    return Object.keys(this.current);\n  }\n\n  getValue(key: string, prop?: PropMetadata): any {\n    let value = this.current[key];\n\n    if (prop) {\n      // The adapter has the responsibility to manage relationships.\n      // It doesn't care about key matching (e.g. key in property customer_id but property is customer)\n      // it get's a value and the property to assign to, the adapter should check if the value it got\n      // was an id or an object.\n\n      // this relationship handling logic makes this whole adapter support only primitive ID properties.\n      // if we have primitives we treat them as id's and create an object.\n      // later we wil check if this value is in cache, if not create it.\n      // if its not a primitive, it will process as a full object included in the payload.\n      const rel = this.getRelationQuery(prop, value);\n      if (rel) {\n        value = rel;\n      }\n\n      if (targetStore.hasTarget(prop.type.ref)) {\n        return (\n          this.getCache(prop.type.ref, value) || this.deserialize(value, prop)\n        );\n      }\n    }\n\n    return typeof value === 'object'\n      ? this.plainMapper.deserialize(value)\n      : value;\n  }\n\n  protected deserialize(value: any, prop: PropMetadata): any {\n    const mapper = this.ref\n      ? new DirectChildDeserializeMapper(\n          value,\n          prop.type.ref,\n          this.existing,\n          this.plainMapper\n        )\n      : directMapper.deserializer(value, prop.type.ref, this.plainMapper); // tslint:disable-line\n\n    return targetStore.deserialize(mapper);\n  }\n\n  /**\n   *  Returns a relationship object with the identity property set.\n   *  This object can then be used by the cache to identify if a value is cached or not (using the type & identity comb)\n   */\n  protected getRelationQuery(prop: PropMetadata, value: any): any {\n    if (prop.relation && isPrimitive(value)) {\n      return {\n        [targetStore.getIdentityKey(prop.type.ref as any, 'outgoing')]: value\n      };\n    }\n  }\n\n  protected getCache(type: any, value: any): any | undefined {\n    const idKey = targetStore.getIdentityKey(type, 'outgoing');\n    const idVal = idKey && value[idKey];\n    if (idVal) {\n      return this.existing.get(type, idVal);\n    }\n  }\n}\n\n// tslint:disable-next-line\nexport class DirectChildDeserializeMapper extends DirectDeserializeMapper {\n  constructor(\n    source: any,\n    sourceType: any,\n    protected existing: DualKeyMap<any, string, any>,\n    plainMapper: PlainObjectMapper\n  ) {\n    super(source, sourceType, plainMapper);\n  }\n}\n\n// tslint:disable-next-line\nexport class DirectSerializeMapper extends SerializeMapper {\n  protected cache: Map<any, any>;\n\n  serialize(container: PropertyContainer): any {\n    if (!this.cache) {\n      this.cache = new Map<any, any>();\n    }\n\n    if (Array.isArray(this.source)) {\n      return this.serializeCollection(this.source, container);\n    } else {\n      return this.serializeObject(this.source, container);\n    }\n  }\n\n  private serializeObject(obj: any, container: PropertyContainer): any {\n    const data: any = {};\n\n    const cb = (pMap: PoClassPropertyMap) => {\n      const p = pMap.prop;\n      if (p && targetStore.hasTarget(p.type.ref)) {\n        const type: any = p.type.ref;\n        if (p.relation && !p.type.isArray) {\n          const idKey = targetStore.getIdentityKey(type);\n          // if the rel points to a different fk property name, @tdm will make sure prop.obj is that fk.\n          data[pMap.obj] = obj[pMap.cls][idKey];\n        } else {\n          data[pMap.obj] = targetStore.serialize(\n            type,\n            new DirectChildSerializeMapper(\n              obj[pMap.cls],\n              this.cache,\n              this.plainMapper\n            )\n          );\n        }\n      } else {\n        const newVal = this.plainMapper.serialize(\n          transformValueOut(obj[pMap.cls], p)\n        );\n        data[pMap.obj] = newVal;\n      }\n    };\n\n    container.forEach(Object.keys(obj), cb);\n\n    const idKey = targetStore.getIdentityKey(container.target);\n    if (idKey !== targetStore.getIdentityKey(container.target, 'outgoing')) {\n      delete data[idKey];\n    }\n\n    return data;\n  }\n\n  private serializeCollection(arr: any[], container: PropertyContainer): any[] {\n    return arr.map(s => this.serializeObject(s, container));\n  }\n}\n\n// tslint:disable-next-line\nexport class DirectChildSerializeMapper extends DirectSerializeMapper {\n  constructor(\n    source: any,\n    protected cache: Map<any, any>,\n    plainMapper: PlainObjectMapper\n  ) {\n    super(source, plainMapper);\n  }\n}\n\nexport const directMapper: MapperFactory = {\n  serializer(\n    source: any,\n    plainMapper?: PlainObjectMapper\n  ): DirectSerializeMapper {\n    return new DirectSerializeMapper(source, plainMapper);\n  },\n  deserializer(\n    source: any,\n    sourceType: any,\n    plainMapper?: PlainObjectMapper\n  ): DirectDeserializeMapper {\n    return new DirectDeserializeMapper(source, sourceType, plainMapper);\n  }\n};\n","export class TransformationError extends Error {\n  constructor(message?: string) {\n    super(message);\n  }\n\n  static coll_obj(expectedCol: boolean): TransformationError {\n    return new TransformationError(\n      expectedCol\n        ? `Expected a collection but got an object`\n        : `Expected an object but got a collection`\n    );\n  }\n}\n","export * from './errors';\nexport * from './prop-container';\nexport * from './mapper';\nexport { PlainObjectMapper } from './plain-object-mapper';\nexport {\n  directMapper,\n  DirectSerializeMapper,\n  DirectDeserializeMapper\n} from './direct-mapper/direct-mapper';\n","import { PropertyContainer } from './prop-container';\nimport { PropMetadata } from '../metadata';\nimport { PlainObjectMapper } from './plain-object-mapper';\n\nexport interface MapperFactory {\n  serializer(source: any, plainMapper?: PlainObjectMapper): SerializeMapper;\n  deserializer(\n    source: any,\n    sourceType: any,\n    plainMapper?: PlainObjectMapper\n  ): DeserializeMapper;\n}\n\n/**\n * Represents the contract a Serializer needs to implements.\n * A Serializer should handle both a collection and a single item and should be able to identify them.\n *\n * Since Serialization transforms a KNOWN document to an UNKNOWN document the serializer is gets\n * free control over the output.\n * The library provides the instance and a container of property metadata for the instance and the\n * serializer should do the rest.\n *\n * Since the output schema is now known to the library the whole process is managed by the serializer.\n * The library helps with metadata.\n */\nexport abstract class SerializeMapper {\n  protected plainMapper: PlainObjectMapper;\n\n  constructor(public source: any | any[], plainMapper?: PlainObjectMapper) {\n    this.plainMapper = plainMapper || new PlainObjectMapper();\n  }\n\n  abstract serialize(container: PropertyContainer): any;\n}\n\n/**\n * Represents the contract a Deserializer needs to implements.\n * A Deserializer should handle both a collection and a single item and should be able to identify them.\n *\n * Since deserialization transforms UNKNOWN document to a KNOWN document the deserializer must implement\n * a specific interface so the library can normalize an unknown document into a known one.\n *\n * If a collection is found the deserializer move to an iteration mode via the next() method.\n * In a collection, the cursor must not point on an item until the first call to next().\n * In a single item next() is never used so the cursor must point to the item provided.\n *\n * The deserialization process:\n *   - Initialize the item (constructor) and identify the type (collection/single)\n *   - Find and return the keys for the current item (getKeys() done for each item)\n *   - Get the value for a given key\n *\n *\n * The Deserializer is responsible for deserializing the whole document, including nested items and\n * related items. It is therefor recommended to keep a cache of generated items if the document is expected to have nested resources.\n * Caching logic can be implemented by implementing the `setRef()` and `getIdentity()` methods and\n * using a child deserializer class or a count flag.\n *\n * > See `directMapper` and `@tdm/json-api-mapper` for implementation example.\n *\n */\nexport abstract class DeserializeMapper {\n  /**\n   * Optional, if set will be used to get the identity value.\n   * If the identity is part of the properties it will be sent through getValue(), but if not this\n   * function should be implemented. e.g. JSON API has an ID that is not part of the object attributes.\n   */\n  getIdentity?(): any;\n\n  /**\n   * Optional, if set will be used to inject a reference object to identify resources.\n   * If a mapper handles a cyclic document where resources reference other resources within the same\n   * document (e.g. JSONAPI) the mapper can use this reference along with identifiers on the document/resource\n   * to return objects that it already created.\n   * @param value\n   */\n  setRef?(value: any): void;\n\n  /**\n   * If true will iterate excluded items when calling getValue.\n   * See PropertyContainer.forEachRaw\n   */\n  raw?: boolean;\n\n  protected plainMapper: PlainObjectMapper;\n\n  constructor(\n    public source: any,\n    public sourceType: any,\n    plainMapper?: PlainObjectMapper\n  ) {\n    this.plainMapper = plainMapper || new PlainObjectMapper();\n  }\n\n  /**\n   * A value stating if the input is a collection or not.\n   * The Deserializer is responsible to identify it from the document\n   */\n  abstract readonly isCollection: boolean;\n\n  /**\n   * If a collection, Moves the current item to the next item in the collection and returns true.\n   * If not a collection or if the enumerator is at the end of the collection or the collection is empty, returns false.\n   */\n  abstract next(): boolean;\n\n  /**\n   * Return the keys for the current item, this call is guaranteed to execute once per item.\n   * In the event of a collection and if you are certain that each item in the collection has the same properties\n   * you can implement a cache.\n   *\n   * It is not recommended to alter the keys, key transformation is governed by the library and set\n   * by the definition on the models, i.e. Naming transformation strategy and PropMetadata#alias.\n   */\n  abstract getKeys(): string[];\n\n  /**\n   * Return the value for a given key.\n   *\n   * The keys sent to `getValue()` are not guaranteed to match the keys returned from `getKeys()`.\n   * Some keys might get omitted, some might change and the order might differ.\n   *\n   * A `PropMetadata` object is supplied, if exists.\n   * If the transformation strategy is exclusive a PropMetadata is always supplied otherwise, only for properties that have a @Prop decorator.\n   *\n   * Use the supplied `PropMetadata` to identify relationships, foreign keys, etc...\n   *\n   * @param key\n   * @param prop\n   */\n  abstract getValue(key: string, prop?: PropMetadata): any;\n}\n","const PRIMITIVES = ['boolean', 'string', 'number', 'symbol'];\n\n/**\n * A plain object (POJO/POCO) serializer/deserializer.\n * Extend for custom behaviour.\n */\nexport class PlainObjectMapper {\n  deserialize(obj: any): any {\n    return this._deserialize(obj);\n  }\n\n  serialize(obj: any): any {\n    return this._serialize(obj, new Map<any, any>());\n  }\n\n  protected _deserialize(obj: any): any {\n    return obj;\n  }\n\n  protected _serialize(obj: any, cache: Map<any, any>): any {\n    if (obj === null || obj === undefined) {\n      return null;\n    }\n\n    // we can be passive about resolving primitives, let them fallback if nothing hits...\n    // however, since primitive are used often, it likely that we save checks if we use an active approach.\n    if (PRIMITIVES.indexOf(typeof obj) > -1) {\n      return obj;\n    }\n\n    let cachedVal: any = cache.get(obj);\n\n    if (cachedVal) {\n      return cachedVal;\n    }\n\n    if (Array.isArray(obj)) {\n      cache.set(obj, (cachedVal = []));\n\n      for (let i = 0, len = obj.length; i < len; i++) {\n        cachedVal.push(this._serialize(obj[i], cache));\n      }\n    } else if (obj instanceof Date) {\n      cache.set(obj, (cachedVal = obj.toISOString()));\n    } else if (obj instanceof RegExp) {\n      cache.set(obj, (cachedVal = obj.toString()));\n    } else if (typeof obj === 'object' || typeof obj === 'function') {\n      cache.set(obj, (cachedVal = {}));\n\n      const keys = Object.keys(obj);\n      for (let i = 0, len = keys.length; i < len; i++) {\n        cachedVal[keys[i]] = this._serialize(obj[keys[i]], cache);\n      }\n    } else {\n      // throw here? don't think there's a way to get here\n      cache.set(obj, (cachedVal = obj.toString()));\n    }\n\n    return cachedVal;\n  }\n}\n","import { array } from '../fw';\nimport { ExcludeMetadata, PropMetadata } from '../metadata';\n\n/**\n * Mappings between properties of a plain object to a class\n * @internal\n */\nexport interface PoClassPropertyMap {\n  cls: TdmPropertyKey;\n  obj: string;\n  exclude?: ExcludeMetadata;\n  prop?: PropMetadata;\n}\n\nexport interface CompiledTransformation {\n  /**\n   * Excluded members that doesn't have a @Prop decorator.\n   * All @Exclude instructions on members with @Prop instructions are add to the PoClassPropertyMap\n   */\n  excluded: ExcludeMetadata[];\n  instructions: PoClassPropertyMap[];\n}\n\nexport function transformValueOut(value: any, prop: PropMetadata): any {\n  if (prop && prop.transform && prop.transform.outgoing) {\n    return prop.transform.outgoing(value);\n  }\n  return value;\n}\n\nexport function transformValueIn(value: any, prop: PropMetadata): any {\n  if (prop && prop.transform && prop.transform.incoming) {\n    return prop.transform.incoming(value);\n  }\n  return value;\n}\n\nfunction excludedPredicate(e: ExcludeMetadata) {\n  return e.name === this;\n}\n\nexport interface PropertyContainer {\n  target: any;\n\n  forEach(keys: string[], cb: (pMap: PoClassPropertyMap) => void): void;\n\n  /**\n   * A forEach loop on all instructions including excluded instructions and properties not in \"keys\" but in metadata.\n   * It is recommended to use \"forEach\" unless the mapper implementation has different transformation strategies.\n   * @param keys\n   * @param cb\n   */\n  forEachRaw(keys: string[], cb: (pMap: PoClassPropertyMap) => void): void;\n}\n\nexport class InclusivePropertyContainer implements PropertyContainer {\n  constructor(\n    public target: any,\n    private compiled: CompiledTransformation,\n    private predicate: (p: PoClassPropertyMap) => boolean,\n    private renamer?: (po: PoClassPropertyMap) => string\n  ) {}\n\n  forEach(keys: string[], cb: (pMap: PoClassPropertyMap) => void): void {\n    let len = keys.length;\n\n    const instructions = this.compiled.instructions.slice();\n    const excluded = this.compiled.excluded.slice();\n\n    for (let i = 0; i < len; i++) {\n      let prop: PoClassPropertyMap = array.findRemove(\n        instructions,\n        this.predicate,\n        keys[i]\n      ) || {\n        cls: keys[i],\n        obj: keys[i],\n        exclude: array.findRemove(excluded, excludedPredicate, keys[i])\n      };\n\n      if (!prop.exclude) {\n        // we only transform names for ad-hoc properties. registered @Prop's are transformed\n        // when the prop is compiled.\n        if (!prop.prop && this.renamer) {\n          this.renamer(prop);\n        }\n        cb(prop);\n      }\n    }\n  }\n\n  /**\n   * A forEach loop on all instructions including excluded instructions and properties not in \"keys\" but in metadata.\n   * It is recommended to use \"forEach\" unless the mapper implementation has different transformation strategies.\n   * @param keys\n   * @param cb\n   */\n  forEachRaw(keys: string[], cb: (pMap: PoClassPropertyMap) => void): void {\n    let len = keys.length;\n\n    const instructions = this.compiled.instructions.slice();\n    const excluded = this.compiled.excluded.slice();\n\n    for (let i = 0; i < len; i++) {\n      let prop: PoClassPropertyMap = array.findRemove(\n        instructions,\n        this.predicate,\n        keys[i]\n      ) || {\n        cls: keys[i],\n        obj: keys[i],\n        exclude: array.findRemove(excluded, excludedPredicate, keys[i])\n      };\n\n      // we only transform names for ad-hoc properties. registered @Prop's are transformed\n      // when the prop is compiled.\n      if (!prop.prop && this.renamer) {\n        this.renamer(prop);\n      }\n      cb(prop);\n    }\n\n    len = instructions.length;\n    for (let i = 0; i < len; i++) {\n      let prop: PoClassPropertyMap = instructions[i];\n\n      // we only transform names for ad-hoc properties. registered @Prop's are transformed\n      // when the prop is compiled.\n      if (!prop.prop && this.renamer) {\n        this.renamer(prop);\n      }\n      cb(prop);\n    }\n  }\n}\n\nexport class ExclusivePropertyContainer implements PropertyContainer {\n  constructor(public target: any, private compiled: CompiledTransformation) {}\n\n  forEach(keys: string[], cb: (pMap: PoClassPropertyMap) => void): void {\n    const instructions = this.compiled.instructions;\n    // No need to apply transformNameStrategy, it is cached in the instructions.\n    for (let i = 0, len = instructions.length; i < len; i++) {\n      !instructions[i].exclude && cb(instructions[i]);\n    }\n  }\n\n  /**\n   * A forEach loop on all instructions including excluded instructions and properties not in \"keys\" but in metadata.\n   * It is recommended to use \"forEach\" unless the mapper implementation has different transformation strategies.\n   * @param keys\n   * @param cb\n   */\n  forEachRaw(keys: string[], cb: (pMap: PoClassPropertyMap) => void): void {\n    const instructions = this.compiled.instructions;\n    for (let i = 0, len = instructions.length; i < len; i++) {\n      cb(instructions[i]);\n    }\n  }\n}\n","import {\n  LazyInit,\n  TransformDir,\n  NamingStrategyConfig,\n  isFunction,\n  array\n} from '../fw';\nimport { PropMetadata, ExcludeMetadata, TargetMetadata } from '../metadata';\n\nimport {\n  SerializeMapper,\n  DeserializeMapper,\n  CompiledTransformation,\n  PoClassPropertyMap,\n  PropertyContainer,\n  ExclusivePropertyContainer,\n  InclusivePropertyContainer,\n  transformValueIn\n} from './index';\n\n/**\n * Returns an array of 2 property names, first is the name of the transformed output\n * second is the name of the property name to transform.\n * Used for applying NamingStrategyConfig based on the TransformDir\n * @param dir\n * @param transformNameStrategy\n */\nexport function namingStrategyMap(\n  dir: TransformDir,\n  transformNameStrategy: NamingStrategyConfig\n): boolean {\n  return transformNameStrategy && isFunction(transformNameStrategy[dir]);\n}\n\n/**\n * @internal\n */\nexport function getInstructions<T, Z>(\n  meta: TargetMetadata<T, Z>,\n  dir: TransformDir\n): CompiledTransformation {\n  // all excluded instructions for this type\n  // this array will be filtered to hold only @Exclude without @Prop\n  const excluded = meta\n    .getValues(ExcludeMetadata)\n    .filter(e => !e.from || e.from === dir);\n\n  const model = meta.model();\n\n  // in exclusive mode there is no point in have 2 transformation strategies.\n  // incoming is never there since incoming keys are not calculated, only defined Props.\n  if (model.transformStrategy === 'exclusive') {\n    dir = 'outgoing';\n  }\n\n  // only apply naming strategy on outgoing, incoming has no effect here\n  const naming = namingStrategyMap(dir, model.transformNameStrategy);\n\n  const fkMap = new Map<PropMetadata, PoClassPropertyMap[]>();\n\n  // TODO: move to for loop\n  const instructions = meta.getValues(PropMetadata).map(prop => {\n    const obj = {\n      cls: prop.name,\n      obj: prop.alias[dir],\n      exclude: array.findRemove(excluded, e => e.name === prop.name),\n      prop\n    };\n\n    // apply naming strategy when DONT HAVE ALIAS!\n    if (!obj.exclude && naming && obj.cls === obj.obj) {\n      obj.obj = model.transformNameStrategy[dir](obj.cls);\n    }\n\n    // store the PoClassPropertyMap of a belongsTo PropMetadata relation\n    // and the PoClassPropertyMap of all foreign key PropMetadata.\n    // These arr actually matching pairs of a belongTo relation and it's fk\n    // (not all belongsTo has fk, only different property name is a fk)\n    //\n    // At the end, go through the stored PropMetadata's and see if matching pairs found (2 values in array)\n    // for all of them, swap the prop names so:\n    // belongsTo PoClassPropertyMap will output (deserialize) to the original fk property name\n    // foreignKey PoClassPropertyMap wil input (serialize) to the belongsTo property name\n    // this swap make the deserialize/serialize process transparent to fk mismatch defined on the model.\n    // De/Serialize implementations are only responsible to return the right object\n    // (e.g. detect when a key is incoming, return obj instead)\n    if (prop.relation) {\n      const arr = fkMap.get(prop) || [];\n      arr[0] = obj;\n      fkMap.set(prop, arr);\n    } else if (prop.foreignKeyOf) {\n      const arr = fkMap.get(prop.foreignKeyOf) || [];\n      arr[1] = obj;\n      fkMap.set(prop.foreignKeyOf, arr);\n    }\n\n    return obj;\n  });\n\n  Array.from(fkMap.entries()).forEach(([k, v]) => {\n    if (v.length === 2) {\n      // this is a swap\n      v[0].obj = v[1].cls as any;\n      v[1].cls = k.name as any; // v[0].cls === k.name\n    }\n  });\n\n  return { excluded, instructions };\n}\n\nfunction serializePredicate(p: PoClassPropertyMap) {\n  return p.cls === this;\n}\nfunction deserializePredicate(p: PoClassPropertyMap) {\n  return p.obj === this;\n}\n\n/**\n * A Target transformer is the running context of a mapper.\n * It will run the mapper, provide input and parse results\n */\nexport class TargetTransformer<T, Z> {\n  @LazyInit(function(\n    this: TargetTransformer<T, Z>\n  ): PoClassPropertyMap | undefined {\n    const idKey = this.meta.getIdentityKey();\n    if (idKey) {\n      return (this.hasOwnProperty('incoming')\n        ? this.incoming\n        : this.outgoing\n      ).instructions.find(p => p.prop.name === idKey);\n    }\n  })\n  protected identity: PoClassPropertyMap | undefined;\n\n  @LazyInit(function(this: TargetTransformer<T, Z>): CompiledTransformation {\n    return getInstructions(this.meta, 'incoming');\n  })\n  protected incoming: CompiledTransformation;\n\n  @LazyInit(function(this: TargetTransformer<T, Z>): CompiledTransformation {\n    return getInstructions(this.meta, 'outgoing');\n  })\n  protected outgoing: CompiledTransformation;\n\n  @LazyInit(function(this: TargetTransformer<T, Z>): PropertyContainer {\n    const model = this.meta.model();\n    if (model.transformStrategy === 'exclusive') {\n      return new ExclusivePropertyContainer(this.meta.target, this.incoming);\n    } else {\n      const rename = namingStrategyMap('incoming', model.transformNameStrategy)\n        ? prop => (prop.cls = model.transformNameStrategy.incoming(prop.obj))\n        : undefined;\n      return new InclusivePropertyContainer(\n        this.meta.target,\n        this.incoming,\n        deserializePredicate,\n        rename\n      );\n    }\n  })\n  protected incomingContainer: PropertyContainer;\n\n  @LazyInit(function(this: TargetTransformer<T, Z>): PropertyContainer {\n    const model = this.meta.model();\n    if (model.transformStrategy === 'exclusive') {\n      return new ExclusivePropertyContainer(this.meta.target, this.outgoing);\n    } else {\n      const rename = namingStrategyMap('outgoing', model.transformNameStrategy)\n        ? prop => (prop.obj = model.transformNameStrategy.outgoing(prop.cls))\n        : undefined;\n      return new InclusivePropertyContainer(\n        this.meta.target,\n        this.outgoing,\n        serializePredicate,\n        rename\n      );\n    }\n  })\n  protected outgoingContainer: PropertyContainer;\n\n  constructor(protected meta: TargetMetadata<T, Z>) {}\n\n  serialize(mapper: SerializeMapper): any {\n    return mapper.serialize(this.outgoingContainer);\n  }\n\n  /**\n   * Deserialize a single target.\n   * Does not support collection deserialization, if mapper is a collection will throw.\n   * @param mapper\n   * @param target\n   */\n  deserialize(mapper: DeserializeMapper, target: any): void {\n    const cb = (prop: PoClassPropertyMap) => {\n      const propMeta = (prop.prop && prop.prop.foreignKeyOf) || prop.prop;\n      target[prop.cls] = transformValueIn(\n        mapper.getValue(prop.obj, propMeta),\n        propMeta\n      );\n    };\n\n    if (isFunction(mapper.setRef)) {\n      mapper.setRef(target);\n    }\n\n    if (mapper.raw === true) {\n      this.incomingContainer.forEachRaw(mapper.getKeys(), cb);\n    } else {\n      this.incomingContainer.forEach(mapper.getKeys(), cb);\n    }\n\n    if (isFunction(mapper.getIdentity)) {\n      if (this.identity) {\n        const ident = transformValueIn(\n          mapper.getIdentity(),\n          this.identity.prop\n        );\n        if (ident) {\n          target[this.identity.cls] = ident;\n        }\n      }\n    }\n  }\n}\n","import {\n  TransformDir,\n  BaseMetadata,\n  DecoratorInfo,\n  MetaClass,\n  MetaClassMetadata,\n  MetaClassInstanceDetails\n} from '../fw';\n\nimport { targetStore } from './target-store';\nimport { PropMetadata } from './prop';\n\nexport interface ExcludeMetadataArgs {\n  /**\n   * The type of transformation to exclude from, if not set excludes from all.\n   * @optional\n   * @default undefined (all)\n   */\n  from?: TransformDir;\n}\n\ndeclare module './prop' {\n  interface PropMetadataArgs {\n    exclude?: true | ExcludeMetadataArgs;\n  }\n}\n\n// exporting to satisfy angular AOT\nexport function factory(\n  this: MetaClassMetadata<ExcludeMetadataArgs, ExcludeMetadata>,\n  metaArgs: ExcludeMetadataArgs,\n  target: Object | Function,\n  info: DecoratorInfo\n): MetaClassInstanceDetails<ExcludeMetadataArgs, ExcludeMetadata> | undefined {\n  if (info.type === 'class') {\n    targetStore.getTargetMeta(<any>target).model().transformStrategy =\n      'exclusive';\n  } else {\n    return {\n      info,\n      target: <any>target.constructor,\n      metaClassKey: ExcludeMetadata,\n      metaPropKey: info.name,\n      metaValue: new ExcludeMetadata(metaArgs, info)\n    };\n  }\n}\n\n@MetaClass<ExcludeMetadataArgs, ExcludeMetadata>({\n  allowOn: ['class', 'member'],\n  extend: 'mergeMap',\n  proxy: {\n    host: PropMetadata,\n    containerKey: 'exclude'\n  },\n  factory\n})\nexport class ExcludeMetadata extends BaseMetadata {\n  from?: TransformDir;\n\n  constructor(metaArgs: ExcludeMetadataArgs, info: DecoratorInfo) {\n    super(info);\n\n    if (metaArgs) {\n      this.from = metaArgs.from;\n    }\n  }\n}\n\n// to make it easy on generics later\ndeclare module '../fw/metadata-framework/meta-class' {\n  namespace MetaClass {\n    function get(\n      target: typeof ExcludeMetadata\n    ): MetaClassMetadata<ExcludeMetadataArgs, ExcludeMetadata>;\n  }\n}\n","import {\n  MapExt,\n  MetaClassInstanceDetails,\n  MetaClassMetadata,\n  registerHelpers,\n  extendHelpers,\n  BaseMetadata\n} from '../fw';\nimport { targetStore } from './target-store';\n\n/**\n * Registers the value as any array.\n * If array does not exists will create one and push the value into it.\n *\n * Handles both single and property style registration.\n */\nregisterHelpers.array = function<TMetaArgs, TMetaClass>(\n  this: MetaClassMetadata<TMetaArgs, TMetaClass>,\n  meta: MetaClassInstanceDetails<TMetaArgs, TMetaClass>\n): void {\n  const propKey: any = this.metaArgs.single === true ? true : meta.metaPropKey;\n\n  let curr: any[] = <any>targetStore.getMetaFor(\n    meta.target,\n    meta.metaClassKey,\n    propKey\n  );\n  if (!curr) {\n    targetStore.setMetaFor(\n      meta.target,\n      meta.metaClassKey,\n      propKey,\n      (curr = [])\n    );\n  }\n\n  curr.push(meta.metaValue);\n};\n\nextendHelpers.mergeMap = function<T>(\n  from: Map<TdmPropertyKey, T>,\n  to: Map<TdmPropertyKey, T> | undefined\n): Map<TdmPropertyKey, T> {\n  return to\n    ? MapExt.mergeInto(to, from)\n    : new Map<TdmPropertyKey, T>(from.entries());\n};\n\nextendHelpers.mergeMapArray = function<T extends BaseMetadata>(\n  from: Map<TdmPropertyKey, T[]>,\n  to: Map<TdmPropertyKey, T[]> | undefined\n): Map<TdmPropertyKey, T[]> {\n  if (!to) {\n    to = new Map<TdmPropertyKey, T[]>();\n  }\n\n  MapExt.asKeyValArray(from).forEach(([k, v]) => {\n    if (!to.has(k)) {\n      to.set(k, v.slice());\n    } else {\n      const arrFrom = v;\n      const arrTo = to.get(k);\n      for (let metaClass of arrFrom) {\n        if (!arrTo.some(a => a.name === metaClass.name)) {\n          arrTo.push(metaClass);\n        }\n      }\n    }\n  });\n\n  return to;\n};\n\ndeclare module '../fw/metadata-framework/types' {\n  interface MetaClassRegisterHelpers {\n    /**\n     * Registers the value as any array.\n     * If array does not exists will create one and push the value into it.\n     *\n     * Handles both single and property style registration.\n     */\n    array<TMetaArgs, TMetaClass>(\n      this: MetaClassMetadata<TMetaArgs, TMetaClass>,\n      meta: MetaClassInstanceDetails<TMetaArgs, TMetaClass>\n    ): void;\n  }\n\n  interface MetaClassExtendHelpers {\n    /**\n     * Extend the type by merging the map from the source (from) onto the map of destination (to).\n     * In case properties exist on both, will override from destination.\n     * If destination does not exist, it's a shallow copy of the map.\n     */\n    mergeMap<T>(\n      from: Map<TdmPropertyKey, T>,\n      to: Map<TdmPropertyKey, T> | undefined\n    ): Map<TdmPropertyKey, T>;\n\n    mergeMapArray<T extends BaseMetadata>(\n      from: Map<TdmPropertyKey, T[]>,\n      to: Map<TdmPropertyKey, T[]> | undefined\n    ): Map<TdmPropertyKey, T[]>;\n  }\n}\n","export * from './model-metadata';\nexport * from './target-store';\nexport * from './prop';\nexport * from './type';\nexport * from './relation';\nexport { ExcludeMetadata, ExcludeMetadataArgs } from './exclude';\nexport * from './target-metadata';\n","import {\n  LazyInit,\n  Constructor,\n  TransformFn,\n  propAliasConfig,\n  PropAliasConfig,\n  propTransformConfig,\n  PropTransformConfig,\n  BaseMetadata,\n  DecoratorInfo,\n  MetaClass,\n  MetaClassMetadata\n} from '../fw';\n\nimport { targetStore } from './target-store';\nimport { RelationMetadata } from './relation';\nimport { TypeMetadata, TypeMetadataArgs } from './type';\n\nexport interface PropMetadataArgs {\n  alias?: string | Partial<PropAliasConfig>;\n  transform?: TransformFn | Partial<PropTransformConfig>;\n\n  /**\n   * A Getter function that returns the type of the property.\n   * In most cases, the framework will identify the type using the metadata supplied by TypeScript.\n   * However, in some scenarios it is not possible to detect the type, the most common are:\n   *\n   * A) Circular module dependency, i.e. where A import B and B import A. Especially common in related types.\n   *    From 2 circular dependencies, the first one to load will not know the type of the 2nd.\n   *\n   * B) When using \"this\" type. TypeScript will emit the type \"Object\" when using this so it is not\n   *    known and the user must supply it.\n   *\n   * C) When using \"any\" type. TypeScript will emit the type \"Object\" when using this so it is not\n   *    known and the user must supply it.\n   *\n   * D): When the type T in an Array of T, TypeScript will emit the type Array without the array\n   *     element type. https://github.com/Microsoft/TypeScript/issues/7169\n   */\n  type?: TypeMetadataArgs;\n}\n\n@MetaClass<PropMetadataArgs, PropMetadata>({\n  allowOn: ['member'],\n  extend: 'mergeMap'\n})\nexport class PropMetadata extends BaseMetadata {\n  alias: PropAliasConfig;\n  transform?: Partial<PropTransformConfig>;\n\n  @LazyInit(function(this: PropMetadata) {\n    // get the type information.\n    // 3 options:\n    // 1. User set the @Type decorator, so we will find it in the metadata store\n    // 2. User the the 'type' property in PropMetadataArgs which will mimic @Type in the PropMetadata constructor\n    // 3. Auto resolve, we will create a new instance with no getter.\n    return (\n      targetStore.getMetaFor(this.target, TypeMetadata, this.name) ||\n      new TypeMetadata(this.typeArgs, this.decoratorInfo, this.target)\n    );\n  })\n  type: TypeMetadata;\n\n  relation: RelationMetadata | undefined;\n  foreignKeyOf?: PropMetadata;\n\n  private typeArgs?: TypeMetadataArgs;\n\n  constructor(\n    obj: PropMetadataArgs | undefined,\n    info: DecoratorInfo,\n    private target: Constructor<any>\n  ) {\n    super(info);\n\n    if (!obj) {\n      obj = {};\n    }\n\n    // TODO: throw if name is not a string (can be symbol)\n    this.alias = propAliasConfig(obj.alias, info.name as any);\n\n    if (obj.transform) {\n      this.transform = propTransformConfig(obj.transform);\n    }\n\n    if (obj.type) {\n      this.typeArgs = obj.type;\n    }\n  }\n\n  setRelationship(rel: RelationMetadata): void {\n    if (!this.type.isGetter) {\n      if (\n        !this.type.ref ||\n        this.type.ref === Object ||\n        this.type.ref === Array\n      ) {\n        throw new Error(\n          `Property ${\n            this.decoratorInfo.name\n          } with relation but without a type, please set a type.`\n        );\n      }\n    }\n\n    this.relation = rel;\n  }\n}\n\n// to make it easy on generics later\ndeclare module '../fw/metadata-framework/meta-class' {\n  namespace MetaClass {\n    function get(\n      target: typeof PropMetadata\n    ): MetaClassMetadata<PropMetadataArgs, PropMetadata>;\n  }\n}\n","import { BaseMetadata, DecoratorInfo, MetaClass } from '../fw';\n\nexport interface RelationMetadataArgs {\n  /**\n   * The foreign key (property name) that points to the id of the resource belonged to.\n   * If not set, the current property name is used.\n   *\n   * For example, on a Customer object, if the foreign key is customerId and you would like to use\n   * the \"customer\" property, set the foreignKey to \"customerId\"\n   */\n  foreignKey?: string;\n}\n\n@MetaClass<RelationMetadataArgs, RelationMetadata>({\n  allowOn: ['member'],\n  extend: 'mergeMap'\n})\nexport class RelationMetadata extends BaseMetadata {\n  foreignKey: string;\n\n  constructor(obj: RelationMetadataArgs | undefined, info: DecoratorInfo) {\n    super(info);\n\n    this.foreignKey = (obj && obj.foreignKey) || (info.name as any);\n  }\n}\n\n// to make it easy on generics later\n// declare module '../fw/metadata-framework/meta-class' {\n//   module MetaClass {\n//     function get(target: typeof RelationMetadata): MetaClassMetadata<RelationMetadataArgs, RelationMetadata>;\n//   }\n// }\n","import {\n  Constructor,\n  DualKeyMap,\n  BaseMetadata,\n  isString,\n  GLOBAL_KEY,\n  MetadataClassStatic\n} from '../fw';\n\nimport { targetStore } from './target-store';\n// import { PropMetadata } from './prop';\nimport { TDMCollection } from '../model';\n\n/**\n * The metadata store for a target.\n *\n * Each target in the {@link TargetStore} has a matching TargetMetadata instance.\n * Each instance holds all the metadata data registered under that target.\n *\n * @pluginApi\n */\nexport class TargetMetadata<T = any, Z = any> {\n  protected config: DualKeyMap<Constructor<any>, TdmPropertyKey, any>;\n\n  constructor(\n    public readonly target: Z & Constructor<T>,\n    config: DualKeyMap<MetadataClassStatic, TdmPropertyKey, any>\n  ) {\n    this.config = config;\n  }\n\n  /**\n   * Returns an array of values represented by the key.\n   * If the key has no values returns an empty array.\n   *\n   * This is a safe metadata collection extractor.\n   * @param type\n   * @returns\n   */\n  getValues<T, Z>(type: T & Constructor<Z>): Array<Z> {\n    const values = this.config.get(type);\n    return values ? Array.from(values.values()) : [];\n  }\n\n  /**\n   * Get the whole map of non-single metadata class\n   */\n  getMetaFor<T extends MetadataClassStatic, Z extends BaseMetadata>(\n    metaClass: T & Constructor<Z>\n  ): Map<TdmPropertyKey, Z> | undefined;\n  /**\n   * Get metadata for a single value metadata class\n   */\n  getMetaFor<T extends MetadataClassStatic, Z extends BaseMetadata>(\n    metaClass: T & Constructor<Z>,\n    single: true\n  ): Z | undefined;\n  /**\n   * Get metadata for a non-single value metadata class\n   */\n  getMetaFor<T extends MetadataClassStatic, Z extends BaseMetadata>(\n    metaClass: T & Constructor<Z>,\n    name: string\n  ): Z | undefined;\n  getMetaFor<T extends MetadataClassStatic, Z extends BaseMetadata>(\n    metaClass: T & Constructor<Z>,\n    name?: string | true\n  ): Z | undefined {\n    if (isString(name)) {\n      const meta = this.config.get(metaClass);\n      if (meta) {\n        return meta.get(name);\n      }\n    } else if (name === true) {\n      const meta = this.config.get(GLOBAL_KEY);\n      if (meta) {\n        return meta.get(<any>metaClass);\n      }\n    } else {\n      return this.config.get(metaClass) as any;\n    }\n  }\n\n  /**\n   * Set metadata for a single metadata class\n   */\n  setMetaFor<T, ZValue = T>(\n    metaClass: MetadataClassStatic<T>,\n    value: ZValue\n  ): void;\n  /**\n   * Set metadata for a non-single metadata class\n   */\n  setMetaFor<T, ZValue = T>(\n    metaClass: MetadataClassStatic<T>,\n    name: string,\n    value: ZValue\n  ): void;\n  setMetaFor<T, ZValue = T>(\n    metaClass: MetadataClassStatic<T>,\n    name: string | ZValue,\n    value?: ZValue\n  ): void {\n    // TODO: don't go to target-store for this, implement here\n    if (isString(name)) {\n      targetStore.setMetaFor(this.target, metaClass, name, value);\n    } else {\n      targetStore.setMetaFor(this.target, metaClass, true, name);\n    }\n  }\n\n  /**\n   * Create a new instance of the TDMCollection for this type.\n   * @returns\n   */\n  createCollection(): TDMCollection<T> {\n    return new TDMCollection<T>();\n  }\n\n  // protected get<T, Z, P extends keyof T>(type: T & Constructor<Z>, key: P): Z {\n  //   return this.config.get(PropMetadata, key);\n  // }\n}\n","import { Constructor, isUndefined } from '../fw/utils';\nimport { KeySet, SetExt, MapExt, DualKeyMap } from '../fw/set-map-ext';\nimport {\n  MetaClass,\n  MetadataClassStatic,\n  MetaClassInstanceDetails,\n  GLOBAL_KEY\n} from '../fw/metadata-framework';\nimport { targetEvents, TargetEvents } from '../fw/events';\n\nimport { TargetMetadata } from './target-metadata';\n\n/**\n * The global type registry.\n *\n * Hold {@link TargetMetadata} for models.\n *\n * @pluginApi\n * @mixable\n * @singleton\n */\nexport class TargetStore {\n  /**\n   * register listeners for metadata lifecycle events on a target.\n   * @returns\n   */\n  get on(): TargetEvents {\n    return targetEvents;\n  }\n\n  /**\n   * Storage for local, non target specific, data.\n   */\n  protected locals: KeySet<any, any>;\n  protected namedTargets: Map<string, Constructor<any>>;\n  protected targets: Map<\n    Constructor<any>,\n    DualKeyMap<MetadataClassStatic, TdmPropertyKey, any>\n  >;\n  protected builtTargets: Map<Constructor<any>, TargetMetadata>;\n\n  protected constructor() {\n    // support for post instantiation mixins on the prototype (plugins) - don't use new.\n    TargetStore.create(this);\n  }\n\n  /**\n   * Returns a single local item.\n   * @param key\n   * @param index optional, if not set returns the first.\n   * @returns\n   */\n  protected local<T>(key: any, index: number = 0): T | undefined {\n    const set = this.locals.get(key);\n    if (set) {\n      return SetExt.index(set, index);\n    }\n  }\n\n  hasTarget(target: any): boolean {\n    return this.targets.has(target);\n  }\n\n  /**\n   * Returns the target metadata of all models registered. (targets with ModelMetadata or derived)\n   * Only built models are returned, with valid ModelMetadata instances.\n   * Do not call this method from a decorator.\n   */\n  getAllModels(): TargetMetadata[] {\n    return Array.from(this.builtTargets.values()).filter(\n      tMeta => tMeta.hasModel\n    );\n  }\n\n  findTarget(name: string): Constructor<any> | undefined {\n    return this.namedTargets.get(name);\n  }\n\n  getMetaFor<T, Z>(\n    target: Constructor<any>,\n    metaClass: T & Constructor<Z>\n  ): Map<TdmPropertyKey, Z> | undefined;\n  getMetaFor<T, Z>(\n    target: Constructor<any>,\n    metaClass: T & Constructor<Z>,\n    single: true\n  ): Z | undefined;\n  getMetaFor<T, Z, P extends keyof Z>(\n    target: Constructor<any>,\n    metaClass: T & Constructor<Z>,\n    single: true,\n    singleKey: P\n  ): Z[P] | undefined;\n  getMetaFor<T, Z>(\n    target: Constructor<any>,\n    metaClass: T & Constructor<Z>,\n    name: TdmPropertyKey\n  ): Z | undefined;\n  getMetaFor<T, Z>(\n    target: Constructor<any>,\n    metaClass: T & Constructor<Z>,\n    name?: TdmPropertyKey | true,\n    singleKey?: any\n  ): Z | Map<TdmPropertyKey, Z> | undefined {\n    const dkm = this.targets.get(target);\n    if (dkm) {\n      if (name === true) {\n        const v = dkm.get(GLOBAL_KEY, <any>metaClass);\n        return v && singleKey ? v[singleKey] : v;\n      } else if (name) {\n        return dkm.get(metaClass, name);\n      } else {\n        return dkm.get(metaClass);\n      }\n    }\n  }\n\n  setMetaFormFactory<T>(meta: MetaClassInstanceDetails<any, any>): void {\n    if (meta) {\n      if (meta.metaPropKey === GLOBAL_KEY) {\n        this.set<any, any, any>(\n          meta.target,\n          GLOBAL_KEY,\n          meta.metaClassKey,\n          meta.metaValue\n        );\n      } else {\n        this.setMetaFor(\n          meta.target,\n          meta.metaClassKey,\n          meta.metaPropKey,\n          meta.metaValue\n        );\n      }\n    }\n  }\n\n  setMetaFor<T, ZValue = T>(\n    target: Constructor<any>,\n    metaClass: MetadataClassStatic<T>,\n    single: true,\n    value: ZValue\n  ): void;\n  setMetaFor<T, ZValue = T>(\n    target: Constructor<any>,\n    metaClass: MetadataClassStatic<T>,\n    name: string,\n    value: ZValue\n  ): void;\n  setMetaFor<T, ZValue = T>(\n    target: Constructor<any>,\n    metaClass: MetadataClassStatic<T>,\n    name: string | true,\n    value: ZValue\n  ): void {\n    if (name === true) {\n      this.set<any, any, any>(target, GLOBAL_KEY, metaClass, value);\n    } else {\n      this.set(target, metaClass, name, value);\n    }\n  }\n\n  /**\n   * Registers the target in the store, does not build.\n   * Used for targets without metadata\n   * @param target\n   */\n  registerTarget(target: Constructor<any>): void {\n    if (!this.hasTarget(target)) {\n      this.targets.set(\n        target,\n        new DualKeyMap<MetadataClassStatic, TdmPropertyKey, any>()\n      );\n    }\n  }\n\n  /**\n   * Extends metadata from one target to the other.\n   * Extending types will not trigger a metadata instantiation.\n   * @param from\n   * @param to\n   */\n  extend(from: Constructor<any>, to: Constructor<any>): void {\n    if (!this.hasTarget(from) || !this.hasTarget(to)) {\n      throw new Error('Target not registered.');\n    }\n\n    const fromTarget = this.targets.get(from);\n    const toTarget = this.targets.get(to);\n    Array.from(fromTarget.keys()).forEach(clsKey => {\n      if (clsKey === GLOBAL_KEY) {\n        const singleTypes = fromTarget.get(clsKey);\n        const toSingleTypes = toTarget.get(clsKey) || new Map<any, any>();\n\n        MapExt.asKeyValArray(singleTypes).forEach(([type, instance]) => {\n          // type is a class, using <any> since for TS its a TdmPropertyKey\n          const metaClass = MetaClass.get(<any>type);\n          if (metaClass.extendSingle) {\n            const toInstance = toSingleTypes.get(<any>type);\n            const value = metaClass.extendSingle(instance, toInstance, {\n              from,\n              to\n            });\n            if (!isUndefined(value)) {\n              toSingleTypes.set(<any>type, <any>value);\n            }\n          }\n        });\n\n        if (toSingleTypes.size > 0) {\n          toTarget.set(clsKey, toSingleTypes);\n        }\n      } else {\n        const metaClass = MetaClass.get(clsKey);\n        if (metaClass.extend) {\n          const value = metaClass.extend(\n            fromTarget.get(clsKey),\n            toTarget.get(clsKey),\n            { from, to }\n          );\n          if (!isUndefined(value)) {\n            toTarget.set(clsKey, value);\n          }\n        }\n      }\n    });\n  }\n\n  protected set<T, Z, P extends keyof T>(\n    target: Constructor<any>,\n    k: Z & Constructor<T>,\n    k1: P,\n    v: T[P]\n  ): T[P] {\n    // TODO: implement LRU since most values are set sequentially on the same target.\n    let dkm = this.targets.get(target);\n\n    if (!dkm) {\n      this.targets.set(\n        target,\n        (dkm = new DualKeyMap<MetadataClassStatic, TdmPropertyKey, any>())\n      );\n    }\n\n    dkm.set(k as any, k1, v as any);\n\n    return v;\n  }\n\n  /**\n   * Creates a new TargetStore instance.\n   * @param instance optional, used internally\n   * @returns\n   */\n  static create(instance?: TargetStore): TargetStore {\n    const targetStore: TargetStore =\n      instance || Object.create(TargetStore.prototype);\n\n    targetStore.locals = new KeySet<any, any>();\n    targetStore.namedTargets = new Map<string, Constructor<any>>();\n    targetStore.targets = new Map<\n      Constructor<any>,\n      DualKeyMap<MetadataClassStatic, TdmPropertyKey, any>\n    >();\n    targetStore.builtTargets = new Map<Constructor<any>, TargetMetadata>();\n\n    return targetStore;\n  }\n}\n\nexport const targetStore: TargetStore = TargetStore.create();\nMetaClass.defaultRegistrator(meta => targetStore.setMetaFormFactory(meta));\n\nimport './helpers';\n","import {\n  reflection,\n  isFunction,\n  Constructor,\n  BaseMetadata,\n  DecoratorInfo,\n  MetaClass\n} from '../fw';\n\nexport interface TypeDefinition {\n  /**\n   * The type or a forward reference (getter) for the type.\n   * If not set, Object is set as the default type\n   */\n  ref?: (() => Constructor<any>) | Constructor<any>;\n\n  /**\n   * If true, ref should be treated as a getter to the type.\n   */\n  forwardRef?: true;\n\n  /**\n   * Is actual type an array of the type in ref?\n   */\n  isArray?: boolean;\n}\n\n/**\n * Custom type definitions for a property.\n *\n * In most cases custom type definition are not needed, however due to the way typescript defines\n * the type information there are some edge cases where a manual type definition is required:\n *\n * A) Circular module dependency, i.e. where A import B and B import A. Especially common in related types.\n *    From 2 circular dependencies, the first one to load will not know the type of the 2nd.\n *    A similar scenario also happens when 2 (or more) classes are defined on the same file and a class (A)\n *    defined before of an other class (B). If class A has a property of type class B then the type information\n *    for B will be undefined since at the point of executing the decorator code B is undefined, this is plain JS.\n *\n * B) When using \"this\" type. TypeScript will emit the type \"Object\" when using this so it is not\n *    known and the user must supply it.\n *\n * C) When using \"any\" type. TypeScript will emit the type \"Object\" when using this so it is not\n *    known and the user must supply it.\n *\n * D): When the type T in an Array of T, TypeScript will emit the type Array without the array\n *     element type. https://github.com/Microsoft/TypeScript/issues/7169\n *\n * A type definition supports 2 type of references to a type:\n *   1. Forward reference\n *   2. Direct reference\n *\n * Forward reference is simple a function that returns the type, a simple getter. It comes to solve\n * the problem described in A.\n *\n * Direct reference is for all other use cases, the type definition points to the type directly.\n *\n * ```ts\n * class MyClass {}\n *\n * // Forward Reference:\n * { ref: () => MyClass, forwardRef: true }\n *\n * // Direct Reference:\n * { ref: MyClass }\n * ```\n *\n * Since `() => MyClass` and `MyClass` are both functions it is required to specify `forwardRef: true`,\n * if not the library will treat `ref` as the type.\n *\n * Since using `forwardRef` is common a shortcut can be used, instead of defining an object, just provide\n * a function, the library will convert it into a forward reference type definition.\n *\n * ```ts\n * class MyClassA {\n *   @Prop({ type: () => MyClassB }) myClassB: MyClassB;\n * }\n *\n * class MyClassB {}\n * ```\n * In the example above, `{ type: () => MyClassB }` is equivalent to `{ ref: () => MyClassB, forwardRef: true }`\n *\n *\n * ### Arrays\n * In TS arrays are used with type parameters (generic) that define the type used within an array.\n * Currently, TS will not emit the type parameter and will only emit the Array type.\n *\n * ```ts\n * class MyClass {\n *   myArray: string[];\n * }\n * ```\n * In the example above the reflected type is `Array` and not `String`.\n *\n * To workaround this issue you can specify if the type is an array in the type definition.\n * If `isArray` is not explicitly specified the value is taken from the type system. i.e. if the\n * reflected type is `Array` then `isArray` is considered true. This is also true when using the forward reference shortcut.\n *\n * If no type definition is set and the reflected type is `Array` then the final defined type will be Array<Object>.\n *\n *\n * ```ts\n * class MyClassA {\n *   @Prop({ type: () => MyClassB }) myClassB: MyClassB[];\n *   @Prop() myClassB_1: MyClassB[];\n *\n *   @Type({ type: {ref: String} }) @Prop() myString: string[];\n *   @Prop({ type: {ref: String, isArray: true} }) myString_1: string;\n *   @Prop() myString_2: string[];\n * }\n *\n * class MyClassB {}\n * ```\n *  myClassB: `{ ref: () => MyClassB, forwardRef: true, isArray: true }`\n *  myClassB_1: `{ ref: Object, isArray: true }`\n *  myString: `{ ref: String, isArray: true }`\n *  myString_1: `{ ref: String, isArray: true }`\n *  myString_2: `{ ref: Object, isArray: true }`\n *\n *  Note that explicitly set type definitions override reflected type definitions.\n */\nexport type TypeMetadataArgs = { (): Constructor<any> } | TypeDefinition;\n\n@MetaClass<TypeMetadataArgs, TypeMetadata>({\n  allowOn: ['member'],\n  extend: 'mergeMap'\n})\nexport class TypeMetadata extends BaseMetadata {\n  readonly ref: Constructor<any>;\n  readonly isArray?: boolean;\n  readonly isGetter?: boolean;\n\n  constructor(\n    metaArgs: TypeMetadataArgs,\n    info: DecoratorInfo,\n    target?: Constructor<any>\n  ) {\n    super(info);\n\n    const type = target\n      ? reflection.designType(target.prototype, this.name as any)\n      : Object;\n\n    let def: TypeDefinition;\n    if (isFunction(metaArgs)) {\n      def = { ref: metaArgs, forwardRef: true, isArray: type === Array };\n    } else if (metaArgs) {\n      def = metaArgs;\n      if (!def.hasOwnProperty('isArray')) {\n        def.isArray = type === Array;\n      }\n      if (!def.ref) {\n        def.ref = def.forwardRef === true ? () => Object : Object;\n      }\n    } else {\n      def = { ref: type === Array ? Object : type, isArray: type === Array };\n    }\n\n    this.isArray = def.isArray;\n\n    if (def.forwardRef === true) {\n      // WHY configurable: true -> see @tdm/data -> meta-class extension\n      Object.defineProperty(this, 'ref', {\n        configurable: true,\n        get: <any>def.ref\n      });\n      this.isGetter = true;\n    } else {\n      this.ref = <any>def.ref;\n    }\n  }\n}\n","export * from './tdm-collection';\nexport * from './tdm-model';\n","import { Tixin } from '@tdm/tixin';\nimport { targetStore } from '../metadata/target-store';\nimport { Constructor } from '../fw';\n\nconst TDMCollectionMark = Symbol('TDMCollection instance mark');\nconst NON_EXTENDABLE_PROPS = ['constructor'];\n\nconst pCopyMap = new Map<any, Array<string | symbol>>();\n\nfunction buildAndCacheProperties(proto: any) {\n  const propertiesToCopy = Object.getOwnPropertyNames(proto)\n    .concat(Object.getOwnPropertySymbols(proto) as any)\n    .filter(v => NON_EXTENDABLE_PROPS.indexOf(v) === -1);\n\n  pCopyMap.set(proto, propertiesToCopy);\n}\n\nfunction runtimeExtend(proto: any, thisVar: Array<any>): any {\n  const propertiesToCopy = pCopyMap.get(proto) || [];\n\n  thisVar[TDMCollectionMark] = true;\n\n  for (let i = 0, len = propertiesToCopy.length; i < len; i++) {\n    const name = propertiesToCopy[i];\n    const propDesc = Object.getOwnPropertyDescriptor(proto, name);\n    if (propDesc) {\n      Object.defineProperty(thisVar, name, propDesc);\n    } else {\n      thisVar[name] = proto[name];\n    }\n  }\n}\n\n// TODO: document the class and how to use it. explain about methods that return new instance (concat, reverse, etc) that return Array instance and not ActiveRecordCollection instance.\n// TODO: override ref changing methods? throw on them? return ActiveRecordCollection on them?\nexport class TDMCollection<\n  T /* extends ActiveRecord<any, any> */\n> extends Array<T> {\n  constructor() {\n    super();\n    runtimeExtend(TDMCollection.prototype, this);\n  }\n\n  static extend(type: any): void {\n    Tixin(TDMCollection as any, type);\n    buildAndCacheProperties(TDMCollection.prototype);\n  }\n\n  static instanceOf(instance: any): instance is TDMCollection<any> {\n    return instance[TDMCollectionMark] === true;\n  }\n\n  /**\n   * Creates a new instance of TDMCollection.\n   * If a type is specified, returns the TDMCollection class for that type.\n   * It is recommended to use this method along with a type to ensure plugins functionality.\n   * @param type\n   */\n  static create<T>(type?: Constructor<T>): TDMCollection<T> {\n    if (!type) {\n      return new TDMCollection<any>();\n    } else {\n      return targetStore.getTargetMeta(type).createCollection();\n    }\n  }\n\n  /**\n   * Creates a new TDMCollection class mixed in with the proto object.\n   * @param proto An object literal used as a mixin to the TDMCollection prototype.\n   * @returns\n   */\n  static factory<T>(\n    proto: any\n  ): typeof TDMCollection & Constructor<TDMCollection<T>> {\n    const clz = class RuntimeTDMCollection<T> extends TDMCollection<T> {\n      constructor() {\n        super();\n        runtimeExtend(clz.prototype, this);\n      }\n\n      static extend(type: any): void {\n        Tixin(TDMCollection as any, type);\n        buildAndCacheProperties(clz.prototype);\n      }\n    };\n\n    Object.defineProperty(clz, Symbol.hasInstance, {\n      value: clz.instanceOf\n    });\n\n    Object.assign(clz.prototype, proto);\n    buildAndCacheProperties(clz.prototype);\n\n    return clz;\n  }\n}\n\nObject.defineProperty(TDMCollection, Symbol.hasInstance, {\n  value: TDMCollection.instanceOf\n});\n\nbuildAndCacheProperties(TDMCollection.prototype);\n","import { TixinFree } from '@tdm/tixin';\nimport { Constructor } from '../fw';\nimport { MapperFactory } from '../mapping/mapper';\n\nconst TDMModelMark = Symbol('TDMModel instance mark');\n\nexport interface TDMModel<T> {}\n\nexport class TDMModelBase<T> implements TDMModel<T> {\n  toString(): string {\n    return this.constructor.name;\n  }\n\n  // SEE IMPLEMENTATION IN src/@tdm/core/src/core.ts\n  /**\n   * Clone's (deep) the resource.\n   * This is a deep clone done using serialization -> deserialization, which means that all rules apply (i.e @Exclude)\n   *\n   * @param resource the resource (instance) to clone\n   * @param mapperFactory Optional, The [[MapperFactory]] to use, defaults to [[directMapper]].\n   */\n  static clone: <T>(resource: T, mapperFactory?: MapperFactory) => T;\n\n  static instanceOf(instance: any): instance is TDMModelBase<any> {\n    return instance[TDMModelMark] === true;\n  }\n\n  static factory<T, Z>(\n    model: Z & Constructor<T>\n  ): Z & Constructor<TDMModelBase<T>> {\n    class TDModel extends (model as Constructor<{}>) {}\n\n    Object.defineProperty(TDModel, 'name', {\n      configurable: true,\n      value: model.name\n    });\n    Object.defineProperty(TDModel, Symbol.hasInstance, {\n      value: TDMModelBase.instanceOf\n    });\n\n    TixinFree(TDModel, TDMModelBase, 'proto');\n\n    // TODO: copy other TS reflection info\n    const paramTypes = (Reflect as any).getOwnMetadata(\n      'design:paramtypes',\n      model\n    );\n    (Reflect as any).defineMetadata('design:paramtypes', paramTypes, TDModel);\n\n    return TDModel as any;\n  }\n}\n\nObject.defineProperty(TDMModelBase.prototype, TDMModelMark, { value: true });\n","export * from './type-helpers';\n\nexport {\n  errors,\n  Errors,\n  Constructor,\n  TransformDir,\n  TransformFn,\n  TransformStrategy,\n  NamingStrategyConfig,\n  stringify,\n  isNumber,\n  isString,\n  isFunction,\n  isUndefined,\n  isJsObject,\n  isPrimitive,\n  LazyInit,\n  DualKeyMap,\n  SetExt,\n  KeySet,\n  MapExt,\n  ensureTargetIsType,\n  MetadataAllowOn,\n  setMetaHelper,\n  MetaClassRegisterHelpers,\n  MetaClassExtendHelpers,\n  BaseMetadata,\n  BaseParamMetadata,\n  DecoratorInfo,\n  TargetEvents,\n  lazyRef,\n  getBaseClass,\n  getProtoChain,\n  reflection,\n  ProxyHostMetadataArgs,\n  MetaClassMetadataArgs,\n  MetaClassMetadata,\n  MetaClass,\n  MetadataClassStatic,\n  MetadataCurriedCreate,\n  MetaClassInstanceDetails\n} from './fw/index';\n\nexport {\n  ModelMetadataArgs,\n  TypeDefinition,\n  TypeMetadataArgs,\n  PropMetadataArgs,\n  RelationMetadataArgs,\n  ExcludeMetadataArgs,\n  TypeMetadata,\n  PropMetadata,\n  ExcludeMetadata,\n  RelationMetadata,\n  TargetStore,\n  TargetMetadata,\n  targetStore\n} from './metadata/index';\n\nexport {\n  directMapper,\n  TransformationError,\n  DirectSerializeMapper,\n  DirectDeserializeMapper,\n  MapperFactory,\n  DeserializeMapper,\n  SerializeMapper,\n  PropertyContainer,\n  PoClassPropertyMap,\n  transformValueOut,\n  PlainObjectMapper\n} from './mapping/index';\n\nexport { TDMCollection, TDMModel, TDMModelBase } from './model/index';\n\nexport { Model, ModelMetadata, processModel } from './add/model/index';\n\nimport './add/target-store';\nimport { initMapping } from './add/mapping';\ninitMapping();\nimport './add/mapping'; // we need this for d.ts export, the 2 rows above are not set in d.ts)\n\n// tslint:disable-next-line:no-namespace\ndeclare global {\n  type TdmPropertyKey = string | symbol;\n}\n","/*\n       * Public API Surface of mylib\n       */\nexport * from './lib/index';\n","import {\n  MapExt,\n  SetExt,\n  targetStore,\n  getProtoChain,\n  isFunction,\n  Constructor,\n  TDMModel,\n  TDMModelBase,\n  TDMCollection,\n  MetaClass\n} from '@tdm/core/tdm';\n\nimport {\n  ActionMetadata,\n  ExecuteContext,\n  AdapterStatic,\n  PluginStore,\n  ActionController,\n  ResourceControl\n} from '@tdm/data';\n\n/**\n * Returns all of the actions registered for a target going through the proto chain and all\n * mixins associated with each proto.\n *\n * Returns a unique list of actioned, uniqueness is set by the `name` of each action.\n * If 2 actions with the same 'name' exists, the top level actions wins, i.e. the first in the chain.\n *\n * @param target\n * @param adapterClass\n * @returns\n */\nfunction getActions(\n  target: Constructor<any>,\n  adapterClass: AdapterStatic<any, any>\n): ActionMetadata[] {\n  const chain = getProtoChain(target);\n  const actions = new Map<TdmPropertyKey, ActionMetadata>();\n\n  for (let i = 0, len = chain.length; i < len; i++) {\n    if (targetStore.hasTarget(chain[i])) {\n      const adapterMeta = targetStore.getAdapter(adapterClass);\n      const mixins = SetExt.asArray(\n        targetStore.getMixins(chain[i], adapterClass)\n      );\n      if (adapterMeta) {\n        const protoActions = adapterMeta.getActions(chain[i], ...mixins);\n        MapExt.fromArray(protoActions, v => v.name, actions, true);\n      }\n    }\n  }\n\n  return MapExt.asValArray(actions);\n}\n\nfunction composeAction(\n  obj: any,\n  action: ActionMetadata,\n  fn: (...args: any[]) => any\n): void {\n  obj[action.name] = fn;\n  if (action.alias) {\n    action.alias.forEach(alias => (obj[alias] = obj[action.name]));\n  }\n}\n\nfunction registerAction(\n  this: ActionController,\n  action: ActionMetadata,\n  collProto: any,\n  override: boolean = false\n): void {\n  const ctx = new ExecuteContext(this.targetMetadata, action);\n  const self = this;\n\n  if (action.decoratorInfo.isStatic) {\n    if (override || !isFunction(this.target[action.name])) {\n      composeAction(this.target, action, function(\n        this: AdapterStatic<any, any>,\n        ...args: any[]\n      ) {\n        return self.execute(ctx.clone(), { args }, 'instance');\n      });\n    }\n\n    if (\n      action.isCollection &&\n      action.collInstance &&\n      (override || !isFunction(collProto[action.name]))\n    ) {\n      composeAction(collProto, action, function(\n        this: TDMCollection<any>,\n        ...args: any[]\n      ): any {\n        this.splice(0, this.length);\n        return self.execute(ctx.clone(this), { args }, 'instance');\n      });\n    }\n  } else {\n    if (action.isCollection) {\n      throw new Error(\n        'An action with a collection response must be a static level member'\n      );\n    }\n\n    if (override || !isFunction(this.target.prototype[action.name])) {\n      composeAction(this.target.prototype, action, function(\n        this: TDMModel<any>,\n        ...args: any[]\n      ) {\n        // we call `self.execute` with 'instance' so it acts like AR in its resource control but we need the promise\n        // so we use the resource control to get it right away.\n        return ResourceControl.get(\n          self.execute(ctx.clone(this), { args }, 'instance')\n        );\n      });\n    }\n  }\n}\n\nfunction activeRecord(target: Constructor<any>): void {\n  // don't apply active record on non TDMModel targets (i.e. @Model targets)\n  // TODO: the event should be specific to `@tdm/data` and not onProcessType\n  if (!TDMModelBase.instanceOf(target.prototype)) {\n    return;\n  }\n\n  const ac = targetStore.getAC(target);\n  const collProto: any = {};\n\n  // build actions on the target type for the currently active adapter.\n  if (ac) {\n    getActions(target, ac.adapterClass).forEach(a => {\n      // TODO check action instance of ActionMetadata + in ActionMetadata verify using DecoratorInfo\n      const extAction = targetStore\n        .getTargetMeta(target)\n        .getExtendingAction(a.decoratorInfo);\n\n      if (extAction) {\n        const metaArgs = Object.assign({}, a.metaArgs, extAction);\n        const metaClass = MetaClass.get(ac.adapterMeta.actionMetaClass);\n        a = metaClass.factory(metaArgs, target, extAction.decoratorInfo)\n          .metaValue;\n      }\n\n      registerAction.call(ac, a, collProto, true);\n    });\n  }\n\n  // creating collection type for this target\n  if (Object.keys(collProto).length > 0) {\n    ac.targetMetadata.collectionClass = TDMCollection.factory(collProto);\n  }\n}\n\nfunction attachResourceControl(propertyName: string): void {\n  function getThisCtrl() {\n    return ResourceControl.get(this);\n  }\n\n  // extend TDMModel\n  Object.defineProperty(TDMModelBase.prototype, propertyName, {\n    configurable: true,\n    get: getThisCtrl\n  });\n\n  // extend TDMCollection\n  function StatefulActiveRecordCollection() {}\n  Object.defineProperty(\n    StatefulActiveRecordCollection.prototype,\n    propertyName,\n    { get: getThisCtrl }\n  );\n  TDMCollection.extend(StatefulActiveRecordCollection);\n}\n\nexport interface ActiveRecordOptions {\n  /**\n   * On each model, defines a property name that reference the {@link ResourceControl}\n   * instance for that model.\n   *\n   * Note that the string value is the property name on the model instance at runtime.\n   * At design time this property is not known to the type system (TypeScript), to attach the\n   * property to the type system extend {@link TDMModel} and {@link TDMModelCollection}.\n   *\n   * For example, attaching the property name '$rc', use a module to init the plugin:\n   * ```ts\n   * import { TDMModel, TDMCollection } from '@tdm/core/tdm';\n   * import { ResourceControl, plugins } from '@tdm/data';\n   * import '@tdm/data/plugin/active-record';\n   *\n   * plugins.ActiveRecord.init({ resourceControl: '$rc' });\n   *\n   * // Now, teach TypeScript about the new property:\n   * declare module '@tdm/core/tdm/src/model/tdm-model' {\n   *   interface TDMModel<T> {\n   *     readonly $rc: ResourceControl<T>;\n   *   }\n   *\n   *   interface TDMModelBase<T> {\n   *     readonly $rc: ResourceControl<T>;\n   *   }\n   * }\n   *\n   * export interface StatefulActiveRecordCollection<T> extends TDMCollection<T>, TDMModel<StatefulActiveRecordCollection<T>> { }\n   *\n   * declare module '@tdm/core/tdm/src/model/tdm-collection' {\n   *   interface TDMCollection<T> {\n   *     readonly $rc: ResourceControl<StatefulActiveRecordCollection<T>>;\n   *   }\n   * }\n   * ```\n   *\n   * If not set (falsy expression) the resource control instance can not be accessed directly from the model instance.\n   * > It is still accessible through ResourceControl.get(modelInstance);\n   *\n   * @default undefined\n   */\n  resourceControl?: string | false | undefined | null;\n\n  /**\n   * Enable active record actions on each model (save, delete, update etc..)\n   *\n   * @default true\n   */\n  enableActions?: boolean;\n}\n\nexport class ActiveRecordPlugin {\n  /**\n   * Init the plugin\n   * @param options ActiveRecordOptions\n   */\n  init(options: ActiveRecordOptions): void {\n    if (options.resourceControl) {\n      attachResourceControl(options.resourceControl);\n    }\n\n    if (\n      options.hasOwnProperty('enableActions') === false ||\n      options.enableActions === true\n    ) {\n      targetStore.on.processType(activeRecord);\n    }\n  }\n}\n\nPluginStore.register('ActiveRecord', ActiveRecordPlugin);\n\ndeclare module '@tdm/data/lib/fw/plugin' {\n  interface PluginStore {\n    /**\n     * @extension '@tdm/data/plugin/active-record'\n     */\n    readonly ActiveRecord: ActiveRecordPlugin;\n  }\n}\n","/*\n       * Public API Surface of mylib\n       */\nexport * from './lib/index';\n","import { PluginStore, ResourceControl, ResourceControlToken } from '@tdm/data';\nimport { MapperFactory } from '@tdm/core/tdm';\n\nimport { init } from './rc-ext';\n\ndeclare module '@tdm/data/lib/resource-control' {\n  interface ResourceControl<T> {\n    readonly hasSnapshot: boolean;\n    /**\n     * Reply the last operation.\n     * Busy state must be false and the resource should have been executed at least once (any action)\n     */\n    replay(): ResourceControl<T>;\n\n    /**\n     * Reply the last operation after the provided resources finish their current operation.\n     * This method will not invoke a `replay` for the provided resources, they are assumed in-flight or post-flight.\n     *\n     * For the current resource, the same rules that apply on `replay()` apply on `replayAfter`, i.e. the busy state\n     * must be false and the resource should have been executed at least once.\n     * @param resources\n     * @param ignoreError Whether to reply or not if an error is thrown from some or all of the resources.\n     * always: Always execute the reply operation\n     * some: Execute the reply operation if at least one item did not throw.\n     * never: Don't execute the reply operation if at least one item threw.\n     */\n    replayAfter(\n      resources: ResourceControlToken | ResourceControlToken[],\n      ignoreError?: 'always' | 'some' | 'never'\n    ): void;\n\n    /**\n     * Creates a snapshot of the current instance and stores it.\n     * Only one snapshot is stored per instance, if a new one is created the previous snapshot is overwriten.\n     * This snapshot is created using serialization which means that all `@Model()` and `@Prop()` rules apply.\n     *\n     * @param mapperFactory An optional [[MapperFactory]] to use, defaults to the mapper set for the model or\n     * [[directMapper]] if not set.\n     */\n    createSnapshot(mapperFactory?: MapperFactory): void;\n\n    /**\n     * Restores a previously created snapshot into the current instance (merge).\n     * If a snapshot does not exist it will not restore, nothing is thrown. (use hasSnapshot to check)\n     * Snapshot is removed after restoring.\n     * This snapshot is restored using deserialization which means that all `@Model()` and `@Prop()` rules apply.\n     *\n     * @param mapperFactory An optional [[MapperFactory]] to use, defaults to the mapper set for the model or\n     * [[directMapper]] if not set.\n     */\n    restoreSnapshot(mapperFactory?: MapperFactory): void;\n\n    /**\n     * Clone's (deep) the resource.\n     * This is a deep clone done using serialization -> deserialization, which means that all `@Model()` and `@Prop()`\n     * rules apply.\n     *\n     * @param mapperFactory An optional [[MapperFactory]] to use, defaults to the mapper set for the model or\n     * [[directMapper]] if not set.\n     */\n    clone(mapperFactory?: MapperFactory): T;\n  }\n}\n\nexport class ResourceControlFlowPlugin {\n  /**\n   * Init the plugin\n   * @param propertyName {string} ['@ar'] Optional, the property name to attach to the each model\n   */\n  init(): void {\n    init();\n  }\n}\n\nPluginStore.register('ResourceControlFlow', ResourceControlFlowPlugin);\n\ndeclare module '@tdm/data/lib/fw/plugin' {\n  interface PluginStore {\n    /**\n     * @extension '@tdm/data/plugin/rx-resource-control'\n     */\n    readonly ResourceControlFlow: ResourceControlFlowPlugin;\n  }\n}\n","import { TixinFree } from '@tdm/tixin';\nimport { MapperFactory } from '@tdm/core/tdm';\nimport {\n  autoSerialize,\n  autoDeserialize,\n  directMapper,\n  errors,\n  TDMCollection,\n  TDMModelBase\n} from '@tdm/core';\nimport {\n  ActionErrorResourceEvent,\n  ResourceControl,\n  ResourceControlToken\n} from '@tdm/data';\n\n/**\n *\n * ## Observables and `ActiveRecordState`\n * `ActiveRecordState` notification mechanism is based on observables.\n * This is great for UI interfaces but requires implementing tear down logic, that is unsubscribing\n * from stream. To help with that, all of the streams in `ActiveRecordState` are shared & lazy, they will only\n * register if accessed to and automatically disconnect when the number of subscribers is 0.\n *\n * You can also call `ActiveRecordState.disconnect()` to clear all subscriptions.\n *\n * When using an observable aware UI framework subscriptions managed by the framework so as long as\n * you don't manually subscribe you are safe. e.g: In Angular using the `async` pipe (`|`) will also\n * unsubscribe when the component get disposed.\n */\nexport class ResourceControlFlow<T> extends ResourceControl<T> {\n  get hasSnapshot(): boolean {\n    return !!this.snapshot;\n  }\n\n  protected snapshot: any;\n\n  /**\n   * Reply the last operation.\n   * Busy state must be false and the resource should have been executed at least once (any action)\n   */\n  replay(): ResourceControl<T> {\n    if (this.busy) {\n      errors.throw.model(this.parent, `Can not replay while busy.`);\n    }\n\n    if (!this.lastExecute) {\n      errors.throw.model(this.parent, `No replay data`);\n    }\n\n    const last = this.lastExecute;\n    if (TDMCollection.instanceOf(this.parent)) {\n      this.parent.splice(0, this.parent.length);\n    }\n\n    const result = last.ac.createExecFactory(last.action)(\n      this._mode === 'instance' ? this.parent : undefined,\n      last.params\n    );\n    return result === this.parent ? this : <any>ResourceControl.get(result);\n  }\n\n  /**\n   * Reply the last operation after the provided resources finish their current operation.\n   * This method will not invoke a `replay` for the provided resources, they are assumed in-flight or post-flight.\n   *\n   * For the current resource, the same rules that apply on `replay()` apply on `replayAfter`, i.e. the busy state must\n   * be false and the resource should have been executed at least once.\n   * @param resources\n   * @param ignoreError Whether to reply or not if an error is thrown from some or all of the resources.\n   * always: Always execute the reply operation\n   * some: Execute the reply operation if at least one item did not throw.\n   * never: Don't execute the reply operation if at least one item threw.\n   */\n  replayAfter(\n    resources: ResourceControlToken | ResourceControlToken[],\n    ignoreError: 'always' | 'some' | 'never' = 'never'\n  ): void {\n    if (this.busy) {\n      errors.throw.model(this.parent, `Can not replay while busy.`);\n    }\n\n    if (!this.lastExecute) {\n      errors.throw.model(this.parent, `No replay data`);\n    }\n\n    this.set('busy', true);\n\n    const arr: ResourceControlToken[] = Array.isArray(resources)\n      ? resources.slice()\n      : [resources];\n\n    let catcher: (err?: Error) => any | void;\n\n    switch (ignoreError) {\n      case 'always':\n        catcher = () => {}; // tslint:disable-line\n        break;\n      case 'some':\n        catcher = err => {\n          arr.pop();\n          if (arr.length === 0) {\n            throw err;\n          }\n        };\n        break;\n      default:\n        catcher = err => {\n          throw err;\n        };\n        break;\n    }\n\n    const flowControl = resource => {\n      const rc = ResourceControl.get(resource);\n      return rc.busy ? rc.next().catch(catcher) : Promise.resolve();\n    };\n\n    Promise.all(arr.map(flowControl))\n      .then(() => {\n        this.set('busy', false);\n        this.replay();\n      })\n      .catch(err => {\n        this.set('busy', false);\n        ResourceControl.emitEvent(\n          new ActionErrorResourceEvent(this.parent, err)\n        );\n      });\n  }\n\n  /**\n   * Creates a snapshot of the current instance and stores it.\n   * Only one snapshot is stored per instance, if a new one is created the previous snapshot is overwriten.\n   * This snapshot is created using serialization which means that all `@Model()` and `@Prop()` rules apply.\n   *\n   * @param mapperFactory An optional [[MapperFactory]] to use, defaults to the mapper set for the model or\n   * [[directMapper]] if not set.\n   */\n  createSnapshot(mapperFactory: MapperFactory = directMapper): void {\n    this.snapshot = autoSerialize(this.parent, mapperFactory);\n  }\n\n  /**\n   * Restores a previously created snapshot into the current instance (merge).\n   * If a snapshot does not exist it will not restore, nothing is thrown. (use hasSnapshot to check)\n   * Snapshot is removed after restoring.\n   * This snapshot is restored using deserialization which means that all `@Model()` and `@Prop()` rules apply.\n   *\n   * @param mapperFactory An optional [[MapperFactory]] to use, defaults to the mapper set for the model or\n   * [[directMapper]] if not set.\n   */\n  restoreSnapshot(mapperFactory: MapperFactory = directMapper): void {\n    if (this.hasSnapshot) {\n      autoDeserialize(\n        this.snapshot,\n        <any>this.parent.constructor,\n        this.parent,\n        mapperFactory\n      );\n      this.snapshot = undefined;\n    }\n  }\n\n  /**\n   * Clone's (deep) the resource.\n   * This is a deep clone done using serialization -> deserialization, which means that all `@Model()` and `@Prop()`\n   * rules apply.\n   *\n   * @param mapperFactory An optional [[MapperFactory]] to use, defaults to the mapper set for the model or\n   * [[directMapper]] if not set.\n   */\n  clone(mapperFactory: MapperFactory = directMapper): T {\n    return TDMModelBase.clone(this.parent, mapperFactory);\n  }\n}\n\nexport function init(): void {\n  TixinFree(ResourceControl, ResourceControlFlow, 'proto');\n}\n","/*\n       * Public API Surface of mylib\n       */\nexport * from './lib/index';\n","import { Observable } from 'rxjs/Observable';\nimport { PluginStore } from '@tdm/data';\n\nimport { init } from './rc-ext';\n\ndeclare module '@tdm/data/lib/resource-control' {\n  interface ResourceControl<T> {\n    busy$: Observable<boolean>;\n    self$: Observable<T>;\n    disconnect(): void;\n  }\n}\n\nexport class RxResourceControlPlugin {\n  /**\n   * Init the plugin\n   */\n  init(): void {\n    init();\n  }\n}\n\nPluginStore.register('RxResourceControl', RxResourceControlPlugin);\n\ndeclare module '@tdm/data/lib/fw/plugin' {\n  interface PluginStore {\n    /**\n     * @extension '@tdm/data/plugin/rx-resource-control'\n     */\n    readonly RxResourceControl: RxResourceControlPlugin;\n  }\n}\n","import { Observable } from 'rxjs/Observable';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\nimport { shareReplay } from 'rxjs/operators';\nimport { TixinFree } from '@tdm/tixin';\nimport { LazyInit, TDMModel } from '@tdm/core/tdm';\nimport {\n  ResourceEvent,\n  StateChangeResourceEvent,\n  ResourceControl\n} from '@tdm/data';\n\n/**\n *\n * ## Observables and `ActiveRecordState`\n * `ActiveRecordState` notification mechanism is based on observables.\n * This is great for UI interfaces but requires implementing tear down logic, that is unsubscribing\n * from stream. To help with that, all of the streams in `ActiveRecordState` are shared & lazy, they will only\n * register if accessed to and automatically disconnect when the number of subscribers is 0.\n *\n * You can also call `ActiveRecordState.disconnect()` to clear all subscriptions.\n *\n * When using an observable aware UI framework subscriptions managed by the framework so as long as\n * you don't manually subscribe you are safe. e.g: In Angular using the `async` pipe (`|`) will also\n * unsubscribe when the component get disposed.\n */\nexport class RxResourceControl<T> extends ResourceControl<T> {\n  /**\n   * An observable that emits a value every time the busy state changes.\n   */\n  @LazyInit(function(this: RxResourceControl<any>) {\n    return this._busySubject.pipe(shareReplay());\n  })\n  busy$: Observable<boolean>;\n\n  /**\n   * An observable that emits the resource (hence self) on every ActionSuccess event.\n   * If self is ActiveRecordCollection it will emit the collection property.\n   */\n  @LazyInit(function(this: RxResourceControl<any>) {\n    return this._selfSubject.pipe(shareReplay());\n  })\n  self$: Observable<TDMModel<T> & T>;\n\n  @LazyInit(function(this: ResourceControl<any>) {\n    return new BehaviorSubject<boolean>(this.busy);\n  })\n  private _busySubject: BehaviorSubject<boolean>;\n\n  @LazyInit(function(this: ResourceControl<any>) {\n    return new BehaviorSubject<T>(<any>this.parent);\n  })\n  private _selfSubject: BehaviorSubject<T>;\n\n  /**\n   * Disconnect all rx subscriptions\n   */\n  disconnect(): void {\n    // TODO: unsubscribing the subjects will throw when \"nexting\" them\n    // check if this approach does not leak\n    if (this.hasOwnProperty('_busySubject')) {\n      this._busySubject.observers.forEach(o => o.complete());\n    }\n    if (this.hasOwnProperty('_selfSubject')) {\n      this._selfSubject.observers.forEach(o => o.complete());\n    }\n  }\n\n  // workaround for https://github.com/Microsoft/TypeScript/issues/15892\n  // has a slight impact as it set's a property on the class.\n  private static _rx = ResourceControl.addEventListener(function rootHandler(\n    this: RxResourceControl<any>,\n    event: ResourceEvent\n  ): void {\n    if (event instanceof StateChangeResourceEvent) {\n      if (event.key === 'busy') {\n        this._busySubject.next(event.newVal);\n      }\n    } else if (event.type === 'ActionSuccess') {\n      this._selfSubject.next(this.parent);\n    }\n  });\n}\n\nexport function init(): void {\n  TixinFree(ResourceControl, RxResourceControl, 'proto');\n}\n","/*\n       * Public API Surface of mylib\n       */\nexport * from './lib/data';\n","import { TDMModel } from '@tdm/core';\nimport { DAOMethodType } from '../dao/index';\nimport { ResourceControl } from '../resource-control';\n\nexport interface ARMethodType {\n  $create: any;\n  $update: any;\n  $replace: any;\n  $remove: any;\n  $get: any;\n}\n\nexport type ARMethods = { [P in keyof ARMethodType]: any };\n\n/**\n * String enumeration of active record object methods\n */\nexport const ARMethods: ARMethodType = <any>{\n  // Keep this any, or 3rd party extending of ARMethodType will fail\n  $create: '$create',\n  $update: '$update',\n  $replace: '$replace',\n  $remove: '$remove',\n  $get: '$get'\n};\n\nexport type ARHookableMethods = keyof ARMethodType | keyof DAOMethodType;\n\nexport interface ARHookRule {\n  type: 'both' | 'static' | 'instance';\n}\n\nexport const ARHooks: { [P in ARHookableMethods]: ARHookRule } = {\n  $create: { type: 'instance' },\n  $update: { type: 'instance' },\n  $replace: { type: 'instance' },\n  $remove: { type: 'instance' },\n  $get: { type: 'instance' },\n\n  findById: { type: 'static' },\n\n  find: { type: 'static' },\n  findOne: { type: 'static' },\n\n  query: { type: 'static' },\n  findAll: { type: 'static' },\n\n  create: { type: 'static' },\n  update: { type: 'static' },\n  replace: { type: 'static' },\n  remove: { type: 'static' },\n\n  /**\n   * Clear the whole table representing a resource.\n   */\n  clear: { type: 'static' }\n};\n\nexport type ARInterface<T, Z> = TDMModel<T> &\n  { [P in keyof typeof ARMethods]: (options?: Z) => ResourceControl<T> };\n","import { isNumber, errors } from '@tdm/core/tdm';\nimport { ValidationContext } from './fw';\n\nconst undef = undefined;\n\nfunction isTypeof(value, type: any): boolean {\n  switch (type) {\n    case Boolean:\n      return typeof value === 'boolean';\n    case String:\n      return typeof value === 'string';\n    case Number:\n      return typeof value === 'number';\n    default:\n      return false;\n  }\n}\n\n/**\n * Validates that the value is declared on the object, i.e. hasOwnProperty\n * The value can be undefined, null or any other falsy expression.\n *\n */\nexport const declared = {\n  name: 'declared',\n  validate(ctx: ValidationContext): boolean {\n    return ctx.target.hasOwnProperty(ctx.member);\n  },\n  errorMessage(ctx: ValidationContext) {\n    return `Property ${ctx.member} is not declared`;\n  }\n};\n\n/**\n * Validates that the value is present, i.e. the value is not undefined and not null.\n */\nexport const required = {\n  name: 'required',\n  validate(ctx: ValidationContext): boolean {\n    return ctx.value !== undef && ctx.value !== null;\n  },\n  errorMessage(ctx: ValidationContext) {\n    return `Property ${ctx.member} is required`;\n  }\n};\n\n/**\n * Checks if the value is an instance of it's type.\n * If instanceOf check fails and the type is Boolean, String or Number and additional check is done\n * using the typeof operator.\n */\nexport const instanceOf = {\n  name: 'instanceOf',\n  validate(ctx: ValidationContext): boolean {\n    return ctx.value instanceof ctx.type || isTypeof(ctx.value, ctx.type);\n  },\n  errorMessage(ctx: ValidationContext) {\n    return `Property ${ctx.member} is not an instance of ${ctx.type.name}`;\n  }\n};\n\n/**\n * Validates that the value is greater than or equal to the minimum.\n * Does not validate that value is a number.\n */\nexport class Min {\n  readonly name = 'minimum';\n\n  constructor(private min: number) {\n    if (!isNumber(min)) {\n      errors.throw.validationConfig(this.name, 'input \"min\" is not a number');\n    }\n  }\n\n  validate(ctx: ValidationContext): boolean {\n    return ctx.value >= this.min;\n  }\n\n  errorMessage(ctx: ValidationContext) {\n    return `Property ${ctx.member} must be greater than or equal to ${\n      this.min\n    }`;\n  }\n}\n\n/**\n * Validates that the value is less than or equal to the maximum.\n * Does not validate that value is a number.\n */\nexport class Max {\n  readonly name = 'maximum';\n\n  constructor(private max: number) {\n    if (!isNumber(max)) {\n      errors.throw.validationConfig(this.name, 'input \"max\" is not a number');\n    }\n  }\n\n  validate(ctx: ValidationContext): boolean {\n    return ctx.value <= this.max;\n  }\n\n  errorMessage(ctx: ValidationContext) {\n    return `Property ${ctx.member} must be less than or equal to ${this.max}`;\n  }\n}\n\n/**\n * Validates that the value is between (but not equal to) the minimum and maximum.\n * Does not validate that value is a number.\n */\nexport class Between {\n  readonly name = 'between';\n\n  constructor(private min: number, private max: number) {\n    if (!isNumber(min)) {\n      errors.throw.validationConfig(this.name, 'input \"min\" is not a number');\n    }\n    if (!isNumber(max)) {\n      errors.throw.validationConfig(this.name, 'input \"max\" is not a number');\n    }\n  }\n\n  validate(ctx: ValidationContext): boolean {\n    return ctx.value > this.min && ctx.value < this.max;\n  }\n\n  errorMessage(ctx: ValidationContext) {\n    return `Property ${ctx.member} must be between ${this.min} and ${this.max}`;\n  }\n}\n\nexport const validators = {\n  declared,\n  required,\n  instanceOf,\n  Min,\n  Max,\n  Between\n};\n","import {\n  targetStore,\n  isFunction,\n  isJsObject,\n  errors,\n  TDMCollection,\n  TargetMetadata,\n  TDMModelBase\n} from '@tdm/core/tdm';\n\nimport {\n  dispatchEvent,\n  eventFactory,\n  CancellationTokenResourceEvent,\n  ExecuteInitResourceEvent\n} from '../events';\nimport { noop } from '../utils';\nimport {\n  AdapterMetadata,\n  ActionMetadata,\n  ValidationSchedule\n} from '../metadata';\nimport {\n  AdapterStatic,\n  ActionOptions,\n  Adapter,\n  ExecuteResponse,\n  ARHookableMethods\n} from '../fw';\n\nimport { ResourceControl } from '../resource-control';\nimport { ExecuteContext, ExecuteParams } from './execute-context';\n\ninterface ExecuteState {\n  id?: any;\n  rc?: ResourceControl<any>;\n  wasBusy?: boolean;\n  cancelled?: boolean;\n  request?: any;\n  postReturnsResult?: any;\n}\n\nexport class ActionController<T = any, Z = any> {\n  public target: Z;\n  public adapter: Adapter<ActionMetadata, ActionOptions>;\n  readonly adapterMeta: AdapterMetadata;\n\n  constructor(\n    public targetMetadata: TargetMetadata<T, Z>,\n    public adapterClass: AdapterStatic<any, any>\n  ) {\n    this.target = targetMetadata.target;\n    // TODO: adapter can be shared for all targets\n    this.adapter = new adapterClass();\n\n    this.adapterMeta = targetStore.getAdapter(adapterClass);\n  }\n\n  createExecFactory<T>(\n    action: ActionMetadata,\n    ret: 'promise'\n  ): (self: T, params: ExecuteParams) => Promise<T>;\n  createExecFactory<T>(\n    action: ActionMetadata,\n    ret?: 'instance'\n  ): (self: T, params: ExecuteParams) => T;\n  createExecFactory<T>(\n    action: ActionMetadata,\n    ret?: 'instance' | 'promise'\n  ): (self: T, params: ExecuteParams) => T | Promise<T> {\n    const ac = this;\n    return function(self: T, params: ExecuteParams) {\n      return ac.execute(this.clone(self), params, <any>ret);\n    }.bind(new ExecuteContext(this.targetMetadata, action));\n  }\n\n  execute(\n    ctx: ExecuteContext<any>,\n    params: ExecuteParams,\n    ret: 'promise'\n  ): Promise<any>;\n  execute(\n    ctx: ExecuteContext<any>,\n    params: ExecuteParams,\n    ret?: 'instance'\n  ): any;\n  execute(\n    ctx: ExecuteContext<any>,\n    params: ExecuteParams,\n    ret?: 'instance' | 'promise'\n  ): any {\n    const action = ctx.action;\n    const args = params.args || [];\n\n    if (args.length < action.paramHint) {\n      args[action.paramHint - 1] = {};\n    }\n\n    // we keep alive any resource that returns an instance, which is AR.\n    const keepAliveResourceControl = ret !== 'promise';\n\n    // if the user opt in to force promise response, mark it\n    if (action.post && action.post.returns && ret !== 'promise') {\n      ret = 'promise';\n      // 'instance' is ActiveRecord but post process that also controls the return value is not longer 'instance'\n      // We must clone the instance otherwise it will create strange behaviour in `ResourceControl` (busy, _next, etc..)\n      ctx = ctx.clone();\n      if (ctx.instance) {\n        // TODO: instead of clone we can do Object.create(ctx.instance), should be b\n        ctx.setInstance(TDMModelBase.clone(ctx.instance));\n      }\n    }\n\n    const options = isFunction(action.pre) ? action.pre(ctx, ...args) : args[0];\n\n    if (!ctx.instance) {\n      ctx.setInstance();\n    }\n\n    // finally set the mode after the initial setup.\n    const promiseMode = ret === 'promise';\n\n    let eState: ExecuteState;\n\n    // TODO: move this to be part of the promise flow\n    const doFinally = () => {\n      eState.rc.set('busy', false);\n    };\n\n    // TODO:  fireEvent uses member name as Hook matcher, this requires member name to be one of\n    //        \"ARHookableMethods\", let user set the action method in ActionMetadata or something\n    //        - Also applied to fireEvent \"after\" below.\n    const promise = new Promise(resolve => setTimeout(resolve, 0))\n      .then(() => {\n        if (!!action.isCollection !== TDMCollection.instanceOf(ctx.instance)) {\n          throw errors.modelSingleCol(ctx.instance, action.isCollection);\n        } else if (eState.wasBusy) {\n          throw new Error('An action is already running');\n        }\n\n        dispatchEvent(eventFactory.actionStart(ctx.instance));\n\n        if (this.adapter.supports.cancel) {\n          dispatchEvent(\n            new CancellationTokenResourceEvent(ctx.instance, () =>\n              this.cancel(eState, ctx)\n            )\n          );\n        }\n      })\n      .then(() =>\n        this.fireHook(action.name as any, 'before', ctx.instance, options)\n      )\n      .then(() => this.validate('outgoing', action.validation, ctx))\n      .then(() => {\n        if (eState.cancelled === true) {\n          // this error will be omitted, its here to skip all the then's.\n          throw new Error('Cancelled');\n        }\n\n        const adapterResponse = this.adapter.execute(ctx, options, params);\n\n        eState.id = adapterResponse.id;\n        eState.request = adapterResponse.request;\n\n        // TODO: If user cancelled and the adapter does not throw an error on cancellation\n        //       this means that the promise chain will continue, need to fix it.\n        //       Need to create a promise flow where steps can be skipped\n        //       this also applies on the first 2 steps\n        return adapterResponse.response.then((response: ExecuteResponse) => {\n          if (isJsObject(response.data)) {\n            if (\n              response.skipDeserialize !== true ||\n              !action.post ||\n              !action.post.returns\n            ) {\n              ctx.deserialize(response.data);\n            }\n          }\n          if (action.post) {\n            eState.postReturnsResult = action.post.handler.apply(ctx.instance, [\n              response,\n              options\n            ]);\n          }\n\n          return (action.isCollection\n            ? Promise.resolve()\n            : this.validate('incoming', action.validation, ctx)\n          )\n            .then(() =>\n              this.fireHook(\n                action.name as any,\n                'after',\n                ctx.instance,\n                options,\n                response\n              )\n            )\n            .then(() => response);\n        });\n      })\n      .then((response: ExecuteResponse) => {\n        dispatchEvent(eventFactory.success(ctx.instance));\n        doFinally();\n        dispatchEvent(\n          eventFactory.actionEnd(\n            ctx.instance,\n            'success',\n            eState.request,\n            response.response\n          )\n        );\n        return action.post && action.post.returns\n          ? eState.postReturnsResult\n          : promiseMode && !isJsObject(response.data)\n            ? response.data\n            : ctx.instance;\n      })\n      .catch(error => {\n        if (eState.cancelled !== true) {\n          dispatchEvent(\n            eventFactory.error(ctx.instance, error, eState.request)\n          );\n          if (promiseMode) {\n            // rethrow if the user handles the promise\n            doFinally();\n            throw error;\n          }\n        }\n        doFinally();\n      });\n\n    // fired before the promise is returned to the user (the last param, async, is not set)\n    // this is important, because we must register the instance/promise for lookup's before the user can\n    // do ResourceControl.get(...)\n    dispatchEvent(\n      new ExecuteInitResourceEvent(\n        ctx.instance,\n        { ac: this, action, params },\n        ret,\n        promise,\n        keepAliveResourceControl\n      )\n    );\n\n    eState = {\n      rc: ResourceControl.get(ctx.instance)\n    };\n\n    // we only care about busy mode when working on an instance to prevent race conditions.\n    if (!promiseMode) {\n      eState.wasBusy = eState.rc.busy;\n    }\n    eState.rc.set('busy', true);\n\n    // TODO: implement timeout to protect from stale promises?\n    return promiseMode ? promise : ctx.instance;\n  }\n\n  private cancel(eState: ExecuteState, ctx: ExecuteContext<any>): void {\n    if (!eState.cancelled) {\n      eState.cancelled = true;\n      dispatchEvent(eventFactory.cancel(ctx.instance));\n      eState.rc.set('busy', false);\n      if (eState.id) {\n        this.adapter.cancel(eState.id);\n      }\n      dispatchEvent(\n        eventFactory.actionEnd(ctx.instance, 'cancel', eState.request)\n      );\n    }\n  }\n\n  private validate(\n    type: 'incoming' | 'outgoing',\n    validation: ValidationSchedule,\n    ctx: ExecuteContext<any>\n  ): Promise<void> {\n    if (type === validation || validation === 'both') {\n      return this.targetMetadata\n        .validate(ctx.instance)\n        .then((validationErrors: any) => {\n          if (validationErrors.length > 0) {\n            errors.throw.validation(ctx.instance, validationErrors);\n          }\n        });\n    } else {\n      return Promise.resolve();\n    }\n  }\n\n  private fireHook(\n    action: ARHookableMethods,\n    event: 'before' | 'after',\n    self: any,\n    options: ActionOptions,\n    ...args: any[]\n  ): Promise<void> {\n    const hookMetadata = this.targetMetadata.findHookEvent(action, event);\n\n    const fn = hookMetadata\n      ? hookMetadata.decoratorInfo.isStatic\n        ? this.target[hookMetadata.name]\n        : self[hookMetadata.name]\n      : noop;\n\n    return Promise.resolve(fn.apply(self, [options, ...args]));\n  }\n}\n","import {\n  TDMModel,\n  TDMCollection,\n  errors,\n  TargetMetadata,\n  MapperFactory\n} from '@tdm/core/tdm';\n\nimport { findProp } from '../utils';\nimport { defaultConfig } from '../default-config';\nimport { ActionMetadata } from '../metadata';\nimport { IdentityValueType } from '../fw';\n\n/**\n *\n */\nexport interface ExecuteParams<T = any> {\n  /**\n   * Data object supplied by the creator of this execution.\n   * This is a placeholder for an object that the creator of the execution can pass.\n   *\n   * For example, in:\n   * ```ts\n   * DAO.of(SomeAdapter, SomeTarget, { a: 'b' }).findById(12, 'abc');\n   * ```\n   *\n   * `factoryArgs` will be { a: 'b' }\n   *\n   */\n  factoryArgs?: T;\n\n  /**\n   * Arguments used when calling the action.\n   * These are the arguments that the user passed in runtime.\n   *\n   * For example, in:\n   * ```ts\n   * DAO.of(SomeAdapter, SomeTarget).findById(12, 'abc');\n   * ```\n   *\n   * `args` will be [12, 'abc']\n   */\n  args?: any[];\n}\n\n// TODO: TS 2.3 (set the instance type)\n// export class ExecuteContext<T = any, Z extends ActionMetadata = ActionMetadata> {\nexport class ExecuteContext<T extends ActionMetadata> {\n  /**\n   * Optional data, usually an action pre hook will use this to pass information to the adapter.\n   */\n  data?: any;\n\n  get targetMeta(): TargetMetadata {\n    return this.meta;\n  }\n\n  /**\n   * The instance representing this execution context.\n   *\n   * The instance not set, to set the instance use the setInstance() method.\n   * Note that calling any method in ExecuteContext that requires the instance (setIdentity, deserialize,\n   * serialize  etc...) will automatically init a new instance.\n   *\n   * This also mean that the instance can be set from an action's \"pre\" handler.\n   * An instance set must be an instance of the target or an instance of ActiveRecordCollection.\n   * (i.e. return true from the call to ExecuteContext#instanceOf)\n   */\n  get instance(): any {\n    // TODO: TS 2.3 TDMModel<T> | TDMCollection<T> {\n    return this._instance;\n  }\n\n  private get safeInstance(): TDMModel<any> | TDMCollection<any> {\n    return this._instance || (this.setInstance(), this._instance);\n  }\n\n  private _instance: TDMModel<any> | TDMCollection<any>;\n  private mapper: MapperFactory;\n\n  constructor(\n    private readonly meta: TargetMetadata,\n    public readonly action: T,\n    mapper?: MapperFactory\n  ) {\n    this.mapper =\n      this.mapper || findProp('mapper', defaultConfig, meta.model());\n  }\n\n  /**\n   * The the instance for this execution context.\n   * If no value supplied the instance set is a new instance or a new TDMCollection (based on the action)\n   * @param value\n   */\n  setInstance(value?: TDMModel<any> | TDMCollection<any>): void {\n    if (this._instance) {\n      throw new Error('Instance exists');\n    }\n\n    if (!value) {\n      value = this.meta.model().factory(this.action.isCollection);\n    } else if (!this.instanceOf(value)) {\n      throw new Error('Instance does not match type');\n    }\n\n    this._instance = value;\n  }\n\n  /**\n   * Returns true if an object is an instance of the target type of this execution context.\n   * The target type is ActionRecordCollection when the action of this execution context\n   * is true (ActionMetadata#isCollection) otherwise it is the target.\n   * @param obj\n   */\n  instanceOf(obj: any): boolean {\n    return this.action.isCollection\n      ? TDMCollection.instanceOf(obj)\n      : obj instanceof this.meta.target;\n  }\n\n  getIdentity(): IdentityValueType {\n    return this.safeInstance[this.meta.getIdentityKey()];\n  }\n\n  setIdentity(identity: IdentityValueType): void {\n    this.safeInstance[this.meta.getIdentityKey()] = identity;\n  }\n\n  /**\n   * Serialize the instance in this execution context.\n   */\n  serialize(): any {\n    return this.meta.serialize(this.mapper.serializer(this.safeInstance));\n  }\n\n  /**\n   * Deserialize an object into the instance of the current execution context.\n   * If an instance does not exist, it will be created on the fly.\n   * @param data\n   */\n  deserialize(data: any): void {\n    if (data) {\n      // only if exists (false, 0, '' and all falsy's === not exists)\n      const mapper = this.mapper.deserializer(data, this.meta.target);\n      const isColl = !!this.action.isCollection;\n\n      if (mapper.isCollection !== isColl) {\n        errors.throw.modelSingleCol(<any>this.safeInstance, isColl);\n      }\n\n      this.meta.deserialize(mapper, this.safeInstance);\n    }\n  }\n\n  /**\n   * Returns a context-free copy of the current execution context.\n   * The returned execution context does not contain the instance and/or data that existed in the source execution\n   * context.\n   */\n  clone(instance?: TDMModel<any> | TDMCollection<any>): ExecuteContext<T> {\n    const ctx = new ExecuteContext(this.meta, this.action, this.mapper);\n    if (instance) {\n      ctx.setInstance(instance);\n    }\n    return ctx;\n  }\n}\n","export { ActionController } from './action-controller';\nexport { ExecuteContext, ExecuteParams } from './execute-context';\n","import { targetStore, LazyInit, PropMetadata } from '@tdm/core/tdm';\nimport { Validator, ValidationError, ValidationContext } from '../fw';\n\n/**\n * @internal\n */\nexport interface CompiledValidation {\n  validators: Validator[];\n  prop: PropMetadata;\n}\n\n/**\n * @internal\n */\nexport function getInstructions(targetType: any): CompiledValidation[] {\n  // TODO: once @Validators are allowed (along with PropMetadata#Validators) aggregate here.\n  return targetStore\n    .getTargetMeta(targetType)\n    .getValues(PropMetadata)\n    .map(prop => ({\n      validators: prop.validation,\n      prop\n    }));\n}\n\nexport class TargetValidator {\n  /**\n   * @internal\n   */\n  @LazyInit(function(this: TargetValidator): CompiledValidation[] {\n    return getInstructions(this.targetType);\n  })\n  meta: CompiledValidation[];\n\n  constructor(private targetType: any) {}\n\n  validate(instance: any): Promise<ValidationError[]> {\n    const promises: Array<\n      Promise<{ context: ValidationContext; validators: Validator[] }>\n    > = [];\n    const meta = this.meta;\n\n    meta.forEach(p => {\n      const context = {\n        member: p.prop.name,\n        target: instance,\n        value: instance[p.prop.name],\n        type: p.prop.type.ref\n      };\n      const propValidations = p.validators.map(validator => {\n        return Promise.resolve(validator.validate(context)).then(\n          result => (!result ? validator : undefined)\n        );\n      });\n\n      const promise = Promise.all(propValidations).then(results => {\n        return {\n          context,\n          validators: results.filter(v => !!v)\n        };\n      });\n\n      promises.push(promise);\n    });\n\n    return Promise.all(promises).then(results =>\n      results.filter(r => r.validators.length > 0).map(r => {\n        return {\n          context: r.context,\n          errors: r.validators.reduce((prev, v) => {\n            prev[v.name] = v.errorMessage(r.context);\n            return prev;\n          }, {})\n        };\n      })\n    );\n  }\n}\n","import { isFunction, targetStore, errors, Constructor } from '@tdm/core/tdm';\n\nimport { AdapterStatic, ActionOptions, IdentityValueType } from '../fw';\nimport { DAOMethods, DAOContextSymbol, DAOContext } from './symbols';\n\nexport interface TargetDAO<T, Options extends ActionOptions> {\n  findById(id: IdentityValueType, options?: Options): Promise<T>;\n\n  find(options: Options): Promise<T>;\n  findOne(options: Options): Promise<T>;\n\n  query(options?: Options): Promise<T[]>;\n  findAll(options?: Options): Promise<T[]>;\n\n  create(instance: T, options?: Options): Promise<T | void>;\n  create(obj: Partial<T>, options?: Options): Promise<T | void>;\n\n  update(instance: T, options?: Options): Promise<T | void>;\n  update<T>(obj: Partial<T>, options?: Options): Promise<T | void>;\n\n  replace(instance: T, options?: Options): Promise<T | void>;\n  replace<T>(obj: Partial<T>, options?: Options): Promise<T | void>;\n\n  remove(instance: T, options?: Options): Promise<void>;\n  remove(id: IdentityValueType, options?: Options): Promise<void>;\n}\n\nexport interface AdapterDAO<Options extends ActionOptions> {\n  findById<T>(id: IdentityValueType, options?: Options): Promise<T>;\n\n  find<T>(options: Options): Promise<T>;\n  findOne<T>(options: Options): Promise<T>;\n\n  query<T>(options?: Options): Promise<T[]>;\n  findAll<T>(options?: Options): Promise<T[]>;\n\n  create<T>(instance: T, options?: Options): Promise<T | void>;\n  create<T>(obj: Partial<T>, options?: Options): Promise<T | void>;\n\n  update<T>(instance: T, options?: Options): Promise<T | void>;\n  update<T>(obj: Partial<T>, options?: Options): Promise<T | void>;\n\n  replace<T>(instance: T, options?: Options): Promise<T | void>;\n  replace<T>(obj: Partial<T>, options?: Options): Promise<T | void>;\n\n  remove<T>(instance: T, options?: Options): Promise<void>;\n  remove(id: IdentityValueType, options?: Options): Promise<void>;\n}\n\nexport class DAO {\n  findById<T>(\n    target: Constructor<T>,\n    id: IdentityValueType,\n    options?: ActionOptions\n  ): Promise<T> {\n    return this.run(target, 'findById', id, options);\n  }\n\n  find<T>(target: Constructor<T>, options: ActionOptions): Promise<T> {\n    return this.run(target, 'find', options);\n  }\n  findOne<T>(target: Constructor<T>, options: ActionOptions): Promise<T> {\n    return this.find(target, options);\n  }\n\n  query<T>(target: Constructor<T>, options?: ActionOptions): Promise<T[]> {\n    return this.run(target, 'query', options);\n  }\n  findAll<T>(target: Constructor<T>, options?: ActionOptions): Promise<T[]> {\n    return this.query(target, options);\n  }\n\n  create<T>(instance: T, options?: ActionOptions): Promise<T | void>;\n  create<T>(\n    target: Constructor<T>,\n    obj: Partial<T>,\n    options?: ActionOptions\n  ): Promise<T | void>;\n  create<T>(\n    target: Constructor<T> | T,\n    obj?: Partial<T> | ActionOptions,\n    options?: ActionOptions\n  ): Promise<T | void> {\n    return this.runTargetOrInstance(target, 'create', obj, options);\n  }\n\n  update<T>(instance: T, options?: ActionOptions): Promise<T | void>;\n  update<T>(\n    target: Constructor<T>,\n    obj: Partial<T>,\n    options?: ActionOptions\n  ): Promise<T | void>;\n  update<T>(\n    target: Constructor<T> | T,\n    obj?: Partial<T> | ActionOptions,\n    options?: ActionOptions\n  ): Promise<T | void> {\n    return this.runTargetOrInstance(target, 'update', obj, options);\n  }\n\n  replace<T>(instance: T, options?: ActionOptions): Promise<T | void>;\n  replace<T>(\n    target: Constructor<T>,\n    obj: Partial<T>,\n    options?: ActionOptions\n  ): Promise<T | void>;\n  replace<T>(\n    target: Constructor<T> | T,\n    obj?: Partial<T> | ActionOptions,\n    options?: ActionOptions\n  ): Promise<T | void> {\n    return this.runTargetOrInstance(target, 'replace', obj, options);\n  }\n\n  remove<T>(instance: T, options?: ActionOptions): Promise<void>;\n  remove<T>(\n    target: Constructor<T>,\n    id: IdentityValueType,\n    options?: ActionOptions\n  ): Promise<void>;\n  remove<T>(\n    target: Constructor<T> | T,\n    id?: IdentityValueType | ActionOptions,\n    options?: ActionOptions\n  ): Promise<void> {\n    return this.runTargetOrInstance(target, 'remove', id, options);\n  }\n\n  /**\n   * Clear the whole table representing a resource.\n   */\n  clear<T>(target: Constructor<T>): Promise<void> {\n    return this.run(target, 'clear');\n  }\n\n  private runTargetOrInstance(\n    target: Constructor<any> | any,\n    cmd: keyof typeof DAOMethods,\n    ...args: any[]\n  ): Promise<void> {\n    if (isFunction(target)) {\n      return this.run(target, cmd, ...args);\n    } else {\n      if (targetStore.hasTarget(target.constructor)) {\n        return this.run(<any>target.constructor, cmd, ...args);\n      }\n      // TODO: got down proto chain and search for target.\n    }\n\n    // TODO: normalize error.\n    return Promise.reject(new Error('Invalid input'));\n  }\n\n  private run(\n    target: Constructor<any>,\n    cmd: keyof typeof DAOMethods,\n    ...args: any[]\n  ): any {\n    if (!targetStore.hasTarget(target)) {\n      // TODO: normalize error.\n      return Promise.reject(new Error('Target does not exist'));\n    }\n\n    const meta = targetStore.getTargetMeta(target);\n    if (!meta.activeAdapter) {\n      return Promise.reject(errors.modelNoAdapter(target));\n    }\n\n    const action = targetStore.getAdapter(meta.activeAdapter).getDAOAction(cmd);\n\n    if (!action) {\n      return Promise.reject(errors.adapterNoAction(meta.activeAdapter, cmd));\n    }\n    return targetStore\n      .getAC(target, meta.activeAdapter)\n      .createExecFactory(action, 'promise')(undefined, { args });\n  }\n\n  /**\n   * Returns the DAO of an adapter, attached to a target.\n   * @param adapterClass\n   * @param target\n   * @param factoryArgs\n   * @returns\n   */\n  static of<T, Z, Options>(\n    adapterClass: AdapterStatic<any, Options>,\n    target: Z & Constructor<T>,\n    factoryArgs?: any\n  ): TargetDAO<T, Options> {\n    const clz = targetStore.getAdapter(adapterClass).DAOClass;\n    const daoCtx: DAOContext = {\n      target,\n      adapter: adapterClass,\n      factoryArgs\n    };\n    return Object.create(clz.prototype, {\n      [DAOContextSymbol]: { value: daoCtx }\n    });\n  }\n}\n","export * from './symbols';\nexport * from './dao';\n","import { Constructor } from '@tdm/core';\nimport { AdapterStatic } from '../fw';\n\n/**\n * @internal\n */\nexport const DAOContextSymbol = Symbol('DAO context prop');\n\nexport interface DAOContext<T = any> {\n  /**\n   * The target (resource) to use.\n   */\n  target: Constructor<any>;\n  /**\n   * The adapter to use.\n   */\n  adapter: AdapterStatic<any, any>;\n  /**\n   * Additional data to pass to the DAO.\n   */\n  factoryArgs?: T;\n}\n\nexport interface DAOMethodType {\n  findById: any;\n\n  find: any;\n  findOne: any;\n\n  query: any;\n  findAll: any;\n\n  create: any;\n  update: any;\n  replace: any;\n  remove: any;\n\n  /**\n   * Clear the whole table representing a resource.\n   */\n  clear: any;\n}\n\nexport type DAOMethods = { [P in keyof DAOMethodType]: any };\n\nexport const DAOMethods: DAOMethods = <any>{\n  // Keep this any, or 3rd party extending of DAOMethodType will fail\n  findById: 'findById',\n\n  find: 'find',\n  findOne: 'findOne',\n\n  query: 'query',\n  findAll: 'findAll',\n\n  create: 'create',\n  update: 'update',\n  replace: 'replace',\n  remove: 'remove',\n\n  /**\n   * Clear the whole table representing a resource.\n   */\n  clear: 'clear'\n};\n","export {\n  ActionMetadata,\n  ActionMetadataArgs,\n  ActionMethodType,\n  AdapterMetadata,\n  AdapterMetadataArgs,\n  AfterHook,\n  AutoIdentity,\n  BeforeHook,\n  BelongsTo,\n  BelongsToMetadata,\n  BelongsToMetadataArgs,\n  Exclude,\n  ExtendAction,\n  ExtendActionMetadata,\n  Hook,\n  HookMetadata,\n  HookMetadataArgs,\n  Identity,\n  Owns,\n  OwnsMetadata,\n  OwnsMetadataArgs,\n  Prop,\n  PreActionHandler,\n  PostActionHandler,\n  PostActionMetadata,\n  Relationship,\n  RelationshipType,\n  Resource,\n  ValidationContext,\n  ValidationError,\n  ValidationMetadataArgs,\n  ValidationSchedule,\n  Validator,\n  store\n} from './metadata/index';\n\nimport './transformation/index'; // extending @tdm/core\nexport * from './core/index';\n\nexport { validators } from './core-validators';\n\nexport {\n  ARInterface,\n  IdentityValueType,\n  AdapterResponse,\n  ExecuteResponse,\n  Adapter,\n  AdapterStatic,\n  ActionOptions,\n  plugins,\n  PluginStore\n} from './fw/index';\n\nexport {\n  isResourceEvent,\n  events$,\n  ResourceEventEmitter,\n  ResourceEventDispatcher,\n  ResourceEvent,\n  ResourceEventType,\n  ActionErrorResourceEvent,\n  ActionEndResourceEvent,\n  eventFactory,\n  StateChangeResourceEvent\n} from './events/index';\n\nexport { findProp, isSymbol, isTdmPropertyKey, promiser } from './utils/index';\n\n// re-export common types from core\nexport { Constructor, TDMModel, TDMModelBase, TDMCollection } from '@tdm/core';\n\nexport { DAO, AdapterDAO, TargetDAO, DAOMethodType } from './dao/index';\n\nexport { ResourceControl, ResourceControlToken } from './resource-control';\n","import {\n  TransformStrategy,\n  NamingStrategyConfig,\n  directMapper,\n  MapperFactory\n} from '@tdm/core/tdm';\n\nexport interface DefaultConfig {\n  mapper: MapperFactory;\n\n  /**\n   * How to treat an object when transforming it.\n   *\n   * inclusive - include all except explicitly excluded properties.\n   * exclusive - exclude all except explicitly included properties.\n   *\n   * Note that every member decorated with @Prop is included by default, so `exclusive` requires\n   * every member that you want to include to be decorated with @Prop\n   *\n   * ## exclusive vs inclusive:\n   * An exclusive strategy is strict hence predictable, this means:\n   *   - Reduce the change for error\n   *   - Better performance\n   *\n   * The cost is boilerplate, writing additional code.\n   *\n   *\n   * @optional\n   * @default 'inclusive'\n   */\n  transformStrategy: TransformStrategy | undefined;\n\n  /**\n   * A Default strategy for name conversion.\n   * Applied on all properties except those with explicit alias defined.\n   *\n   *\n   * ###EXAMPLE\n   * ```ts\n   * {\n   *  transformNameStrategy: {\n   *    incoming: (propertyName: string) => camelCase(propertyName),\n   *    outgoing: (propertyName: string) => snakeCase(propertyName)\n   *  }\n   * }\n   * ```ts\n   *\n   * The example above converts incoming server object properties to camel case (myProperty)\n   * and all outgoing client object properties to snake case (my_property)\n   *\n   * @optional\n   * @default undefined\n   */\n  transformNameStrategy: NamingStrategyConfig | undefined;\n}\n\nexport const defaultConfig: DefaultConfig = {\n  mapper: directMapper,\n  transformStrategy: 'inclusive',\n  transformNameStrategy: undefined\n};\n","// tslint:disable:max-classes-per-file\nimport { ResourceEventType, ResourceEventTypes } from './interfaces';\n\ndeclare module './interfaces' {\n  interface ResourceEventType {\n    ActionStart: ResourceEvent;\n    ActionError: ActionErrorResourceEvent;\n    ActionSuccess: ResourceEvent;\n    ActionEnd: ActionEndResourceEvent;\n    ActionCancel: ResourceEvent;\n  }\n}\n\nexport class ResourceEvent<T extends ResourceEventTypes = ResourceEventTypes> {\n  constructor(public readonly resource: any, public readonly type: T) {}\n}\n\nexport class ActionErrorResourceEvent extends ResourceEvent {\n  constructor(\n    public readonly resource: any,\n    public readonly error: Error,\n    public readonly request?: any,\n    public readonly response?: any\n  ) {\n    super(resource, 'ActionError');\n  }\n}\n\nexport class ActionEndResourceEvent extends ResourceEvent {\n  constructor(\n    public readonly resource: any,\n    public readonly result: 'success' | 'cancel',\n    public readonly request?: any,\n    public readonly response?: any\n  ) {\n    super(resource, 'ActionEnd');\n  }\n}\n\nexport const eventFactory = {\n  actionStart(resource: any) {\n    return new ResourceEvent(resource, 'ActionStart');\n  },\n  error(resource: any, err: Error, request?: any, response?: any) {\n    return new ActionErrorResourceEvent(resource, err, request, response);\n  },\n  cancel(resource: any) {\n    return new ResourceEvent(resource, 'ActionCancel');\n  },\n  success(resource: any) {\n    return new ResourceEvent(resource, 'ActionSuccess');\n  },\n  actionEnd(\n    resource: any,\n    result: 'success' | 'cancel',\n    request?: any,\n    response?: any\n  ) {\n    return new ActionEndResourceEvent(resource, result, request, response);\n  }\n};\n","import { ResourceEvent } from './events';\nimport { ResourceEventDispatcher, ResourceEventEmitter } from './interfaces';\nimport { SimpleEvents } from './simple-events';\n\nexport * from './interfaces';\nexport * from './events';\nexport * from './internal';\nexport * from './simple-events';\n\nexport let dispatcher: ResourceEventDispatcher;\nexport let events$: ResourceEventEmitter;\n\ndispatcher = events$ = new SimpleEvents();\n\n/**\n * Dispatch a resource control event.\n * These event's are fired to local listeners, not the user's listeners.\n * The local listeners will trigger user's listeners.\n *\n * @param event\n * @param async When not set, fire's the event sync within the current task.\n * When set to true the event is fired at the end of the current micro task\n * When set to a number, the even if fired as a macro task, after an amount of ms provided as the number.\n */\nexport function dispatchEvent(\n  event: ResourceEvent,\n  async?: number | true\n): void {\n  if (async >= 0) {\n    setTimeout(() => dispatcher.next(event), async);\n  } else if (async === true) {\n    Promise.resolve(null).then(() => dispatcher.next(event));\n  } else {\n    try {\n      dispatcher.next(event);\n    } catch (err) {} // tslint:disable-line:no-empty\n    // we don't want handler's error to interrupt the process, the handler should handle it's own errors.\n  }\n}\n\n/* An example of an rxjs based event system  */\n// import { Subject } from 'rxjs/Subject'\n// import 'rxjs/add/operator/share'; // TODO: move to no-side effect implementation\n// dispatcher = new Subject<ResourceEvent>();\n// events$ = (dispatcher as any).share();\n","import { ResourceEvent } from './events';\n\nexport interface ResourceEventType {}\n\nexport interface InternalResourceEventType {}\n\nexport type ResourceEventTypes = keyof (ResourceEventType &\n  InternalResourceEventType);\n\nexport interface ResourceEventDispatcher {\n  next(value?: ResourceEvent): void;\n}\n\nexport interface ResourceEventEmitter {\n  subscribe(next?: (value: ResourceEvent) => void): { unsubscribe(): void };\n}\n\nexport function isResourceEvent<T extends keyof ResourceEventType>(\n  type: T,\n  evt: ResourceEvent\n): evt is ResourceEventType[T] {\n  return type === evt.type;\n}\n","// tslint:disable:max-classes-per-file\nimport { InternalResourceEventType } from './interfaces';\nimport { ResourceEvent } from './events';\nimport { ActionController } from '../core';\nimport { ExecuteParams } from '../core/execute-context';\nimport { ActionMetadata } from '../metadata';\n\ndeclare module './interfaces' {\n  interface InternalResourceEventType {\n    $CancellationToken: CancellationTokenResourceEvent;\n    $ExecuteInit: ExecuteInitResourceEvent;\n    $StateChange: StateChangeResourceEvent;\n  }\n}\n\nconst internalError = Symbol('Internal Resource Error');\n\nexport function isInternalError(event: ResourceEvent): boolean {\n  return event[internalError] === true;\n}\n\n/**\n * Sends the cancellation token (function) so the listener (resource control) can cancel.\n *\n * @internal\n */\nexport class CancellationTokenResourceEvent extends ResourceEvent {\n  constructor(\n    public readonly resource: any,\n    public readonly cancel: () => void\n  ) {\n    super(resource, '$CancellationToken');\n    this[internalError] = true;\n  }\n}\n\n/**\n *\n * @internal\n */\nexport interface ExecuteInitResourceEventArgs {\n  ac: ActionController;\n  action: ActionMetadata;\n  params: ExecuteParams;\n}\n\n/**\n * @internal\n */\nexport class ExecuteInitResourceEvent extends ResourceEvent {\n  /**\n   * The promise that is used by the execution.\n   *\n   * A promise is always used, it is returned to the user when the execution run's in promise mode, otherwise it is\n   * instance mode and the instance is returned, yet the promise always exist.\n   *\n   * When working with DAO the returned value is the promise, which makes it impossible to track the resource control\n   * because the user does not get it back, the promise can be used to track the instance.\n   */\n  promise: Promise<any>;\n\n  /**\n   * True instructs the resource control to stay alive when the promise resolves.\n   * False will cause the resource control to destroy itself once the promise resolve.\n   */\n  keepAlive: boolean;\n  constructor(\n    public readonly resource: any,\n    public readonly data: ExecuteInitResourceEventArgs,\n    public readonly mode: 'promise' | 'instance',\n    promise: Promise<any>,\n    keepAlive: boolean\n  ) {\n    super(resource, '$ExecuteInit');\n    this[internalError] = true;\n    this.promise = promise;\n    this.keepAlive = keepAlive;\n  }\n}\n\n/**\n * @internal\n */\nexport class StateChangeResourceEvent extends ResourceEvent {\n  constructor(\n    public readonly resource: any,\n    public readonly key: string,\n    public readonly oldVal: any,\n    public readonly newVal: any\n  ) {\n    super(resource, '$StateChange');\n    this[internalError] = true;\n  }\n}\n","import { ResourceEvent } from './events';\nimport { ResourceEventDispatcher, ResourceEventEmitter } from './interfaces';\n\n/**\n * A simple event dispatcher and emitter, used as the default events implementation.\n * The API is minimal and somewhat shared with the observables API for extensibility.\n */\nexport class SimpleEvents\n  implements ResourceEventDispatcher, ResourceEventEmitter {\n  private listeners: Array<(value: ResourceEvent) => void> = [];\n\n  next(value: ResourceEvent): void {\n    const listeners = this.listeners.slice();\n    for (let l of listeners) {\n      l(value);\n    }\n  }\n\n  subscribe(next?: (value: ResourceEvent) => void): { unsubscribe(): void } {\n    this.listeners.push(next);\n    const unsubscribe = () => {\n      const idx = this.listeners.indexOf(next);\n      if (idx > -1) {\n        this.listeners.splice(idx, 1);\n      }\n    };\n\n    return { unsubscribe };\n  }\n\n  clear(): void {\n    this.listeners.splice(0, this.listeners.length);\n  }\n}\n","import { Errors, stringify } from '@tdm/core/tdm';\nimport { AdapterStatic, ValidationError } from './interfaces';\n\nconst pt = Errors.prototype;\n\ndeclare module '@tdm/core/tdm/lib/fw/errors' {\n  interface Errors {\n    validation(\n      model: any,\n      errors: ValidationError[]\n    ): Error & { errors: ValidationError[] };\n    validationConfig(validationName: string, message: string): Error;\n    modelNoAdapter(model: any): Error;\n    adapterNoAction(\n      adapterClass: AdapterStatic<any, any>,\n      action: string\n    ): Error;\n    plugin(pluginName: string, message: string): Error;\n    pluginMissing(pluginName: string): Error;\n    adapter(adapterClass: AdapterStatic<any, any>, message: string): Error;\n    adapterRegistered(\n      adapterClass: AdapterStatic<any, any>,\n      registeredIn?: any\n    ): Error;\n    adapterNotRegistered(\n      adapterClass: AdapterStatic<any, any>,\n      model?: any\n    ): Error;\n  }\n}\n\npt.modelNoAdapter = function modelNoAdapterError(\n  this: Errors,\n  model: any\n): Error {\n  return this.model(model, `No active adapter registered.`);\n};\n\npt.adapterNoAction = function adapterNoActionError(\n  this: Errors,\n  adapterClass: AdapterStatic<any, any>,\n  action: string\n): Error {\n  return this.adapter(adapterClass, `Action \"${action}\" is not registered.`);\n};\n\npt.validation = function validationError(\n  this: Errors,\n  model: any,\n  errors: ValidationError[]\n): Error & { errors: ValidationError[] } {\n  // TODO: print validation errors\n  return this.ERROR(`Validation Error [${stringify(model)}]`, { errors });\n};\n\npt.validationConfig = function validationConfigError(\n  this: Errors,\n  validationName: string,\n  message: string\n): Error {\n  return this.ERROR(\n    `Invalid validation configuration params for \"${validationName}\": ${message}`\n  );\n};\n\npt.plugin = function plugin(\n  this: Errors,\n  pluginName: string,\n  message: string\n): Error {\n  return this.ERROR(`Plugin Error [${pluginName}]: ${message}`);\n};\n\npt.pluginMissing = function plugin(this: Errors, pluginName: string): Error {\n  return this.plugin(pluginName, `Unknown or missing plugin`);\n};\n\npt.adapter = function adapter(\n  adapterClass: AdapterStatic<any, any>,\n  message: string\n): Error {\n  return this.ERROR(`Adapter Error [${stringify(adapterClass)}]: ${message}`);\n};\n\npt.adapterRegistered = function adapterRegistered(\n  adapterClass: AdapterStatic<any, any>,\n  registeredIn?: any\n): Error {\n  return this.adapter(\n    adapterClass,\n    `Adapter already registered${\n      registeredIn ? ` (in ${stringify(registeredIn)})` : ''\n    }`\n  );\n};\n\npt.adapterNotRegistered = function adapterNotRegistered(\n  adapterClass: AdapterStatic<any, any>,\n  model?: any\n): Error {\n  return this.adapter(\n    adapterClass,\n    `Adapter not registered${model ? ` (in ${stringify(model)})` : ''}`\n  );\n};\n","import './errors';\nexport * from './interfaces';\nexport * from './plugin';\n","export * from '../active-record/interfaces';\nexport * from '../metadata/meta-types/schema/interfaces';\n\nimport { ActionMetadata } from '../metadata';\nimport { ExecuteContext, ExecuteParams } from '../core/execute-context';\n\nexport interface AdapterResponse {\n  /**\n   * An id representing this call.\n   */\n  id: any;\n\n  response: Promise<ExecuteResponse>;\n\n  /**\n   * The raw request object\n   * This is optional, the type of the request changes between adapters.\n   */\n  request?: any;\n}\n\nexport interface ExecuteResponse {\n  /**\n   * The data object, this is the object that the library will deserialize into the instance.\n   */\n  data: any;\n\n  /**\n   * When set to true, the library will not deserialize the `data` object into the instance.\n   */\n  skipDeserialize?: boolean;\n\n  /**\n   * The raw response object\n   * This is optional, the type of the response changes between adapters.\n   */\n  response?: any;\n}\n\nexport interface ActionOptions {}\n\nexport interface AdapterStatic<\n  T extends ActionMetadata,\n  Z extends ActionOptions\n> {\n  new (): Adapter<T, Z>;\n  prototype: Adapter<T, Z>;\n}\n\nexport interface Adapter<T extends ActionMetadata, Z extends ActionOptions> {\n  supports: {\n    cancel: boolean;\n  };\n\n  /**\n   *\n   * @param ctx Context for the execution\n   * @param options The options supplied (after possible transformation from 'pre')\n   * @param args the arguments used to invoke the action\n   */\n  execute(\n    ctx: ExecuteContext<T>,\n    options: Z,\n    params: ExecuteParams\n  ): AdapterResponse;\n\n  cancel(id: any): void;\n}\n\nexport type IdentityValueType = string | number;\n","import { Constructor, errors } from '@tdm/core';\n\nexport interface PluginStatic extends Constructor<Plugin> {\n  prototype: Plugin;\n}\n\nexport interface Plugin {\n  init(options?: any): void;\n}\n\nexport class PluginStore {\n  private constructor() {}\n\n  assertPlugin(name: string) {\n    if (!this[name]) {\n      errors.throw.pluginMissing(name);\n    }\n  }\n\n  /**\n   * Register's a plugin in the store.\n   * The plugin is not initialized until the user invokes the init() method.\n   * @param name\n   * @param type\n   */\n  static register(name: string, type: PluginStatic): void {\n    if (PluginStore.prototype.hasOwnProperty(name)) {\n      throw new Error(`Plugin conflict \"${name}\"`);\n    }\n    Object.defineProperty(PluginStore.prototype, name, { value: new type() });\n  }\n}\n\nexport const plugins: PluginStore = Object.create(PluginStore.prototype);\n","export { Type, Prop, Exclude, Identity } from '@tdm/core';\nexport * from '../transformation';\n","export * from './meta-types';\n\nexport { store } from './store';\n\nexport * from './decorators';\n\nimport './set-action-metadata-helpers';\n","import {\n  isFunction,\n  isString,\n  DecoratorInfo,\n  BaseMetadata\n} from '@tdm/core/tdm';\n\nimport {\n  ExecuteResponse,\n  ActionOptions,\n  ValidationSchedule,\n  AdapterStatic\n} from '../../fw';\nimport { ExecuteContext } from '../../core';\n\nexport enum ActionMethodType {\n  /**\n   * Used to mark a method as local to the implementing adapter.\n   */\n  LOCAL,\n  READ,\n  CREATE,\n  REPLACE,\n  UPDATE,\n  DELETE\n}\n\nexport type PreActionHandler = (\n  ctx: ExecuteContext<any>,\n  ...args: any[]\n) => any;\n\n/**\n * The\n */\nexport type PostActionHandler = (\n  response: ExecuteResponse,\n  options: ActionOptions\n) => void;\nexport type PostActionMetadata = {\n  handler: PostActionHandler;\n  /**\n   * Override mode.\n   *\n   * When set to true the action, when invoked, will not return the instance of the model, instead it will return a\n   * promise to the return value of the handler.\n   *\n   * When setting returns to true the incoming data is not managed by the library (no deserialization).\n   * When called on an ActiveRecord instance the instance is cloned and the action will work on the clone and not the\n   * original instance this is why you SHOULD NOT return the instance when setting returns to true.\n   *\n   * This mode is useful for custom methods that does not return the instance itself but a different value, for example\n   * an action operation with an indicator (true/false)\n   *\n   * @default false\n   */\n  returns?: boolean;\n};\n\nexport interface ActionMetadataArgs<T = any> {\n  method: T;\n  /**\n   * Specify if the response is an array.\n   * A collection can only be set on static level actions.\n   * @optional\n   * @default false\n   */\n  isCollection?: boolean;\n\n  /**\n   * If set to true, the action is also set on the ActiveRecordCollection instance.\n   * Valid on if isCollection is true;\n   */\n  collInstance?: boolean;\n\n  /**\n   * A hook to update data and return the options.\n   * If not set the options is taken from the 1st arg.\n   */\n  pre?: PreActionHandler;\n\n  /**\n   * A hook that allow control over the response.\n   *\n   * The hook's handler signature is [[PostActionHandler]].\n   *\n   * > Note that the context (this) of the handler is the instance of the model.\n   *\n   * The hook has 2 modes: PASSIVE and ACTIVE\n   *\n   * >The default mode is PASSIVE.\n   *\n   * PASSIVE MODE:\n   * Hook used to manipulate values in the response but does not control the structure.\n   * This mode allows updating the instance of the model before it is sent back to the user.\n   *\n   * The instance is created by the library which (optionally) deserialize the response and then the hooks can update\n   * the instance before it is serialized and sent to the user.\n   *\n   * > Optionally deserialize because the action might instruct not to, use ExecuteResponse.skipDeserialize to detect\n   * this.\n   *\n   * ACTIVE MODE:\n   * Hook used to change the response returned from the execution of the action.\n   *\n   * An execution returns one of 2: The instance of the model it \"executes on\" OR a promise of...\n   *\n   * When using ACTIVE mode, the execution will (always) return a promise of the value returned by the post handler.\n   *\n   * ACTIVE mode allows execution of operations/actions that does not return a response matching the structure of\n   * the model attached to it.\n   *\n   * For example, In a virtual machines ,management application we have a `VirtualMachine` record which we store in a\n   * database but we can also use to invoke operations (RPC). The `stop()` method is an operation/action we want to\n   * define but it returns an object with some keys that is not related to the `VirtualMachine` and used to keep track\n   * of the shutdown. For that we need to use an ACTIVE post action handler so we return this object instead of the\n   * library thinking this object represents the `VierualMachine` model.\n   */\n  post?: PostActionHandler | PostActionMetadata;\n\n  validation?: ValidationSchedule;\n\n  /**\n   * An alias (or alias list) for methods names that reference this action.\n   *\n   * > The library will create a reference to the action methods for each alias in the list.\n   */\n  alias?: string | string[];\n\n  /**\n   * Declare the number of parameters that the action accepts.\n   * When set, if the number of params is less then the hint an empty option object is added at the\n   * hint location.\n   *\n   * The library assumes that the last parameter in an action method signature is the option object.\n   *\n   * > The value is the length, not last index.\n   *\n   *\n   * > This will eliminate the need to validate the options object on actions where options object is optional.\n   *\n   * If you are using other optional parameters or union types you will need to verify the options manually and do not\n   * define a hint. In such cases it is probably better to reconsider the implementation, remove parameters from the\n   * signature and put them in the options object.\n   */\n  paramHint?: number;\n}\n\nexport abstract class ActionMetadata extends BaseMetadata {\n  method: ActionMethodType;\n  isCollection: boolean | undefined;\n  collInstance: boolean | undefined;\n  pre?: PreActionHandler;\n  post?: PostActionMetadata;\n  validation: ValidationSchedule;\n  alias?: string[];\n  paramHint: number;\n\n  constructor(\n    public readonly metaArgs: ActionMetadataArgs<any>,\n    info: DecoratorInfo\n  ) {\n    super(info);\n\n    Object.assign(this, metaArgs);\n    if (metaArgs.post) {\n      if (isFunction(metaArgs.post)) {\n        this.post = { handler: metaArgs.post };\n      } else if (metaArgs.post && isFunction(metaArgs.post.handler)) {\n        this.post = metaArgs.post;\n      }\n    }\n    if (isString(metaArgs.alias)) {\n      this.alias = [metaArgs.alias];\n    }\n    this.paramHint = metaArgs.paramHint || 0;\n  }\n\n  /**\n   * The adapter class this action represents\n   */\n  static adapterClass: AdapterStatic<any, any>;\n}\n","import {\n  isFunction,\n  targetStore,\n  Constructor,\n  DecoratorInfo,\n  MetadataClassStatic,\n  MetaClass,\n  MetaClassMetadata,\n  MetaClassInstanceDetails\n} from '@tdm/core/tdm';\n\nimport { array } from '../../utils/index';\nimport { DAOMethods, DAOContext, DAOContextSymbol } from '../../dao/index';\nimport { ActionMetadata, ActionMetadataArgs } from './action';\n\nfunction unsupportedDAOCmd() {\n  // TODO: normalize error.\n  return Promise.reject(new Error(`DAO does not support this action`));\n}\n\nexport interface AdapterMetadataArgs {\n  actionMetaClass: MetadataClassStatic;\n  DAOClass: Constructor<any>;\n  /**\n   * The resource metadata class.\n   * If not set the metadata arguments are registered to the target metadata instance\n   */\n  resourceMetaClass?: MetadataClassStatic;\n}\n\n// this is here so we don't break the flow.\n// adapter meta is different then other meta's since it might get created before the meta is available\n// since metadata (actions) for the adapter might be set before the meta is created.\n// this workaround prevents the need for an adapter store, the meta is used as the store.\n// to support that we allow setting the metadata args in a later period.\n// the register() method is aware of that and knows how to handle this scenario.\n/** @internal */\nexport function factory(\n  this: MetaClassMetadata<AdapterMetadataArgs, AdapterMetadata>,\n  metaArgs: AdapterMetadataArgs,\n  target: Object,\n  info: DecoratorInfo\n): MetaClassInstanceDetails<AdapterMetadataArgs, AdapterMetadata> {\n  return <any>Object.assign(\n    this.constructor.prototype.factory.call(this, metaArgs, target, info),\n    { metaArgs }\n  );\n}\n\n/** @internal */\nexport function register(\n  this: MetaClassMetadata<AdapterMetadataArgs, AdapterMetadata>,\n  meta: MetaClassInstanceDetails<AdapterMetadataArgs, AdapterMetadata>\n): void {\n  const adapter = targetStore.getAdapter(meta.target);\n  Object.assign(adapter, meta['metaArgs']);\n\n  adapter.buildDAO();\n}\n\n@MetaClass<AdapterMetadataArgs, AdapterMetadata>({\n  allowOn: ['class'],\n  factory,\n  register\n})\nexport class AdapterMetadata {\n  actionMetaClass: MetadataClassStatic;\n  DAOClass: Constructor<any>;\n  resourceMetaClass?: MetadataClassStatic;\n\n  private actions = new Map<any, ActionMetadata[]>();\n\n  addAction(meta: ActionMetadata, target: Constructor<any>): void;\n  addAction(\n    meta: MetaClassInstanceDetails<ActionMetadataArgs, ActionMetadata>\n  ): void;\n  addAction(\n    meta:\n      | ActionMetadata\n      | MetaClassInstanceDetails<ActionMetadataArgs, ActionMetadata>,\n    target?: Constructor<any>\n  ): void {\n    if (!isFunction(target)) {\n      target = (<any>meta).target;\n      meta = (<any>meta).metaValue;\n    }\n    const actions = this.actions.get(target) || [];\n    actions.push(<any>meta);\n    this.actions.set(target, actions);\n  }\n\n  getDAOAction(key: string): ActionMetadata {\n    return this.actions.get(this.DAOClass).find(a => a.name === key);\n  }\n\n  getActions(...targets: any[]): ActionMetadata[] {\n    const metadataColl = targets.map(t => this.actions.get(t)).filter(t => !!t);\n    return array.flatten(metadataColl);\n  }\n\n  /**\n   * @internal\n   */\n  buildDAO(): void {\n    const actions = this.getActions(this.DAOClass);\n    const daoProto = this.DAOClass.prototype;\n\n    actions.forEach(action => {\n      if (action.decoratorInfo.isStatic) {\n        throw new Error('DAO can not define static actions.');\n      }\n\n      daoProto[action.name] = function(...args: any[]) {\n        const ctx: DAOContext = this[DAOContextSymbol];\n        return targetStore\n          .getAC(ctx.target, ctx.adapter)\n          .createExecFactory(action, 'promise')(undefined, {\n          args,\n          factoryArgs: ctx.factoryArgs\n        });\n      };\n\n      if (action.alias) {\n        action.alias.forEach(\n          alias => (daoProto[alias] = daoProto[action.name])\n        );\n      }\n    });\n\n    // set unsupported handlers for missing commands.\n    const keys = Object.keys(DAOMethods);\n    for (let key of keys) {\n      if (!daoProto[key]) {\n        daoProto[key] = unsupportedDAOCmd;\n      }\n    }\n  }\n}\n","import { MetaClass, DecoratorInfo } from '@tdm/core/tdm';\nimport { ActionMetadata, ActionMetadataArgs } from './action';\n\n@MetaClass<ActionMetadataArgs<any>, ExtendActionMetadata>({\n  allowOn: ['staticMember', 'member'],\n  extend: 'mergeMapArray',\n  register: 'array'\n})\nexport class ExtendActionMetadata extends ActionMetadata {\n  constructor(metaArgs: Partial<ActionMetadataArgs<any>>, info: DecoratorInfo) {\n    super(metaArgs as any, info);\n    Object.assign(this, metaArgs);\n  }\n}\n","import {\n  errors,\n  targetStore,\n  MapExt,\n  DecoratorInfo,\n  MetaClassInstanceDetails,\n  MetaClassMetadata,\n  MetaClass,\n  BaseMetadata\n} from '@tdm/core/tdm';\n\nimport { ARHookableMethods, ARHooks } from '../../fw';\n\nexport interface StoredHook {\n  before?: HookMetadata;\n  after?: HookMetadata;\n}\n\nexport interface HookMetadataArgs {\n  event: 'before' | 'after';\n  action: ARHookableMethods;\n}\n\n/** @internal */\nexport function factory(\n  this: MetaClassMetadata<HookMetadataArgs, HookMetadata>,\n  metaArgs: HookMetadataArgs,\n  target: Object,\n  info: DecoratorInfo,\n  key: TdmPropertyKey,\n  desc: PropertyDescriptor\n): MetaClassInstanceDetails<HookMetadataArgs, HookMetadata> {\n  const { action } = metaArgs;\n\n  if (!ARHooks.hasOwnProperty(action)) {\n    errors.throw.decorator(target, `Invalid hook '${action}'`, key);\n  }\n\n  const t = ARHooks[action].type;\n  if (info.isStatic ? t === 'instance' : t === 'static') {\n    errors.throw.decorator(\n      target,\n      `Hook '${action}' can only decorate ${t} methods`,\n      key\n    );\n  }\n  return this.constructor.prototype.factory.call(\n    this,\n    metaArgs,\n    target,\n    info,\n    key,\n    desc\n  );\n}\n\n/** @internal */\nexport function register(\n  this: MetaClassMetadata<HookMetadataArgs, HookMetadata>,\n  meta: MetaClassInstanceDetails<HookMetadataArgs, HookMetadata>\n): void {\n  const hook: StoredHook = { [meta.metaValue.event]: meta.metaValue };\n\n  const currHook =\n    targetStore.getMetaFor<any, StoredHook>(\n      meta.target,\n      HookMetadata,\n      meta.metaValue.action\n    ) || ({} as any);\n  targetStore.setMetaFor<any, StoredHook>(\n    meta.target,\n    HookMetadata,\n    meta.metaValue.action as any,\n    Object.assign(currHook, hook)\n  );\n}\n\n/** @internal */\nexport function extend(\n  from: Map<TdmPropertyKey, StoredHook>,\n  to: Map<TdmPropertyKey, StoredHook> | undefined\n): Map<TdmPropertyKey, StoredHook> {\n  if (!to) {\n    to = new Map<TdmPropertyKey, StoredHook>(from.entries());\n  } else {\n    // TODO: Refactor to support static/instance like ExtendAction in case 2 hooks with same prop name\n    MapExt.asKeyValArray(from).forEach(([k, hookFrom]) => {\n      if (!to.has(k)) {\n        to.set(k, hookFrom);\n      } else {\n        const hookTo = to.get(k);\n        Object.keys(hookFrom).forEach(event => {\n          if (!hookTo.hasOwnProperty(event)) {\n            hookTo[event] = hookFrom[event];\n          }\n        });\n      }\n    });\n  }\n\n  return to;\n}\n\n@MetaClass<HookMetadataArgs, HookMetadata>({\n  allowOn: ['staticMember', 'member'],\n  factory,\n  extend,\n  register\n})\nexport class HookMetadata extends BaseMetadata {\n  event: 'before' | 'after';\n  action: ARHookableMethods;\n\n  constructor(obj: HookMetadataArgs, info: DecoratorInfo) {\n    super(info);\n\n    this.event = obj.event;\n    this.action = obj.action;\n  }\n}\n","export * from './action';\nexport { ExtendActionMetadata } from './extend-action';\nexport { AdapterMetadata, AdapterMetadataArgs } from './adapter';\nexport * from './relations';\nexport { HookMetadata, HookMetadataArgs, StoredHook } from './hook';\nexport * from './schema';\n","import {\n  RelationMetadataArgs,\n  MetaClass,\n  RelationMetadata\n} from '@tdm/core/tdm';\n\nexport type BelongsToMetadataArgs = RelationMetadataArgs;\n\nexport interface OwnsMetadataArgs<T> {\n  foreignKey: keyof T;\n}\n\n@MetaClass<BelongsToMetadataArgs, BelongsToMetadata>({\n  inherit: RelationMetadata\n})\nexport class BelongsToMetadata extends RelationMetadata {}\n\n@MetaClass<OwnsMetadataArgs<any>, OwnsMetadata>({\n  inherit: RelationMetadata\n})\nexport class OwnsMetadata extends RelationMetadata {}\n\nexport type Relationship = BelongsToMetadata | OwnsMetadata;\nexport type RelationshipType = 'belongsTo' | 'hasMany' | 'hasOne';\n","import {\n  MapExt,\n  MetaClassInstanceDetails,\n  MetaClassMetadata,\n  isFunction,\n  setMetaHelper,\n  stringify,\n  targetStore\n} from '@tdm/core/tdm';\n\nimport { ActionMetadataArgs, ActionMetadata } from './meta-types';\n\nfunction register(\n  this: MetaClassMetadata<ActionMetadataArgs, ActionMetadata>,\n  meta: MetaClassInstanceDetails<ActionMetadataArgs<any>, ActionMetadata>\n): void {\n  if (!this.target.adapterClass) {\n    throw new Error(\n      `Class ${stringify(\n        this\n      )} must implement a static property 'adapterClass' that points to the Adapter it uses`\n    );\n  } else if (!isFunction(this.target.adapterClass.prototype.execute)) {\n    throw new Error(\n      `Class ${stringify(this)} points to an invalid Adapter class`\n    );\n  }\n  targetStore.setMetaFormFactory(meta);\n  targetStore.getAdapter(this.target.adapterClass).addAction(meta);\n}\n\nfunction extend(\n  from: Map<TdmPropertyKey, ActionMetadata>,\n  to: Map<TdmPropertyKey, ActionMetadata> | undefined,\n  meta\n): Map<TdmPropertyKey, ActionMetadata> {\n  MapExt.asValArray(from).forEach(v =>\n    targetStore.getAdapter(this.adapterClass).addAction(v, meta.to)\n  );\n\n  return to\n    ? // TODO: on mixins we override, on \"extends\" class we don't...\n      // this overrides at all times (wrong behaviour for class extends)\n      MapExt.mergeInto(to, from)\n    : new Map<TdmPropertyKey, ActionMetadata>(from.entries());\n}\n\nsetMetaHelper('register', 'actionMetadata', register);\nsetMetaHelper('extend', 'actionMetadata', extend);\n\ndeclare module '@tdm/core/tdm/lib/fw/metadata-framework/types' {\n  interface MetaClassRegisterHelpers {\n    actionMetadata(\n      this: MetaClassMetadata<ActionMetadataArgs, ActionMetadata>,\n      meta: MetaClassInstanceDetails<ActionMetadataArgs<any>, ActionMetadata>\n    ): void;\n  }\n\n  interface MetaClassExtendHelpers {\n    actionMetadata(\n      from: Map<TdmPropertyKey, ActionMetadata>,\n      to: Map<TdmPropertyKey, ActionMetadata> | undefined,\n      meta\n    ): Map<TdmPropertyKey, ActionMetadata>;\n  }\n}\n","import {\n  targetStore,\n  TDMModel,\n  TransformDir,\n  Constructor,\n  SerializeMapper,\n  DeserializeMapper\n} from '@tdm/core/tdm';\nimport { AdapterStatic } from '../fw';\n\nexport class Store {\n  protected constructor() {\n    // support for post instantiation mixins on the prototype (plugins) - don't use new.\n    Store.create(this);\n  }\n\n  getIdentityKey(target, direction?: TransformDir): string | undefined {\n    return targetStore.getIdentityKey(target, direction);\n  }\n\n  hasTarget(target: any): boolean {\n    return targetStore.hasTarget(target);\n  }\n\n  serialize(target: Constructor<any>, mapper: SerializeMapper): any {\n    return targetStore.serialize(target, mapper);\n  }\n\n  /**\n   * Deserialize and instance of \"DeserializeMapper\" into an instance of tge target supplied\n   * @param target\n   * @param mapper\n   * @returns\n   */\n  deserialize(\n    mapper: DeserializeMapper\n  ): TDMModel<any> | TDMModel<any>[] | undefined {\n    return targetStore.deserialize(mapper);\n  }\n\n  /**\n   * Deserialize and instance of \"DeserializeMapper\" into a plain object (object literal)\n   * @param mapper\n   */\n  deserializePlain(mapper: DeserializeMapper): any {\n    return targetStore.deserializePlain(mapper);\n  }\n\n  /**\n   * Search for a target registered in the repository by it's name.\n   * @see ModelMetadataArgs#resName\n   * @param name\n   */\n  findModel(name: string): any | undefined {\n    return targetStore.findTarget(name);\n  }\n\n  getModelName(target: any): string | undefined {\n    return targetStore.getTargetName(target);\n  }\n\n  /**\n   * Marks mixins as part of the functionality of a target, in a specific adapter.\n   * This will not apply the mixin, it's just metadata about he relation.\n   * @param target\n   * @param adapterClass\n   * @param mixins\n   */\n  markMixins(\n    target: any,\n    adapterClass: AdapterStatic<any, any>,\n    ...mixins: any[]\n  ): void {\n    targetStore.registerMixins(target, adapterClass, ...mixins);\n  }\n\n  /**\n   * Creates a new Store instance.\n   * @param instance optional, used internally\n   * @returns\n   */\n  static create(instance?: Store): Store {\n    const store: Store = instance || Object.create(Store.prototype);\n    return store;\n  }\n}\n\nexport const store = Store.create();\n","import { TDMModel, TDMModelBase, TDMCollection, errors } from '@tdm/core';\n\nimport {\n  events$,\n  ResourceEventDispatcher,\n  ResourceEventEmitter,\n  CancellationTokenResourceEvent,\n  ExecuteInitResourceEvent,\n  ExecuteInitResourceEventArgs,\n  StateChangeResourceEvent,\n  SimpleEvents,\n  ResourceEvent,\n  isResourceEvent,\n  isInternalError\n} from './events';\n\n// Weak map for private emitter\n// TODO: check perf, maybe symbols are \"less\" private but more performant\nconst privateDict = new WeakMap<any, ResourceControl<any>>();\n\nexport interface RecordControlState<T = any> {\n  busy: boolean;\n}\n\nexport type ResourceControlToken<T = any> = Promise<T> | T;\nexport type ResourceEventListener = (\n  this: ResourceControl<any>,\n  event: ResourceEvent\n) => void;\n\nconst handlers: ResourceEventListener[] = [];\n\n/**\n * An controller, state and notification interface for instances of TDM models.\n * Each model instance has a corresponding ResourceControl instance.\n *\n * To get the ResourceControl instance for a specific model instance call ResourceControl#get(modelInstance)\n *\n * > If you are using the `ActiveRecord` plugin you can also opt in to have a property on each model instance\n * that reference the ResourceControl instance.\n *\n * Notifications are stream of resource related events, derived from {@link ResourceEvent}.\n * Each event is bound to a resource instance, hence every event fired in a ResourceControl instance\n * is an event bound to the resource.\n *\n * The notification are passive lifecycle event, intended to be used by the consumer of a resource.\n * Passive hooks does not effect actions, they are used for state (UI) representation.\n *\n * For active lifecycle hooks, being able to effect an action, use metadata life cycle hooks (`ActiveRecordHooks`)\n *\n */\nexport class ResourceControl<T> implements RecordControlState<T> {\n  /**\n   * A stream of `ResourceEvent` see `ResourceEventType` for possible events.\n   */\n  events$: ResourceEventEmitter;\n\n  /**\n   * Indicates if the active record is busy performing an action.\n   */\n  get busy(): boolean {\n    return this.state.busy;\n  }\n\n  protected dispatcher: ResourceEventDispatcher;\n  protected actionCancel: () => void;\n  protected lastExecute: ExecuteInitResourceEventArgs;\n  protected state: RecordControlState<T> = { busy: false };\n  protected _next: Promise<TDMModel<T> & T>;\n  protected _mode: 'promise' | 'instance';\n\n  protected constructor(public parent: TDMModel<T> & T) {\n    const eventSys = this.initEventSys();\n    this.dispatcher = eventSys.dispatcher;\n    this.events$ = eventSys.emitter;\n  }\n\n  /**\n   * Set a new state value\n   * @param key\n   * @param value\n   */\n  set<P extends keyof RecordControlState<T>>(\n    key: P,\n    value: RecordControlState<T>[P]\n  ): void {\n    if (this.state[key] !== value) {\n      const event = new StateChangeResourceEvent(\n        this.parent,\n        key,\n        this.state[key],\n        (this.state[key] = value)\n      );\n      ResourceControl.emitEvent(event);\n    }\n  }\n\n  /**\n   * Returns a promise, resolving on the next response from the current resource.\n   * Will throw is there is no active action for this resource (i.e. not busy)\n   * @returns\n   */\n  next(silent?: boolean): Promise<TDMModel<T> & T> {\n    if (this._mode === 'promise' && this._next) {\n      return this._next;\n    }\n    return Promise.resolve().then(() => {\n      if (!this.busy) {\n        return Promise.reject(\n          errors.model(\n            this.parent,\n            'Call to next() while not in an active action.'\n          )\n        );\n      } else {\n        return new Promise<TDMModel<T> & T>((resolve, reject) => {\n          const subs = this.events$.subscribe(event => {\n            if (isResourceEvent('ActionError', event)) {\n              reject(event.error);\n              subs.unsubscribe();\n            } else if (isResourceEvent('ActionEnd', event)) {\n              // TODO: ActionEnd is fired for both ActionSuccess and ActionCancel\n              // since promises does not cancel this is a design hole...\n              resolve(this._next || this.parent);\n              subs.unsubscribe();\n            }\n          });\n        });\n      }\n    });\n  }\n\n  /**\n   * Cancel the current action.\n   * Does not throw if no action is running.\n   */\n  cancel(): void {\n    if (this.busy && this.actionCancel) {\n      this.actionCancel();\n      this.actionCancel = undefined;\n    }\n  }\n\n  /**\n   * Initialize the event system, return the dispatcher and emitter\n   *\n   * Derived implementations can implement different mechanisms\n   */\n  protected initEventSys(): {\n    dispatcher: ResourceEventDispatcher;\n    emitter: ResourceEventEmitter;\n  } {\n    const simpleEvents = new SimpleEvents();\n    return { dispatcher: simpleEvents, emitter: simpleEvents };\n  }\n\n  static addEventListener(handler: ResourceEventListener): void {\n    handlers.push(handler);\n  }\n\n  static removeEventListener(handler: ResourceEventListener): boolean {\n    const idx = handlers.indexOf(handler);\n    if (idx > -1) {\n      handlers.splice(idx, 1);\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Returns a resource control for an instance of a resource.\n   * If it's an instance and a resource control does not exist it will create it.\n   * If it's a promise for a resource, will return it only if a resource was already created.\n   */\n  static get<T>(\n    instance: ResourceControlToken<T>\n  ): ResourceControl<T> | undefined {\n    let rc = privateDict.get(instance);\n    if (\n      !rc &&\n      (TDMModelBase.instanceOf(instance) || TDMCollection.instanceOf(instance))\n    ) {\n      privateDict.set(\n        instance,\n        (rc = new ResourceControl<any>(instance as any))\n      );\n    }\n    return rc;\n  }\n\n  /**\n   * Emits an `ResourceEvent` in the `ActiveRecordState#.$events` of a `BaseResource`\n   * @internal\n   * @param event\n   */\n  protected static emitEvent(event: ResourceEvent): void {\n    const rc = ResourceControl.get(event.resource);\n\n    for (let i = 0, len = handlers.length; i < len; i++) {\n      handlers[i].call(rc, event);\n    }\n\n    if (!isInternalError(event)) {\n      rc.dispatcher.next(event);\n    }\n  }\n\n  /* An IFFE that returns undefined. Workaround for https://github.com/Microsoft/TypeScript/issues/15892\n  It acts as a type initializer (not instance initializer), running after the type is created.\n  We run it inside the class because we need access to private/protected member.\n  it has a slight runtime impact as it set's a property on the class, a function invocation.\n  Although forcing runtime changes due to design time type restrictions is a bad practice it was still preferred because\n  the impact is minimal and type safety is extremely important in such low level constructs, I like to think of this as\n  a virtual runtime assertion.\n  */\n  private static _ = (() => {\n    events$.subscribe(ResourceControl.emitEvent);\n    ResourceControl.addEventListener(function rootHandler(\n      this: ResourceControl<any>,\n      event: ResourceEvent\n    ): void {\n      if (event instanceof CancellationTokenResourceEvent) {\n        this.actionCancel = event.cancel;\n      } else if (event instanceof ExecuteInitResourceEvent) {\n        mapPromiseAndKeepAlive(this, event);\n        this.lastExecute = event.data;\n        this._next = event.promise;\n        this._mode = event.mode;\n      } else {\n        switch (event.type) { // tslint:disable-line\n          case 'ActionError':\n          case 'ActionEnd':\n            this.actionCancel = undefined;\n            this._next = undefined;\n            break;\n        }\n      }\n    });\n  })();\n}\n\nfunction mapPromiseAndKeepAlive(\n  resourceControl: ResourceControl<any>,\n  event: ExecuteInitResourceEvent\n): void {\n  privateDict.set(event.promise, resourceControl);\n  const doFinally = function x(this: ExecuteInitResourceEvent) {\n    privateDict.delete(event.promise);\n    if (!event.keepAlive) {\n      privateDict.delete(event.resource);\n    }\n  }.bind(event);\n  event.promise.then(doFinally, doFinally);\n}\n","import { Identity } from '@tdm/core';\nimport {\n  targetStore,\n  ModelMetadataArgs,\n  RelationMetadataArgs, // RelationMetadataArgs - leave to satisfy angular compiler\n  ModelMetadata,\n  MetaClass\n} from '@tdm/core/tdm';\n\nimport { ExecuteResponse, ARHookableMethods } from '../fw';\nimport {\n  HookMetadata,\n  ExtendActionMetadata,\n  BelongsToMetadata,\n  OwnsMetadata,\n  ActionMetadataArgs, // ActionMetadataArgs - leave to satisfy angular compiler\n  OwnsMetadataArgs, // OwnsMetadataArgs - leave to satisfy angular compiler\n  HookMetadataArgs // HookMetadataArgs - leave to satisfy angular compiler\n} from '../metadata';\n\nimport { Adapter } from '../fw';\n\n/* Workaround, see index.ts in this directory */\nimport './meta-class';\nimport './target-store';\nimport './target-metadata';\nimport './prop';\nimport './relations';\nimport './mixins';\n\n// TODO: this is a workaround to allow registering Models with no adapter so `onProcessType` event\n// fires, need to fire the build event even if no adapter is set, this requires refactoring.\nexport class NoopAdapter implements Adapter<any, any> {\n  supports = { cancel: false };\n  execute(ctx: any, options: any): any {\n    return { id: 1, response: Promise.resolve(undefined) };\n  }\n  cancel(id: number): void {}\n}\n\ntargetStore.registerAdapter(NoopAdapter, {\n  actionMetaClass: <any>class {},\n  DAOClass: class {},\n  resourceMetaClass: ModelMetadata\n});\n\ndeclare module '@tdm/core/tdm/lib/add/model/model' {\n  interface ModelMetadata {\n    autoGenIdentity?: boolean;\n  }\n}\n\nexport function AutoIdentity(): Function {\n  return (target: Object, key: TdmPropertyKey) => {\n    Identity()(target, key);\n    const model = (targetStore\n      .getTargetMeta(<any>target.constructor)\n      .model().autoGenIdentity = true);\n  };\n}\n\nconst _Resource = MetaClass.get(ModelMetadata).createResourceDecorator(\n  NoopAdapter\n); // FOR AOT\n/**\n * A Resource with a NOOP adapter.\n * @classDecorator\n * @param metaArgs\n */\nexport function Resource(metaArgs: ModelMetadataArgs) {\n  return _Resource(metaArgs) as any;\n}\n\n/**\n * @propertyDecorator instance\n * @param metaArgs\n */\nexport const ExtendAction = MetaClass.decorator(ExtendActionMetadata);\n\n/**\n * @propertyDecorator instance\n * @param def\n */\nexport const BelongsTo = MetaClass.decorator(BelongsToMetadata, true);\n\n/**\n * @propertyDecorator instance\n * @param def\n */\nexport const Owns = MetaClass.decorator(OwnsMetadata, true);\n\nexport const Hook = MetaClass.decorator(HookMetadata);\n\nexport function BeforeHook(action: ARHookableMethods) {\n  return Hook({ event: 'before', action });\n}\n\nexport function AfterHook(action: ARHookableMethods) {\n  return Hook({ event: 'after', action });\n}\n\nexport type BeforeHook<K extends string, Z> = {\n  [P in K]: (options: Z) => void | Promise<void>\n};\nexport type AfterHook<K extends string, Z> = {\n  [P in K]: (options: Z, rawResponse: ExecuteResponse) => void | Promise<void>\n};\n","/* For some reason, in test (jest) these will execute after the export statement, causing an error */\n/* to workaround that the imports are now in the decorators.ts file. */\n\n// import './target-store'\n// import './target-metadata';\n// import './prop';\n// import './relations';\n// import './resource';\n// import './mixins';\n\nexport * from './decorators';\n","import {\n  targetStore,\n  stringify,\n  isFunction,\n  PropMetadata,\n  MetaClassMetadata,\n  ModelMetadataArgs,\n  ModelMetadata,\n  TDMModelBase\n} from '@tdm/core/tdm';\nimport { AdapterStatic } from '../fw';\n\ndeclare module '@tdm/core/tdm/lib/fw/metadata-framework/meta-class' {\n  interface MetaClassMetadata<TMetaArgs = any, TMetaClass = any, Z = any> {\n    createResourceDecorator(\n      adapterClass: AdapterStatic<any, any>\n    ): (def: TMetaArgs) => (target: Function) => any;\n  }\n}\n\nconst ADAPTER_REF = Symbol('Adapter Ref');\n\n/**\n * A Factory for Resource class decorators, the returned decorator will automatically register the\n * target & adapterType with the resource.\n * @param adapterClass\n */\nexport function resource<TMetaArgs extends ModelMetadataArgs>(\n  this: MetaClassMetadata<ModelMetadataArgs, ModelMetadata>,\n  adapterClass: AdapterStatic<any, any>\n): (metaArgs: TMetaArgs) => ClassDecorator {\n  const metaClass = this;\n\n  return function ResourceDecorator(metaArgs: TMetaArgs) {\n    return (target: any) => {\n      if (\n        targetStore.getAdapter(adapterClass).resourceMetaClass !==\n        metaClass.target\n      ) {\n        throw new Error(\n          `Adapter ${stringify(adapterClass)} resource metadata mismatch`\n        );\n      }\n\n      if (metaArgs.factory) {\n        console.warn('Model#factory can not be set in @tdm/data');\n        delete metaArgs.factory;\n      }\n\n      const TDMModel = TDMModelBase.factory(target);\n      TDMModel[ADAPTER_REF] = adapterClass;\n\n      // Creating ModelMetadata instance (or a derived class of ModelMetadata)\n      const modelMeta = metaClass.create(metaArgs || {}, target);\n      // targetStore.registerTarget(target);\n      const meta = targetStore.getTargetMeta(target);\n\n      // check for properties that set the type to self (same class)\n      // the class will point to the base class (target) that TDModel extends.\n      // this is fine if the user didn't set `typeGetter`, if he did we get TDModel\n      meta.getValues(PropMetadata).forEach(p => {\n        const desc = Object.getOwnPropertyDescriptor(p, 'type');\n\n        if (\n          desc &&\n          desc.configurable &&\n          isFunction(desc.get) &&\n          desc.get() === target\n        ) {\n          Object.defineProperty(p, 'type', {\n            configurable: true,\n            value: TDMModel\n          });\n        }\n      });\n\n      targetStore.registerTarget(TDMModel);\n      const tdmModelMeta = metaClass.extendSingle(modelMeta, undefined, {\n        from: target,\n        to: TDMModel\n      });\n\n      if (modelMeta.skip !== true) {\n        tdmModelMeta.build();\n      }\n\n      return TDMModel;\n    };\n  };\n}\n\nMetaClassMetadata.prototype.createResourceDecorator = resource;\n\ntargetStore.on.beforeProcessType(target => {\n  const tMeta = targetStore.getTargetMeta(target);\n  // default behaviour, register the first adapter, if multiple...\n  if (target[ADAPTER_REF]) {\n    if (!tMeta.activeAdapter) {\n      tMeta.setActiveAdapter(target[ADAPTER_REF]);\n    }\n  }\n});\n","import { ModelMetadata, TargetStore, SetExt, KeySet } from '@tdm/core/tdm';\nimport { AdapterStatic } from '../fw';\n\ndeclare module '@tdm/core/tdm/lib/add/model/model' {\n  interface ModelMetadata {\n    mixins: KeySet<AdapterStatic<any, any>, any>;\n  }\n}\n\ndeclare module '@tdm/core/tdm/lib/metadata/target-store' {\n  interface TargetStore {\n    /**\n     * Registers mixins to a target, under a specific adapter type.\n     * @param target\n     * @param adapterClass\n     * @param mixins\n     */\n    registerMixins(\n      target: any,\n      adapterClass: AdapterStatic<any, any>,\n      ...mixins: any[]\n    ): void;\n    getMixins(target: any, adapterClass: AdapterStatic<any, any>): Set<any>;\n    hasMixins(target: any, adapterClass: AdapterStatic<any, any>): boolean;\n  }\n}\n\n// const mixinCache = new Set<any>();\n//\n//\n// /**\n//  * For every mixins, go down the proto chain and extend the metadata.\n//  * @param mixin\n//  */\n// function extendMixin(mixin: any): void {\n//   if (!mixinCache.has(mixin)) {\n//     const chain = getProtoChain(mixin);\n//     if (chain[0] === mixin) chain.shift();\n//\n//     if (chain.length > 0) {\n//       for (let i=chain.length-1; i>0; i--) {\n//         if (!mixinCache.has(chain[i+1]) && targetStore.hasTarget(chain[i])) {\n//           targetStore.registerTarget(chain[i+1]);\n//           targetStore.extend(chain[i], chain[i+1]);\n//         }\n//       }\n//       targetStore.registerTarget(chain[0]);\n//       targetStore.registerTarget(mixin);\n//       targetStore.extend(chain[0], mixin);\n//     }\n//   }\n// }\n\nTargetStore.prototype.registerMixins = function registerMixins(\n  target: any,\n  adapterClass: AdapterStatic<any, any>,\n  ...mixins: any[]\n): void {\n  if (mixins.length > 0) {\n    const model = this.getTargetMeta(target).model();\n\n    let registered: KeySet<AdapterStatic<any, any>, any> = model.mixins;\n    if (!registered) {\n      model.mixins = registered = new KeySet<AdapterStatic<any, any>, any>();\n    }\n\n    const set = registered.has(adapterClass)\n      ? registered.get(adapterClass)\n      : registered.set(adapterClass);\n    SetExt.combine(set, mixins);\n\n    // seems to much, maybe a decorator will be better...\n    // mixins.forEach( m => extendMixin(m) );\n  }\n};\n\nTargetStore.prototype.getMixins = function getMixins(\n  target: any,\n  adapterClass: AdapterStatic<any, any>\n): Set<any> {\n  const model = this.getTargetMeta(target).model();\n  return (model.mixins && model.mixins.get(adapterClass)) || new Set<any>();\n};\n\nTargetStore.prototype.hasMixins = function hasMixins(\n  target: any,\n  adapterClass: AdapterStatic<any, any>\n): boolean {\n  const mixins = this.getTargetMeta(target).model().mixins;\n  const registered = mixins && mixins.get(adapterClass);\n  return registered && registered.size > 0;\n};\n","import {\n  isFunction,\n  PropMetadataArgs,\n  Constructor,\n  PropMetadata,\n  RelationMetadata,\n  targetStore\n} from '@tdm/core/tdm';\n\nimport { BelongsToMetadata, OwnsMetadata, RelationshipType } from '../metadata';\nimport { Validator } from '../fw';\n\ndeclare module '@tdm/core/tdm/lib/metadata/prop' {\n  interface PropMetadataArgs {\n    validation?: Validator | Validator[];\n  }\n\n  interface PropMetadata {\n    rel: RelationshipType;\n    validation: Validator[];\n    setCoreRelationship(rel: BelongsToMetadata | OwnsMetadata): void;\n  }\n}\n\nPropMetadata.prototype.setCoreRelationship = function(\n  rel: BelongsToMetadata | OwnsMetadata\n): void {\n  this.setRelationship(\n    new RelationMetadata({ foreignKey: rel.foreignKey }, rel.decoratorInfo)\n  );\n\n  if (rel instanceof BelongsToMetadata) {\n    this.rel = 'belongsTo';\n  } else {\n    this.rel = this.type.isArray ? 'hasMany' : 'hasOne';\n  }\n};\n\ntargetStore.on\n  .metaInit(PropMetadata)\n  .run(\n    (\n      target: Constructor<any>,\n      prop: PropMetadata,\n      metaArgs?: PropMetadataArgs\n    ) => {\n      if (!metaArgs) {\n        metaArgs = {};\n      }\n\n      prop.validation = Array.isArray(metaArgs.validation)\n        ? metaArgs.validation.slice()\n        : metaArgs.validation && isFunction(metaArgs.validation.validate)\n          ? [metaArgs.validation]\n          : [];\n    }\n  );\n","import { Constructor, targetStore } from '@tdm/core/tdm';\n\nimport { BelongsToMetadata, OwnsMetadata } from '../metadata';\n\ntargetStore.on.processType((target: Constructor<any>) => {\n  const meta = targetStore.getTargetMeta(target);\n\n  const identity = meta.getIdentityKey();\n  if (identity) {\n    meta.getCreateProp(identity);\n  }\n\n  [BelongsToMetadata, OwnsMetadata].forEach(relClass => {\n    meta.getValues(relClass).forEach(relation => {\n      // Its possible to set @Relation() without @Prop(), so make sure to create one if not set by the user.\n      const prop = meta.getCreateProp(relation.decoratorInfo);\n      prop.setCoreRelationship(relation);\n\n      // if the fk is a different key, attach a reference to the foreign key PropMetadata (and create one if not there)\n      if (relation.name !== relation.foreignKey) {\n        meta.getCreateProp(relation.foreignKey).foreignKeyOf = prop;\n      }\n    });\n  });\n});\n","import { Tixin } from '@tdm/tixin';\nimport {\n  errors,\n  getProtoChain,\n  LazyInit,\n  SetExt,\n  targetStore,\n  DecoratorInfo,\n  TargetMetadata,\n  TDMCollection,\n  Constructor\n} from '@tdm/core/tdm';\n\nimport { AdapterStatic, ARHookableMethods } from '../fw';\nimport {\n  ExtendActionMetadata,\n  HookMetadata,\n  ValidationError\n} from '../metadata';\nimport { ActionController } from '../core/action-controller';\nimport { TargetValidator } from '../core/target-validator';\n\nclass CoreTargetMetadata<T = any, Z = any> extends TargetMetadata<T, Z> {\n  collectionClass: typeof TDMCollection & Constructor<TDMCollection<T>>;\n\n  get activeAdapter(): AdapterStatic<any, any> | undefined {\n    return this._activeAdapter;\n  }\n\n  @LazyInit(function(this: CoreTargetMetadata): TargetValidator {\n    return new TargetValidator(this.target);\n  })\n  protected validator: TargetValidator;\n\n  @LazyInit(function(\n    this: CoreTargetMetadata\n  ): Map<AdapterStatic<any, any>, ActionController> {\n    return new Map<AdapterStatic<any, any>, ActionController>();\n  })\n  protected adapters: Map<AdapterStatic<any, any>, ActionController>;\n\n  private _activeAdapter: AdapterStatic<any, any>;\n\n  validate(instance: any): Promise<ValidationError[]> {\n    return this.validator.validate(instance);\n  }\n\n  findHook(\n    action: ARHookableMethods\n  ): { before: HookMetadata; after: HookMetadata } | undefined {\n    return this.config.get(HookMetadata, action);\n  }\n\n  findHookEvent(\n    action: ARHookableMethods,\n    event: 'before' | 'after'\n  ): HookMetadata | undefined {\n    const hook = this.getMetaFor(HookMetadata, action);\n    if (hook) {\n      return hook[event];\n    }\n  }\n\n  hasAdapter(adapterClass: AdapterStatic<any, any>): boolean {\n    return this.adapters.has(adapterClass);\n  }\n\n  isActive(adapterClass: AdapterStatic<any, any>): boolean {\n    return this._activeAdapter === adapterClass;\n  }\n\n  getAC(): ActionController | undefined;\n  getAC(\n    adapterClass: AdapterStatic<any, any>,\n    create?: boolean\n  ): ActionController | undefined;\n  getAC(\n    adapterClass?: AdapterStatic<any, any>,\n    create: boolean = true\n  ): ActionController | undefined {\n    if (!adapterClass) {\n      adapterClass = this.activeAdapter;\n    }\n    return (\n      this.adapters.get(adapterClass) ||\n      (create ? this.registerAdapter(adapterClass) : undefined)\n    );\n  }\n\n  getExtendingAction(info: DecoratorInfo): ExtendActionMetadata | undefined {\n    const arr = this.config.get(ExtendActionMetadata, info.name);\n    if (arr) {\n      return arr.find(\n        a => a.name === info.name && a.decoratorInfo.isStatic === info.isStatic\n      );\n    }\n  }\n\n  setActiveAdapter(adapter: AdapterStatic<any, any>): void {\n    this._activeAdapter = adapter;\n\n    this.getProtoChainWithMixins(this.target, adapter).forEach(proto => {\n      if (this.target !== proto && targetStore.hasTarget(proto)) {\n        targetStore.extend(proto, this.target);\n      }\n    });\n  }\n\n  private getProtoChainWithMixins(\n    target: Constructor<any>,\n    adapterClass: AdapterStatic<any, any>\n  ): Set<Constructor<any>> {\n    return getProtoChain(target).reduce((protoSet, proto) => {\n      protoSet.add(proto);\n      SetExt.combine(protoSet, targetStore.getMixins(proto, adapterClass));\n      return protoSet;\n    }, new Set<Constructor<any>>());\n  }\n\n  private registerAdapter(\n    adapterClass: AdapterStatic<any, any>\n  ): ActionController {\n    if (!targetStore.hasAdapter(adapterClass)) {\n      errors.throw.adapterNotRegistered(adapterClass, this.target);\n    } else if (this.adapters.has(adapterClass)) {\n      errors.throw.adapterRegistered(adapterClass, this.target);\n    } else {\n      return this.adapters\n        .set(adapterClass, new ActionController(this, adapterClass))\n        .get(adapterClass);\n    }\n  }\n}\n\ndeclare module '@tdm/core/tdm/lib/metadata/target-metadata' {\n  interface TargetMetadata {\n    collectionClass: typeof TDMCollection & Constructor<TDMCollection<any>>;\n\n    validate(instance: any): Promise<ValidationError[]>;\n\n    findHook(\n      action: ARHookableMethods\n    ): { before: HookMetadata; after: HookMetadata } | undefined;\n    findHookEvent(\n      action: ARHookableMethods,\n      event: 'before' | 'after'\n    ): HookMetadata | undefined;\n\n    hasAdapter(adapterClass: AdapterStatic<any, any>): boolean;\n\n    /**\n     * Checks if the adapter is the current adapter for this target\n     * @param adapterClass\n     */\n    isActive(adapterClass: AdapterStatic<any, any>): boolean;\n\n    /**\n     * Returns the action controller of the current (active) adapter on this target.\n     */\n    getAC(): ActionController | undefined;\n    /**\n     * Returns the  action controller of an adapter on this target.\n     */\n    getAC(\n      adapterClass: AdapterStatic<any, any>,\n      create?: boolean\n    ): ActionController | undefined;\n\n    getExtendingAction(info: DecoratorInfo): ExtendActionMetadata | undefined;\n\n    readonly activeAdapter: AdapterStatic<any, any>;\n    setActiveAdapter(adapter: AdapterStatic<any, any>): void;\n\n    extendFrom(store: this): void;\n  }\n}\n\nTixin(TargetMetadata, CoreTargetMetadata);\n\n// override core implementation to support type specific collection class\nTargetMetadata.prototype.createCollection = function(): TDMCollection<any> {\n  return this.collectionClass\n    ? new this.collectionClass()\n    : new TDMCollection();\n};\n","import { Tixin } from '@tdm/tixin';\nimport { Constructor, MetaClass, TargetStore } from '@tdm/core/tdm';\n\nimport { AdapterStatic } from '../fw';\nimport { ActionController } from '../core/action-controller';\nimport { AdapterMetadata, AdapterMetadataArgs } from '../metadata';\n\nclass CoreTargetStore extends TargetStore {\n  getAdapter(adapterClass: AdapterStatic<any, any>): AdapterMetadata {\n    return (\n      this.local<AdapterMetadata>(adapterClass) ||\n      (this.locals.add(adapterClass, new AdapterMetadata()),\n      this.getAdapter(adapterClass))\n    );\n  }\n\n  hasAdapter(adapterClass: AdapterStatic<any, any>): boolean {\n    return this.locals.has(adapterClass);\n  }\n\n  registerAdapter(\n    adapterClass: AdapterStatic<any, any>,\n    metaArgs: AdapterMetadataArgs\n  ): void {\n    MetaClass.get(AdapterMetadata).create(metaArgs, adapterClass);\n  }\n\n  getAC(target: Constructor<any>): ActionController | undefined;\n  getAC<T extends AdapterStatic<any, any>>(\n    target: Constructor<any>,\n    adapterClass: T\n  ): ActionController | undefined;\n  getAC<T extends AdapterStatic<any, any>>(\n    target: Constructor<any>,\n    adapterClass?: T\n  ): ActionController | undefined {\n    if (this.hasTarget(target)) {\n      return adapterClass\n        ? this.getTargetMeta(target).getAC(adapterClass)\n        : this.getTargetMeta(target).getAC();\n    }\n  }\n}\n\ndeclare module '@tdm/core/tdm/lib/metadata/target-store' {\n  interface TargetStore {\n    getAdapter(\n      adapterClass: AdapterStatic<any, any>\n    ): AdapterMetadata | undefined;\n    hasAdapter(adapterClass: AdapterStatic<any, any>): boolean;\n    registerAdapter(\n      adapterClass: AdapterStatic<any, any>,\n      metaArgs: AdapterMetadataArgs\n    ): void;\n\n    /**\n     * Returns the action controller of the current (active) adapter on this target.\n     */\n    getAC(target: Constructor<any>): ActionController | undefined;\n\n    /**\n     * Returns the  action controller of an adapter on this target.\n     */\n    getAC(\n      target: Constructor<any>,\n      adapterClass: AdapterStatic<any, any>\n    ): ActionController | undefined;\n  }\n}\nTixin(TargetStore as any, CoreTargetStore as any);\n","import { isString, isNumber } from '@tdm/core/tdm';\nexport * from './type-utils';\n\n/**\n * Search search each object in \"objects\", right to left, for a key and returns the value.\n * Fallback object must have the key.\n * @param key\n * @param fallback\n * @param objects\n * @returns\n */\nexport function findProp<T, P extends keyof T>(\n  key: P,\n  fallback: T,\n  ...objects: any[]\n): T[P] {\n  for (let i = objects.length - 1; i >= 0; i--) {\n    if (objects[i] && objects[i].hasOwnProperty(key)) {\n      return objects[i][key];\n    }\n  }\n  return fallback[key];\n}\n\nexport function isSymbol(obj: any): obj is symbol {\n  return typeof obj === 'symbol';\n}\n\nexport function isTdmPropertyKey(obj: any): obj is TdmPropertyKey {\n  return isString(obj) || isSymbol(obj) || isNumber(obj);\n}\n\nexport function noop(...args: any[]): void {}\n\n/**\n * returns an object with a promise, resolver and rejector.\n * @returns\n */\nexport function promiser<T>(): {\n  resolve: (result?: T) => void;\n  reject: (error: any) => void;\n  promise: Promise<T>;\n} {\n  let resolve: (result?: T) => void;\n  let reject: (error: any) => void;\n  let promise: Promise<T> = new Promise((res, rej) => {\n    resolve = res;\n    reject = rej;\n  });\n  return { resolve, reject, promise };\n}\n\nexport const array = (function() {\n  const scalar = v => !Array.isArray(v);\n\n  const flatten = (deep: any[][], flat: any[] = []) => {\n    if (deep.length === 0) return flat;\n    let [head, ...tail] = deep;\n    if (scalar(head)) {\n      return flatten(tail, flat.concat(head));\n    } else {\n      return flatten(tail, flat.concat(flatten(head)));\n    }\n  };\n\n  const findRemove = <T>(\n    arr: Array<T>,\n    predicate: (value: T) => boolean,\n    thisArg?: any\n  ): T | undefined => {\n    const idx = arr.findIndex(predicate, thisArg);\n    if (idx > -1) {\n      return arr.splice(idx, 1)[0];\n    }\n  };\n\n  return {\n    findRemove,\n    flatten<T>(array: Array<Array<T>>): Array<T> {\n      return flatten(array);\n    }\n  };\n})();\n","/*\n       * Public API Surface of mylib\n       */\nexport * from './lib/index';\n","/* tslint:disable:max-line-length */\nimport { Tixin, Type } from '@tdm/tixin';\nimport { targetStore, Constructor } from '@tdm/core/tdm';\nimport { TDMModel, store, plugins } from '@tdm/data';\nimport { HttpAdapter } from '../core';\nimport { HttpActiveRecord, HttpActiveRecordStatic } from './http-active-record';\n\n/* GENERATED BY scripts/generic_codegen.js */\nexport function ActiveRecord(): new (...args: any[]) => {};\nexport function ActiveRecord<Model, TypeofModel>(): Type<\n  Model & TDMModel<Model> & HttpActiveRecord\n> &\n  TypeofModel &\n  HttpActiveRecordStatic<Model> &\n  typeof HttpActiveRecord;\nexport function ActiveRecord<Model, TypeofModel>(\n  model: TypeofModel & Type<Model>\n): Type<Model & TDMModel<Model> & HttpActiveRecord> &\n  TypeofModel &\n  HttpActiveRecordStatic<Model> &\n  typeof HttpActiveRecord;\nexport function ActiveRecord<Model, TypeofModel, T1, C1>(\n  model: TypeofModel & Type<Model>,\n  m1: C1 & Type<T1>\n): Type<Model & HttpActiveRecord & T1> &\n  TypeofModel &\n  typeof HttpActiveRecord &\n  HttpActiveRecordStatic<Model> &\n  C1;\nexport function ActiveRecord<Model, TypeofModel, T1, C1, T2, C2>(\n  model: TypeofModel & Type<Model>,\n  m1: C1 & Type<T1>,\n  m2: C2 & Type<T2>\n): Type<Model & TDMModel<Model> & HttpActiveRecord & T1 & T2> &\n  TypeofModel &\n  typeof HttpActiveRecord &\n  HttpActiveRecordStatic<Model> &\n  C1 &\n  C2;\nexport function ActiveRecord<Model, TypeofModel, T1, C1, T2, C2, T3, C3>(\n  model: TypeofModel & Type<Model>,\n  m1: C1 & Type<T1>,\n  m2: C2 & Type<T2>,\n  m3: C3 & Type<T3>\n): Type<Model & TDMModel<Model> & HttpActiveRecord & T1 & T2 & T3> &\n  TypeofModel &\n  typeof HttpActiveRecord &\n  HttpActiveRecordStatic<Model> &\n  C1 &\n  C2 &\n  C3;\nexport function ActiveRecord<\n  Model,\n  TypeofModel,\n  T1,\n  C1,\n  T2,\n  C2,\n  T3,\n  C3,\n  T4,\n  C4\n>(\n  model: TypeofModel & Type<Model>,\n  m1: C1 & Type<T1>,\n  m2: C2 & Type<T2>,\n  m3: C3 & Type<T3>,\n  m4: C4 & Type<T4>\n): Type<Model & TDMModel<Model> & HttpActiveRecord & T1 & T2 & T3 & T4> &\n  TypeofModel &\n  typeof HttpActiveRecord &\n  HttpActiveRecordStatic<Model> &\n  C1 &\n  C2 &\n  C3 &\n  C4;\nexport function ActiveRecord<\n  Model,\n  TypeofModel,\n  T1,\n  C1,\n  T2,\n  C2,\n  T3,\n  C3,\n  T4,\n  C4,\n  T5,\n  C5\n>(\n  model: TypeofModel & Type<Model>,\n  m1: C1 & Type<T1>,\n  m2: C2 & Type<T2>,\n  m3: C3 & Type<T3>,\n  m4: C4 & Type<T4>,\n  m5: C5 & Type<T5>\n): Type<Model & TDMModel<Model> & HttpActiveRecord & T1 & T2 & T3 & T4 & T5> &\n  TypeofModel &\n  typeof HttpActiveRecord &\n  HttpActiveRecordStatic<Model> &\n  C1 &\n  C2 &\n  C3 &\n  C4 &\n  C5;\nexport function ActiveRecord<\n  Model,\n  TypeofModel,\n  T1,\n  C1,\n  T2,\n  C2,\n  T3,\n  C3,\n  T4,\n  C4,\n  T5,\n  C5,\n  T6,\n  C6\n>(\n  model: TypeofModel & Type<Model>,\n  m1: C1 & Type<T1>,\n  m2: C2 & Type<T2>,\n  m3: C3 & Type<T3>,\n  m4: C4 & Type<T4>,\n  m5: C5 & Type<T5>,\n  m6: C6 & Type<T6>\n): Type<\n  Model & TDMModel<Model> & HttpActiveRecord & T1 & T2 & T3 & T4 & T5 & T6\n> &\n  TypeofModel &\n  typeof HttpActiveRecord &\n  HttpActiveRecordStatic<Model> &\n  C1 &\n  C2 &\n  C3 &\n  C4 &\n  C5 &\n  C6;\nexport function ActiveRecord<\n  Model,\n  TypeofModel,\n  T1,\n  C1,\n  T2,\n  C2,\n  T3,\n  C3,\n  T4,\n  C4,\n  T5,\n  C5,\n  T6,\n  C6,\n  T7,\n  C7\n>(\n  model: TypeofModel & Type<Model>,\n  m1: C1 & Type<T1>,\n  m2: C2 & Type<T2>,\n  m3: C3 & Type<T3>,\n  m4: C4 & Type<T4>,\n  m5: C5 & Type<T5>,\n  m6: C6 & Type<T6>,\n  m7: C7 & Type<T7>\n): Type<\n  Model & TDMModel<Model> & HttpActiveRecord & T1 & T2 & T3 & T4 & T5 & T6 & T7\n> &\n  TypeofModel &\n  typeof HttpActiveRecord &\n  HttpActiveRecordStatic<Model> &\n  C1 &\n  C2 &\n  C3 &\n  C4 &\n  C5 &\n  C6 &\n  C7;\n\nexport function ActiveRecord<Model, TypeofModel, TMIXIN, CMIXIN>(\n  model?: TypeofModel & Type<Model>,\n  ...mixins: Array<CMIXIN & Type<TMIXIN>>\n): Type<Model & TDMModel<Model> & HttpActiveRecord & TMIXIN> &\n  HttpActiveRecordStatic<Model> &\n  TypeofModel &\n  typeof HttpActiveRecord &\n  CMIXIN {\n  plugins.assertPlugin('ActiveRecord'); // make sure plugin attached\n\n  if (!model) {\n    model = <any>class {};\n  }\n\n  /**\n   * Marking the mixin HttpActiveRecord for model.\n   * Since model is an extending class, it's type will be traversed and looked up for mixins\n   * so the deriving class (base) will get all the actions from the HttpActiveRecord\n   *\n   */\n  store.markMixins(model, HttpAdapter, HttpActiveRecord, ...mixins);\n\n  // we can't send ...mixin to Tixin since the type limits the ..mixins amount\n  const result = (Tixin as any)(model, HttpActiveRecord, ...mixins);\n\n  const tMeta = targetStore.getTargetMeta(result);\n  // if we have a model we are after the class decorator\n  if (tMeta.hasModel) {\n    tMeta.model().build(true);\n  }\n\n  return result as any;\n}\n\n/**\n * Creates an ActiveRecord type from a given type with all active record symbols embedded into the returned type.\n * This is the instance type, the class type (typeof ActiveRecord) is automatically set when calling the runtime\n * ActiveRecord function.\n *\n * When using ActiveRecord as an `extends` clause you must specify the types or they will not get embedded, if you\n * don't set the types you can use TypeOfActiveRecord to set it later.\n *\n */\nexport type ActiveRecord<Model> = Model & TDMModel<Model> & HttpActiveRecord;\n\n/**\n * Creates the type of the active record class, i.e. the static type, `typeof ActiveRecord`\n */\nexport type TypeOfActiveRecord<Model, TypeofModel> = Constructor<\n  ActiveRecord<Model>\n> &\n  TypeofModel &\n  HttpActiveRecordStatic<Model> &\n  typeof HttpActiveRecord;\n\n/* FOR TS 2.8+\nexport type TypeOfActiveRecord<T extends Constructor<any>> = Constructor<ActiveRecord<InstanceType<T>>> & T & HttpActiveRecordStatic<InstanceType<T>> & typeof HttpActiveRecord;\n\nUsage:\n@HttpResource({\n  endpoint: 'categories'\n})\nclass $Category extends ActiveRecord() implements modelContract.Category {\n  @Identity()\n  @UrlParam('id')\n  @Prop()\n  CategoryID: number;\n\n  @Prop()\n  CategoryName: string;\n}\n\n// export const Category: TypeOfActiveRecord<typeof $Category> = <any> $Category;\n// export type Category = InstanceType<typeof Category>;\n*/\n","import { Tixin } from '@tdm/tixin';\nimport {\n  TDMCollection as ARecordColl,\n  TDMModel,\n  IdentityValueType,\n  ExecuteContext,\n  ResourceControl\n} from '@tdm/data';\n\nimport { HttpActionOptions } from '../core/interfaces';\nimport { HttpActionMetadata, HttpActionMethodType } from '../metadata';\nimport { HttpAction } from '../decorators';\nimport { HttpDAOActions } from '../core/http-dao';\n\nexport class HttpActiveRecord {\n  @HttpAction({\n    method: HttpActionMethodType.Post,\n    validation: 'both' as 'both',\n    pre: (\n      ctx: ExecuteContext<HttpActionMetadata>,\n      options?: HttpActionOptions\n    ) => {\n      ctx.data = ctx.serialize();\n      return options;\n    }\n  })\n  $create: (options?: HttpActionOptions) => ResourceControl<this>;\n\n  @HttpAction({\n    method: HttpActionMethodType.Get,\n    validation: 'incoming' as 'incoming'\n  })\n  $get: (options?: HttpActionOptions) => ResourceControl<this>;\n\n  @HttpAction({\n    method: HttpActionMethodType.Put,\n    validation: 'both' as 'both',\n    pre: (\n      ctx: ExecuteContext<HttpActionMetadata>,\n      options?: HttpActionOptions\n    ) => {\n      ctx.data = ctx.serialize();\n      return options;\n    }\n  })\n  $update: (options?: HttpActionOptions) => ResourceControl<this>;\n\n  @HttpAction({\n    method: HttpActionMethodType.Patch,\n    validation: 'both' as 'both',\n    pre: (\n      ctx: ExecuteContext<HttpActionMetadata>,\n      options?: HttpActionOptions\n    ) => {\n      ctx.data = ctx.serialize();\n      return options;\n    }\n  })\n  $replace: (options?: HttpActionOptions) => ResourceControl<this>;\n\n  @HttpAction({\n    method: HttpActionMethodType.Delete,\n    validation: 'skip' as 'skip'\n  })\n  $remove: (options?: HttpActionOptions) => ResourceControl<this>;\n\n  @HttpDAOActions.query static query: (options?: HttpActionOptions) => any;\n  static findAll: (options?: HttpActionOptions) => any;\n\n  @HttpDAOActions.findById\n  static findById: (id: IdentityValueType, options?: HttpActionOptions) => any;\n\n  @HttpDAOActions.find static find: (options: HttpActionOptions) => any;\n  static findOne: (options: HttpActionOptions) => any;\n\n  @HttpDAOActions.create\n  static create: (data: any | Partial<any>, options?: HttpActionOptions) => any;\n\n  @HttpDAOActions.update\n  static update: (data: any | Partial<any>, options?: HttpActionOptions) => any;\n\n  @HttpDAOActions.replace\n  static replace: (\n    data: any | Partial<any>,\n    options?: HttpActionOptions\n  ) => any;\n\n  @HttpDAOActions.remove\n  static remove: ((\n    id: IdentityValueType | any,\n    options?: HttpActionOptions\n  ) => any);\n}\n\nexport const ActiveRecordCollection = ARecordColl;\nexport type ActiveRecordCollection<T> = ARecordColl<\n  Tixin<T, TDMModel<T> & HttpActiveRecord>\n> & { query: ActiveRecordCollection<T> };\n\nexport interface HttpActiveRecordStatic<T> {\n  findById(\n    id: IdentityValueType,\n    options?: HttpActionOptions\n  ): Tixin<T, TDMModel<T> & HttpActiveRecord>;\n\n  find(options: HttpActionOptions): Tixin<T, TDMModel<T> & HttpActiveRecord>;\n  findOne(options: HttpActionOptions): Tixin<T, TDMModel<T> & HttpActiveRecord>;\n\n  query(options?: HttpActionOptions): this & ActiveRecordCollection<T>;\n  findAll(options?: HttpActionOptions): this & ActiveRecordCollection<T>;\n\n  create(\n    data: T,\n    options?: HttpActionOptions\n  ): Tixin<T, TDMModel<T> & HttpActiveRecord>;\n  update(\n    data: Partial<T>,\n    options?: HttpActionOptions\n  ): Tixin<T, TDMModel<T> & HttpActiveRecord>;\n  replace(\n    data: Partial<T>,\n    options?: HttpActionOptions\n  ): Tixin<T, TDMModel<T> & HttpActiveRecord>;\n  remove(\n    id: IdentityValueType | T,\n    options?: HttpActionOptions\n  ): Tixin<T, TDMModel<T> & HttpActiveRecord>;\n}\n","export * from './http-active-record';\nexport * from './ar-mixin';\n","import { Subscription } from 'rxjs/Subscription';\nimport {\n  HttpParams,\n  HttpHeaders,\n  HttpResponse,\n  HttpClient\n} from '@angular/common/http';\nimport { isUndefined, stringify, TargetMetadata } from '@tdm/core/tdm';\n\nimport {\n  Adapter,\n  findProp,\n  ExecuteParams,\n  ExecuteContext,\n  AdapterResponse,\n  ExecuteResponse\n} from '@tdm/data';\n\nimport {\n  HttpResourceMetadata,\n  HttpActionMetadata,\n  UrlParamMetadata\n} from '../metadata';\n\nimport { HttpActionOptions, TrailingSlashesStrategy } from './interfaces';\nimport { HttpDefaultConfig } from '../http-default-config';\nimport { Params, getParamNames, formatPattern } from '../utils/match-pattern';\nimport { HttpActionMethodType } from '../metadata/method-mapper';\n\nexport interface HttpAdapterFactoryArgs {\n  httpClient: HttpClient;\n  defaultConfig: HttpDefaultConfig;\n}\n\nconst defaultFactoryArgs = {\n  value: undefined as HttpAdapterFactoryArgs\n};\n\nexport function setDefaultFactoryArgs(\n  args: HttpAdapterFactoryArgs\n): HttpAdapterFactoryArgs {\n  return (defaultFactoryArgs.value = args);\n}\n\nfunction getFactoryArgs(\n  params: ExecuteParams<HttpAdapterFactoryArgs>\n): HttpAdapterFactoryArgs {\n  const args: HttpAdapterFactoryArgs =\n    params.factoryArgs || defaultFactoryArgs.value;\n  if (!args) {\n    throw new Error(\n      'HttpClientResourceModule did not init, are you trying to invoke an action before the modules registered?'\n    );\n  }\n  return args;\n}\n\nexport class HttpAdapter\n  implements Adapter<HttpActionMetadata, HttpActionOptions> {\n  readonly supports = { cancel: true };\n\n  private executing = new Map<number, Subscription>();\n\n  private idCount = 1;\n\n  execute(\n    ctx: ExecuteContext<HttpActionMetadata>,\n    options: HttpActionOptions,\n    params: ExecuteParams<HttpAdapterFactoryArgs>\n  ): AdapterResponse {\n    const id = this.idCount++;\n    try {\n      const { httpClient, defaultConfig } = getFactoryArgs(params);\n\n      options = options || <any>{};\n\n      const { action } = ctx;\n\n      const resource = ctx.targetMeta.model<HttpResourceMetadata>();\n\n      if (!resource) {\n        throw new Error('Http resource not set.');\n      }\n\n      const rawUrl = parseRawUrl(resource, action, defaultConfig);\n      if (!rawUrl) {\n        // TODO: move to @tdm error with more info.\n        throw new Error('Invalid endpoint, no endpoint found.');\n      }\n\n      const withCredentials = findProp(\n        'withCredentials',\n        defaultConfig,\n        resource,\n        action,\n        options\n      );\n      const strip = findProp(\n        'trailingSlashes',\n        defaultConfig,\n        resource,\n        action,\n        options\n      );\n      const urlParams = this.getParams(\n        ctx,\n        ctx.targetMeta,\n        resource,\n        options,\n        defaultConfig\n      );\n\n      const { path, query } = this.splitParams(rawUrl, urlParams);\n\n      // TODO: this is legacy from `ngx-http`, refactor.\n      const method = HttpActionMethodType[\n        action.methodInfo.source\n      ].toUpperCase();\n      const url = processUrl(this.parseUrl(rawUrl, path), strip);\n      const request = {\n        method,\n        url,\n        body: ctx.data,\n        headers: this.getHeaders(ctx, resource, options, defaultConfig),\n        reportProgress: false, // its the default but let be verbose\n        observe: 'response',\n        params: this.paramsToSearchParams(query),\n        responseType: action.postResponseType || 'json',\n        withCredentials\n      } as {\n        body?: any;\n        headers?:\n          | HttpHeaders\n          | {\n              [header: string]: string | string[];\n            };\n        reportProgress?: boolean;\n        observe: 'response';\n        params?:\n          | HttpParams\n          | {\n              [param: string]: string | string[];\n            };\n        responseType?: 'json';\n        withCredentials?: boolean;\n      };\n      // TODO: TS complains on request so has to force type for it, check why\n\n      const response = new Promise<ExecuteResponse>((resolve, reject) => {\n        let httpResponse: HttpResponse<any>;\n        const subscription = httpClient\n          .request<any>(method, url, request)\n          .subscribe(\n            v => (httpResponse = v),\n            err => {\n              this.executing.delete(id);\n              reject(err);\n            },\n            () => {\n              this.executing.delete(id);\n              resolve({ data: httpResponse.body, response: httpResponse });\n            }\n          );\n\n        this.executing.set(id, subscription);\n      });\n      return { id, response, request };\n    } catch (err) {\n      return { id, response: Promise.reject(err) };\n    }\n  }\n\n  cancel(id: number): void {\n    const sub = this.executing.get(id);\n    if (sub && !sub.closed) {\n      sub.unsubscribe();\n    }\n  }\n\n  protected getHeaders(\n    ctx: ExecuteContext<HttpActionMetadata>,\n    resource: HttpResourceMetadata,\n    options: HttpActionOptions,\n    httpDefaultConfig: HttpDefaultConfig\n  ): HttpHeaders {\n    let headers = new HttpHeaders(\n      findProp('headers', httpDefaultConfig, resource, ctx.action)\n    );\n    if (options.headers) {\n      Object.keys(options.headers).forEach(k => {\n        if (isUndefined(options.headers[k])) {\n          headers = headers.delete(k);\n        } else {\n          headers = headers.set(k, options.headers[k]);\n        }\n      });\n    }\n    return headers;\n  }\n\n  protected getParams(\n    ctx: ExecuteContext<HttpActionMetadata>,\n    meta: TargetMetadata,\n    resource: HttpResourceMetadata,\n    options: HttpActionOptions,\n    httpDefaultConfig: HttpDefaultConfig\n  ): Params {\n    const params = Object.assign(\n      {},\n      findProp('urlParams', httpDefaultConfig, resource, ctx.action)\n    );\n\n    if (ctx.instance) {\n      // we don't care about the keys (properties) UrlParam is on...\n      // TODO: change how UrlParams are stored, instead of target->UrlParamMetadata->propName->Set<UrlParamMetadata>\n      // store everything in one set/array to avoid this messy extraction.\n      // an alternative is to cache the flattened array.\n      const boundParams = meta\n        .getValues<any, UrlParamMetadata[]>(UrlParamMetadata)\n        .reduce(\n          (arr, partial) => arr.concat(partial),\n          [] as UrlParamMetadata[]\n        );\n\n      for (let i = 0, len = boundParams.length; i < len; i++) {\n        const bp = boundParams[i];\n        if (\n          bp.methods.length === 0 ||\n          bp.methods.some(mi => mi.method === ctx.action.method)\n        ) {\n          params[bp.urlTemplateParamName] = ctx.instance[bp.name];\n        }\n      }\n    }\n\n    if (options.urlParams) {\n      Object.assign(params, options.urlParams);\n    }\n\n    return params;\n  }\n\n  protected parseUrl(url: string, params: Params): string {\n    try {\n      return formatPattern(url, params);\n    } catch (e) {\n      throw new Error(\n        `URL Parameter Error in ${stringify(this.constructor)}: ${e.message}`\n      );\n    }\n  }\n\n  /**\n   * From a collection of parameters return those belong to the url (path) and those that are not (query).\n   * @param url\n   * @param params\n   * @returns\n   */\n  protected splitParams(\n    url: string,\n    params: Params\n  ): { path: Params; query: Params } {\n    const pathParamNames = getParamNames(url);\n\n    return Object.keys(params).reduce(\n      (splitParams, key) => {\n        if (!isUndefined(params[key])) {\n          if (pathParamNames.indexOf(key) === -1) {\n            splitParams.query[key] = params[key];\n          } else {\n            splitParams.path[key] = params[key];\n          }\n        }\n        return splitParams;\n      },\n      { path: {}, query: {} }\n    );\n  }\n\n  private paramsToSearchParams(params: Params): HttpParams {\n    return new HttpParams({ fromObject: params });\n  }\n}\n\nfunction parseRawUrl(\n  resource: HttpResourceMetadata,\n  action: HttpActionMetadata,\n  defaultConfig: HttpDefaultConfig\n): string {\n  const urlParts = [\n    defaultConfig.baseUrl,\n    action.absolute !== true ? resource.endpoint : '',\n    action.endpoint\n  ];\n\n  let suffix = '';\n\n  const rawParts = [];\n  for (let part of urlParts) {\n    if (part) {\n      if (/^.+\\/$/.test(part)) {\n        suffix = '/';\n      }\n      const raw = part\n        .split('/')\n        .filter(p => !!p)\n        .map(u => u.replace(/\\/(.*(?:\\/))\\/*/, '$1'))\n        .filter(p => !!p);\n      rawParts.push(...raw);\n    }\n  }\n\n  // TODO: this can be moved to the action, cached there without recalc, only baseUrl might change\n  return '/' + rawParts.join('/') + suffix;\n}\n\nfunction processUrl(url: string, slashes: TrailingSlashesStrategy): string {\n  switch (slashes) {\n    case 'strip':\n      url = url.replace(/\\/+$/, '') || '/';\n      break;\n    case 'force':\n      if (url[url.length - 1] !== '/') {\n        url += '/';\n      }\n      break;\n    default:\n      break;\n  }\n\n  // E.g. `http://url.com/id./format?q=x` becomes `http://url.com/id.format?q=x`\n  return url.replace(/\\/\\.(?=\\w+($|\\?))/, '.').replace(/\\/\\\\\\./, '/.'); // replace escaped `/\\.` with `/.`\n}\n","import { isPrimitive } from '@tdm/core/tdm';\nimport { TargetDAO, IdentityValueType, ExecuteContext } from '@tdm/data';\n\nimport { HttpActionOptions } from './interfaces';\nimport { HttpActionMetadata, HttpActionMethodType } from '../metadata';\nimport { HttpAction } from '../decorators';\n\nexport const HttpDAOActions = {\n  query: HttpAction({\n    method: HttpActionMethodType.Get,\n    isCollection: true,\n    collInstance: true,\n    validation: 'incoming' as 'incoming',\n    alias: 'findAll'\n  }),\n\n  findById: HttpAction({\n    method: HttpActionMethodType.Get,\n    validation: 'incoming' as 'incoming',\n    pre: (\n      ctx: ExecuteContext<HttpActionMetadata>,\n      id: IdentityValueType,\n      options?: HttpActionOptions\n    ) => {\n      ctx.setIdentity(id);\n      return options;\n    }\n  }),\n\n  find: HttpAction({\n    method: HttpActionMethodType.Get,\n    validation: 'incoming' as 'incoming',\n    alias: 'findOne'\n  }),\n\n  create: HttpAction({\n    method: HttpActionMethodType.Post,\n    validation: 'both' as 'both',\n    pre: (\n      ctx: ExecuteContext<HttpActionMetadata>,\n      data: any,\n      options?: HttpActionOptions\n    ) => {\n      if (ctx.instanceOf(data)) {\n        ctx.setInstance(data);\n      } else {\n        ctx.deserialize(data);\n      }\n\n      ctx.data = ctx.serialize();\n\n      return options;\n    }\n  }),\n\n  update: HttpAction({\n    method: HttpActionMethodType.Put,\n    validation: 'both' as 'both',\n    pre: (\n      ctx: ExecuteContext<HttpActionMetadata>,\n      data: any,\n      options?: HttpActionOptions\n    ) => {\n      if (ctx.instanceOf(data)) {\n        ctx.setInstance(data);\n      } else {\n        ctx.deserialize(data);\n      }\n\n      ctx.data = ctx.serialize();\n\n      return options;\n    }\n  }),\n\n  replace: HttpAction({\n    method: HttpActionMethodType.Patch,\n    validation: 'both' as 'both',\n    pre: (\n      ctx: ExecuteContext<HttpActionMetadata>,\n      data: any,\n      options?: HttpActionOptions\n    ) => {\n      if (ctx.instanceOf(data)) {\n        ctx.setInstance(data);\n      } else {\n        ctx.deserialize(data);\n      }\n\n      ctx.data = ctx.serialize();\n\n      return options;\n    }\n  }),\n\n  remove: HttpAction({\n    method: HttpActionMethodType.Delete,\n    validation: 'skip' as 'skip',\n    pre: (\n      ctx: ExecuteContext<HttpActionMetadata>,\n      id: IdentityValueType | any,\n      options?: HttpActionOptions\n    ) => {\n      if (isPrimitive(id)) {\n        ctx.setIdentity(id);\n      } else if (ctx.instanceOf(id)) {\n        ctx.setInstance(id);\n      } else {\n        ctx.deserialize(id);\n      }\n\n      return options;\n    }\n  })\n};\n\nexport class HttpDao<T> implements TargetDAO<T, HttpActionOptions> {\n  @HttpDAOActions.query query: (options?: HttpActionOptions) => Promise<T[]>;\n  findAll: (options?: HttpActionOptions) => Promise<T[]>;\n\n  @HttpDAOActions.findById\n  findById: (id: IdentityValueType, options?: HttpActionOptions) => Promise<T>;\n\n  @HttpDAOActions.find find: (options: HttpActionOptions) => Promise<T>;\n  findOne: (options: HttpActionOptions) => Promise<T>;\n\n  @HttpDAOActions.create\n  create: (\n    data: T | Partial<T>,\n    options?: HttpActionOptions\n  ) => Promise<T | void>;\n\n  @HttpDAOActions.update\n  update: (\n    data: T | Partial<T>,\n    options?: HttpActionOptions\n  ) => Promise<T | void>;\n\n  @HttpDAOActions.replace\n  replace: (\n    data: T | Partial<T>,\n    options?: HttpActionOptions\n  ) => Promise<T | void>;\n\n  @HttpDAOActions.remove\n  remove: ((\n    id: IdentityValueType | T,\n    options?: HttpActionOptions\n  ) => Promise<void>);\n}\n","export { HttpAdapter } from './http-adapter';\nexport {\n  BaseHttpConfig,\n  HttpActionOptions,\n  TrailingSlashesStrategy\n} from './interfaces';\n","import { MetaClass, getBaseClass, targetStore } from '@tdm/core/tdm';\n\nimport { HttpAdapter } from './core';\nimport {\n  HttpResourceMetadata,\n  HttpResourceMetadataArgs,\n  HttpActionMetadata,\n  UrlParamMetadata,\n  HttpActionMetadataArgs, // HttpActionMetadataArgs - leave to satisfy angular compiler\n  UrlParamMetadataArgs // UrlParamMetadataArgs - leave to satisfy angular compiler\n} from './metadata';\n\n/**\n * @propertyDecorator both\n * @param def\n */\nexport const HttpAction = MetaClass.decorator(HttpActionMetadata);\n\n/**\n * @propertyDecorator instance\n * @param metaArgs\n */\nexport const UrlParam = MetaClass.decorator(UrlParamMetadata, true);\n\n// FOR AOT\nconst httpResource = MetaClass.get(\n  HttpResourceMetadata\n).createResourceDecorator(HttpAdapter);\n\n/**\n * @classDecorator\n * @param def\n */\nexport function HttpResource(def: HttpResourceMetadataArgs): (target) => any {\n  if (!def.endpoint) {\n    throw new Error('Resource endpoint is mandatory.');\n  }\n\n  // apply logic to set a default skip when not set, if the base class has no registered HttpAdapter then defer.\n  if (def.hasOwnProperty('skip')) {\n    return httpResource(def);\n  } else {\n    return target => {\n      const baseClass = getBaseClass(target);\n      if (!baseClass || baseClass === Object) {\n        def.skip = true;\n      } else {\n        const tMeta = targetStore.getTargetMeta(baseClass);\n        if (tMeta && tMeta.hasAdapter(HttpAdapter)) {\n          def.skip = true;\n        }\n      }\n      return httpResource(def)(target);\n    };\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { BaseHttpConfig, TrailingSlashesStrategy } from './core/interfaces';\nimport { Params } from './utils/match-pattern';\n\n@Injectable()\nexport class HttpDefaultConfig implements BaseHttpConfig {\n  /**\n   * The base URL to use as prefix for all models.\n   */\n  baseUrl?: string;\n\n  /**\n   * Optional set of pre-bound parameters all actions in this resource.\n   *\n   * @optional\n   * @default {}\n   */\n  urlParams: Params = {} as any;\n\n  /**\n   * An object containing any HTTP headers that you want to pre-populate your Headers object with.\n   *\n   * @optional\n   * @default {}\n   */\n  headers: { [key: string]: any } = {} as any;\n\n  /**\n   * Set the XMLHttpRequest.withCredentials property.\n   *\n   * @See https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/withCredentials\n   *\n   * @optional\n   * @default false\n   */\n  withCredentials: boolean = false;\n\n  /**\n   * Trailing slashes strategy to use.\n   *\n   *   - **ignore**: leave calculated URL as is.\n   *   - **force**:  ensure the calculated URL ens with a trailing slash\n   *   - **strip**: remove all trailing slashes from the calculated URL\n   *\n   * @optional\n   * @default 'ignore'\n   */\n  trailingSlashes: TrailingSlashesStrategy = 'ignore';\n\n  static create(config?: Partial<HttpDefaultConfig>): HttpDefaultConfig {\n    const cfg = new HttpDefaultConfig();\n    if (config) {\n      Object.assign(cfg, config);\n    }\n    return cfg;\n  }\n}\n","import '@tdm/core';\n\nexport { Params } from './utils/match-pattern';\n\nexport {\n  UrlParamMetadataArgs,\n  HttpResourceMetadataArgs,\n  HttpActionMetadataArgs,\n  HttpActionMethodType\n} from './metadata';\n\nexport {\n  TrailingSlashesStrategy,\n  BaseHttpConfig,\n  HttpActionOptions\n} from './core';\n\nexport { HttpAction, UrlParam, HttpResource } from './decorators';\n\n// TODO: solve this circular dependency hell\nexport { NgDAO } from './register';\n\nexport { HttpDefaultConfig } from './http-default-config';\nexport { HttpClientResourceModule } from './module';\n\nexport {\n  ActiveRecord,\n  TypeOfActiveRecord,\n  ActiveRecordCollection,\n  HttpActiveRecord,\n  HttpActiveRecordStatic\n} from './active-record';\n","import { DecoratorInfo, MetaClass } from '@tdm/core/tdm';\n\nimport { ActionMetadata, ActionMetadataArgs } from '@tdm/data';\nimport { HttpAdapter } from '../core';\nimport { Params } from '../utils/match-pattern';\nimport { BaseHttpConfig, TrailingSlashesStrategy } from '../core/interfaces';\nimport { mapMethod, MappedMethod, HttpActionMethodType } from './method-mapper';\n\nexport interface HttpActionMetadataArgs\n  extends ActionMetadataArgs<HttpActionMethodType>,\n    BaseHttpConfig {\n  /**\n   * action specific url override. The url templating is supported just like for the resource-level urls.\n   * @optional\n   * @default undefined\n   */\n  endpoint?: string;\n\n  /**\n   * when true, the endpoint is treated as absolute, otherwise the endpoint is added to the endpoint of the resource.\n   * Defaults to false.\n   */\n  absolute?: boolean;\n\n  /**\n   * When setting a [[PostActionHandler]] (post) with the `returns` property set to true\n   * you can adjust the response type that will be set in the data property of the [[ExecuteResponse]].\n   *\n   * > This is only applicable when you set a [[PostActionHandler]] with `returns` set to true\n   */\n  postResponseType?: 'arraybuffer' | 'blob' | 'json' | 'text';\n}\n\n@MetaClass<HttpActionMetadataArgs, HttpActionMetadata>({\n  allowOn: ['staticMember', 'member'],\n  extend: 'actionMetadata',\n  register: 'actionMetadata'\n})\nexport class HttpActionMetadata extends ActionMetadata {\n  methodInfo: MappedMethod;\n\n  endpoint?: string;\n  absolute?: boolean;\n\n  urlParams?: Params;\n  headers?: { [key: string]: any };\n  withCredentials?: boolean;\n  trailingSlashes?: TrailingSlashesStrategy;\n\n  postResponseType?: 'arraybuffer' | 'blob' | 'json' | 'text';\n\n  constructor(obj: HttpActionMetadataArgs, info: DecoratorInfo) {\n    super(obj, info);\n\n    if (!obj.hasOwnProperty('method')) {\n      throw new Error('Resource Action method is mandatory.');\n    }\n\n    this.methodInfo = mapMethod(obj.method);\n    this.method = this.methodInfo.method;\n\n    if (this.postResponseType && (!this.post || !this.post.returns)) {\n      throw new Error(\n        '\"postResponseType\" can only be set when using a \"post\" handler with \"returns\" set to true'\n      );\n    }\n    if (this.absolute === true && !this.endpoint) {\n      throw new Error('When setting absolute to true an endpoint is mandatory');\n    }\n  }\n\n  static adapterClass = HttpAdapter;\n}\n","export { HttpResourceMetadata, HttpResourceMetadataArgs } from './resource';\nexport { HttpActionMethodType } from './method-mapper';\nexport { HttpActionMetadata, HttpActionMetadataArgs } from './action';\nexport { UrlParamMetadataArgs, UrlParamMetadata } from './url-params';\n","import { ActionMethodType } from '@tdm/data';\n\nexport enum HttpActionMethodType {\n  Get = 0,\n  Post = 1,\n  Put = 2,\n  Delete = 3,\n  Options = 4,\n  Head = 5,\n  Patch = 6\n}\n\nexport interface MappedMethod {\n  method: ActionMethodType;\n  source: HttpActionMethodType;\n  local: boolean;\n}\n\nconst METHOD_MAP: { [method: number]: ActionMethodType } = {\n  [HttpActionMethodType.Get]: ActionMethodType.READ,\n  [HttpActionMethodType.Post]: ActionMethodType.CREATE,\n  [HttpActionMethodType.Put]: ActionMethodType.REPLACE,\n  [HttpActionMethodType.Delete]: ActionMethodType.DELETE,\n  [HttpActionMethodType.Patch]: ActionMethodType.UPDATE\n};\n\nexport function mapMethod(method: HttpActionMethodType): MappedMethod {\n  const mapped = METHOD_MAP[method];\n  return {\n    source: method,\n    method: typeof mapped === 'undefined' ? ActionMethodType.LOCAL : mapped,\n    local: typeof mapped === 'undefined'\n  };\n}\n","import { ModelMetadataArgs, ModelMetadata, MetaClass } from '@tdm/core/tdm';\nimport { Params } from '../utils/match-pattern';\nimport { BaseHttpConfig, TrailingSlashesStrategy } from '../core/interfaces';\n\nexport interface HttpResourceMetadataArgs\n  extends ModelMetadataArgs,\n    BaseHttpConfig {\n  /**\n   * A parameterized URL template with parameters prefixed by : as in /user/:username.\n   */\n  endpoint: string;\n\n  /**\n   * If true will not build (process) the decorated class into a resource.\n   * This is useful for deferring the build step.\n   *\n   * The default value for `skip` is dynamically set byt the library.\n   * When `skip` is not set (explicitly) the library will set it based on the inheritance structure of the target.\n   * When the target (class) extends a class that has a registered `HttpAdapter` it will leave it as is (false)\n   * Otherwise, it will set it to true.\n   *\n   * The logic behind this is simple, when a target inherits a class with a registered `HttpAdapter` the library assume\n   * that the base target is an `ActiveRecord` mixin:\n   *\n   * ```ts\n   * export class UserBaseClass extends ActiveRecord(User) { }\n   * ```\n   *\n   * If the user still wants to defer he can explicitly set `skip` to true.\n   *\n   * Any other case (the base target does not have a registered `HttpAdapter`) means that no mixins are registered which\n   * means no actions for this target are set, i.e. `HttpAdapter` will not work.\n   *\n   * For example, if you are registering the mixin outside of the class declaration.\n   *\n   * ### Example\n   * **Registering the mixin INSIDE the class declaration (skip: false, or don't declare it):**\n   * ```ts\n   * @HttpResource({ endpoint: '/api/users/:id?' })\n   * export class UserBaseClass extends ActiveRecord(User_) { }\n   *\n   * **Registering the mixin OUTSIDE the class declaration (skip: true):**\n   * ```ts\n   * @HttpResource({ endpoint: '/api/users/:id?' })\n   * export class UserConst_) { }\n   *\n   * export const UserConst = ActiveRecord(UserConst_);\n   * export type UserConst = ActiveRecord<UserConst_>;\n   * ```\n   *\n   * Manually processing is required to finish the model build.\n   * @optional\n   * @default false\n   */\n  skip?: true;\n}\n\n@MetaClass<HttpResourceMetadataArgs, HttpResourceMetadata>({\n  inherit: ModelMetadata\n})\nexport class HttpResourceMetadata extends ModelMetadata\n  implements HttpResourceMetadataArgs {\n  /**\n   * The url for this resource.\n   * This property does not extend from a base type.\n   */\n  endpoint: string;\n  urlParams?: Params;\n  headers?: { [key: string]: any };\n  withCredentials?: boolean;\n  trailingSlashes?: TrailingSlashesStrategy;\n}\n","import {\n  isString,\n  BaseMetadata,\n  DecoratorInfo,\n  PropMetadata,\n  MetaClass\n} from '@tdm/core/tdm';\nimport { mapMethod, MappedMethod, HttpActionMethodType } from './method-mapper';\n\nexport interface UrlParamMetadataArgs {\n  /**\n   * Optional parameter that specifies the name of the URL template parameter.\n   * When not provided, the name of the decorated property is used.\n   *\n   * @optional\n   * @default property name\n   */\n  urlTemplateParamName?: string;\n\n  /**\n   * A list of methods the UrlParam applies on.\n   * When not provided, applies on all methods.\n   *\n   * @optional\n   * @default undefined\n   */\n  methods?: HttpActionMethodType | HttpActionMethodType[];\n}\n\n@MetaClass<UrlParamMetadataArgs, UrlParamMetadata>({\n  allowOn: ['member'],\n  extend: 'mergeMapArray',\n  register: 'array',\n  proxy: {\n    host: PropMetadata,\n    containerKey: 'urlParam'\n  }\n})\nexport class UrlParamMetadata extends BaseMetadata {\n  urlTemplateParamName: string;\n  methods: MappedMethod[] = [];\n\n  constructor(\n    metaArgs: UrlParamMetadataArgs | string | undefined,\n    info: DecoratorInfo\n  ) {\n    super(info);\n\n    const urlParamsMeta: UrlParamMetadataArgs = {};\n\n    if (isString(metaArgs)) {\n      Object.assign(urlParamsMeta, { urlTemplateParamName: metaArgs });\n    } else {\n      if (metaArgs) {\n        Object.assign(urlParamsMeta, metaArgs);\n      }\n\n      if (!urlParamsMeta.urlTemplateParamName) {\n        urlParamsMeta.urlTemplateParamName = info.name as any;\n      }\n    }\n\n    Object.assign(this, urlParamsMeta);\n\n    if (urlParamsMeta.methods) {\n      const methods: HttpActionMethodType[] = Array.isArray(\n        urlParamsMeta.methods\n      )\n        ? urlParamsMeta.methods\n        : Array.of(urlParamsMeta.methods);\n      this.methods = methods.map(mapMethod);\n    } else {\n      this.methods = [];\n    }\n  }\n}\n\ndeclare module '@tdm/core/tdm/lib/metadata/prop' {\n  interface PropMetadataArgs {\n    urlParam?: UrlParamMetadataArgs | undefined;\n  }\n}\n","import { NgModule, Optional } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\nimport { setDefaultFactoryArgs } from './core/http-adapter';\nimport { NgDAO } from './register';\nimport { HttpDefaultConfig } from './http-default-config';\n\n@NgModule({\n  providers: [NgDAO]\n})\nexport class HttpClientResourceModule {\n  constructor(\n    @Optional() httpClient: HttpClient,\n    @Optional() defaultConfig?: HttpDefaultConfig\n  ) {\n    if (!httpClient) {\n      throw new Error(\n        'HttpClientResourceModule could not access HttpClient, did you import HttpClientModule?'\n      );\n    }\n    // every module, we set the last http client.\n    setDefaultFactoryArgs({\n      httpClient,\n      defaultConfig: defaultConfig || new HttpDefaultConfig()\n    });\n  }\n}\n","import { Injectable, Optional } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { targetStore, Constructor } from '@tdm/core/tdm';\nimport { DAO } from '@tdm/data';\nimport { HttpDefaultConfig } from './http-default-config';\nimport { HttpDao } from './core/http-dao';\nimport { HttpAdapter, HttpAdapterFactoryArgs } from './core/http-adapter';\nimport { HttpActionMetadata, HttpResourceMetadata } from './metadata';\n\ntargetStore.registerAdapter(HttpAdapter, {\n  actionMetaClass: HttpActionMetadata,\n  DAOClass: HttpDao,\n  resourceMetaClass: HttpResourceMetadata\n});\n\n/**\n * An HttpDAO factory based for a target.\n */\n@Injectable()\nexport class NgDAO {\n  private factoryArgs: HttpAdapterFactoryArgs;\n\n  constructor(\n    httpClient: HttpClient,\n    @Optional() defaultConfig?: HttpDefaultConfig\n  ) {\n    this.factoryArgs = {\n      httpClient,\n      defaultConfig: defaultConfig || new HttpDefaultConfig()\n    };\n  }\n\n  get<T, Z>(target: Z & Constructor<T>): HttpDao<T> {\n    return <any>DAO.of(HttpAdapter, target, this.factoryArgs);\n  }\n}\n","import { Key } from 'path-to-regexp';\nimport { pathToRegexp, compile } from './path-to-regexp';\n\nexport interface Params {\n  [param: string]: string | string[];\n}\n\nexport type CompiledPatternFactory = (params: Params) => string;\n\nexport interface ParsedPattern {\n  regexp: RegExp;\n  keys: Key[];\n}\n\nexport interface ParsedPath {\n  remainingPathname: string | null;\n  paramNames: Array<string | number>;\n  paramValues: Array<string>;\n}\n\nconst REGEXP_CACHE = new Map<string, ParsedPattern>();\nconst COMPILED_CACHE = new Map<string, CompiledPatternFactory>();\n\nexport function getRegexp(pattern: string): ParsedPattern {\n  if (!REGEXP_CACHE.has(pattern)) {\n    const keys: Key[] = [];\n    const regexp = pathToRegexp(pattern, keys, { end: false });\n    REGEXP_CACHE.set(pattern, { keys, regexp });\n  }\n\n  return REGEXP_CACHE.get(pattern);\n}\n\nexport function getCompiled(pattern: string): CompiledPatternFactory {\n  if (!COMPILED_CACHE.has(pattern)) {\n    COMPILED_CACHE.set(pattern, <any>compile(pattern));\n  }\n\n  return COMPILED_CACHE.get(pattern);\n}\n\nexport function matchPattern(pattern: string, pathname: string): ParsedPath {\n  if (pattern.charAt(0) !== '/') {\n    pattern = `/${pattern}`;\n  }\n\n  const compiled = getRegexp(pattern);\n  const match = compiled.regexp.exec(pathname);\n\n  if (!match) {\n    return {\n      remainingPathname: null,\n      paramNames: [],\n      paramValues: []\n    };\n  }\n\n  return {\n    remainingPathname: pathname.substr(match[0].length),\n    paramNames: compiled.keys.map(key => key.name),\n    paramValues: match.slice(1).map(value => value && decodeURIComponent(value))\n  };\n}\n\nexport function getParamNames(pattern: string): Array<string | number> {\n  return getRegexp(pattern).keys.map(key => key.name);\n}\n\nexport function makeParams(\n  paramNames: (string | number)[],\n  paramValues: any[]\n): Params {\n  const params: Params = {};\n  let lastIndex = 0;\n\n  if (Array.isArray(paramValues)) {\n    paramNames.forEach(function(paramName, index) {\n      if (typeof paramName === 'number') {\n        paramName = lastIndex++;\n      }\n\n      params[paramName] = paramValues[index];\n    });\n  }\n\n  return params;\n}\n\nexport function getParams(pattern: string, pathname: string): Params {\n  const { remainingPathname, paramNames, paramValues } = matchPattern(\n    pattern,\n    pathname\n  );\n\n  if (remainingPathname === null) {\n    return null;\n  }\n\n  return makeParams(paramNames, paramValues);\n}\n\nexport function formatPattern(pattern: string, params: Params = {}): string {\n  return getCompiled(pattern)(params);\n}\n","// Taken from npm module 'path-to-regexp'\n// couldn't import to to rollup issues with commonjs plugin\nimport {\n  Path,\n  Key,\n  RegExpOptions,\n  ParseOptions\n} from 'path-to-regexp';\n\n/**\n * The main path matching regexp utility.\n */\nvar PATH_REGEXP = new RegExp(\n  [\n    // Match escaped characters that would otherwise appear in future matches.\n    // This allows the user to escape special characters that won't transform.\n    '(\\\\\\\\.)',\n    // Match Express-style parameters and un-named parameters with a prefix\n    // and optional suffixes. Matches appear as:\n    //\n    // \"/:test(\\\\d+)?\" => [\"/\", \"test\", \"\\d+\", undefined, \"?\", undefined]\n    // \"/route(\\\\d+)\"  => [undefined, undefined, undefined, \"\\d+\", undefined, undefined]\n    // \"/*\"            => [\"/\", undefined, undefined, undefined, undefined, \"*\"]\n    '([\\\\/.])?(?:(?:\\\\:(\\\\w+)(?:\\\\(((?:\\\\\\\\.|[^\\\\\\\\()])+)\\\\))?|\\\\(((?:\\\\\\\\.|[^\\\\\\\\()])+)\\\\))([+*?])?|(\\\\*))'\n  ].join('|'),\n  'g'\n);\n\n/**\n * Parse a string for the raw tokens.\n */\nexport function parse(str, options) {\n  var tokens = [];\n  var key = 0;\n  var index = 0;\n  var path = '';\n  var defaultDelimiter = (options && options.delimiter) || '/';\n  var res;\n\n  while ((res = PATH_REGEXP.exec(str)) != null) {\n    var m = res[0];\n    var escaped = res[1];\n    var offset = res.index;\n    path += str.slice(index, offset);\n    index = offset + m.length;\n\n    // Ignore already escaped sequences.\n    if (escaped) {\n      path += escaped[1];\n      continue;\n    }\n\n    var next = str[index];\n    var prefix = res[2];\n    var name = res[3];\n    var capture = res[4];\n    var group = res[5];\n    var modifier = res[6];\n    var asterisk = res[7];\n\n    // Push the current path onto the tokens.\n    if (path) {\n      tokens.push(path);\n      path = '';\n    }\n\n    var partial = prefix != null && next != null && next !== prefix;\n    var repeat = modifier === '+' || modifier === '*';\n    var optional = modifier === '?' || modifier === '*';\n    var delimiter = res[2] || defaultDelimiter;\n    var pattern = capture || group;\n\n    tokens.push({\n      name: name || key++,\n      prefix: prefix || '',\n      delimiter: delimiter,\n      optional: optional,\n      repeat: repeat,\n      partial: partial,\n      asterisk: !!asterisk,\n      pattern: pattern\n        ? escapeGroup(pattern)\n        : asterisk ? '.*' : '[^' + escapeString(delimiter) + ']+?'\n    });\n  }\n\n  // Match any characters still remaining.\n  if (index < str.length) {\n    path += str.substr(index);\n  }\n\n  // If the path exists, push it onto the end.\n  if (path) {\n    tokens.push(path);\n  }\n\n  return tokens;\n}\n\n/**\n * Compile a string to a template function for the path.\n */\nexport function compile(str, options?) {\n  return tokensToFunction(parse(str, options));\n}\n\n/**\n * Prettier encoding of URI path segments.\n */\nfunction encodeURIComponentPretty(str) {\n  return encodeURI(str).replace(/[\\/?#]/g, function(c) {\n    return (\n      '%' +\n      c\n        .charCodeAt(0)\n        .toString(16)\n        .toUpperCase()\n    );\n  });\n}\n\n/**\n * Encode the asterisk parameter. Similar to `pretty`, but allows slashes.\n */\nfunction encodeAsterisk(str) {\n  return encodeURI(str).replace(/[?#]/g, function(c) {\n    return (\n      '%' +\n      c\n        .charCodeAt(0)\n        .toString(16)\n        .toUpperCase()\n    );\n  });\n}\n\n/**\n * Expose a method for transforming tokens into the path function.\n */\nexport function tokensToFunction(tokens) {\n  // Compile all the tokens into regexps.\n  var matches = new Array(tokens.length);\n\n  // Compile all the patterns before compilation.\n  for (var i = 0; i < tokens.length; i++) {\n    if (typeof tokens[i] === 'object') {\n      matches[i] = new RegExp('^(?:' + tokens[i].pattern + ')$');\n    }\n  }\n\n  return function(obj, opts) {\n    var path = '';\n    var data = obj || {};\n    var options = opts || {};\n    var encode = options.pretty ? encodeURIComponentPretty : encodeURIComponent;\n\n    for (var i = 0; i < tokens.length; i++) {\n      var token = tokens[i];\n\n      if (typeof token === 'string') {\n        path += token;\n\n        continue;\n      }\n\n      var value = data[token.name];\n      var segment;\n\n      if (value == null) {\n        if (token.optional) {\n          // Prepend partial segment prefixes.\n          if (token.partial) {\n            path += token.prefix;\n          }\n\n          continue;\n        } else {\n          throw new TypeError('Expected \"' + token.name + '\" to be defined');\n        }\n      }\n\n      if (Array.isArray(value)) {\n        if (!token.repeat) {\n          throw new TypeError(\n            'Expected \"' +\n              token.name +\n              '\" to not repeat, but received `' +\n              JSON.stringify(value) +\n              '`'\n          );\n        }\n\n        if (value.length === 0) {\n          if (token.optional) {\n            continue;\n          } else {\n            throw new TypeError(\n              'Expected \"' + token.name + '\" to not be empty'\n            );\n          }\n        }\n\n        for (var j = 0; j < value.length; j++) {\n          segment = encode(value[j]);\n\n          if (!matches[i].test(segment)) {\n            throw new TypeError(\n              'Expected all \"' +\n                token.name +\n                '\" to match \"' +\n                token.pattern +\n                '\", but received `' +\n                JSON.stringify(segment) +\n                '`'\n            );\n          }\n\n          path += (j === 0 ? token.prefix : token.delimiter) + segment;\n        }\n\n        continue;\n      }\n\n      segment = token.asterisk ? encodeAsterisk(value) : encode(value);\n\n      if (!matches[i].test(segment)) {\n        throw new TypeError(\n          'Expected \"' +\n            token.name +\n            '\" to match \"' +\n            token.pattern +\n            '\", but received \"' +\n            segment +\n            '\"'\n        );\n      }\n\n      path += token.prefix + segment;\n    }\n\n    return path;\n  };\n}\n\n/**\n * Escape a regular expression string.\n */\nfunction escapeString(str) {\n  return str.replace(/([.+*?=^!:${}()[\\]|\\/\\\\])/g, '\\\\$1');\n}\n\n/**\n * Escape the capturing group by escaping special characters and meaning.\n */\nfunction escapeGroup(group) {\n  return group.replace(/([=!:$\\/()])/g, '\\\\$1');\n}\n\n/**\n * Attach the keys as a property of the regexp.\n */\nfunction attachKeys(re, keys) {\n  re.keys = keys;\n  return re;\n}\n\n/**\n * Get the flags for a regexp from the options.\n */\nfunction flags(options) {\n  return options.sensitive ? '' : 'i';\n}\n\n/**\n * Pull out keys from a regexp.\n */\nfunction regexpToRegexp(path, keys) {\n  // Use a negative lookahead to match only capturing groups.\n  var groups = path.source.match(/\\((?!\\?)/g);\n\n  if (groups) {\n    for (var i = 0; i < groups.length; i++) {\n      keys.push({\n        name: i,\n        prefix: null,\n        delimiter: null,\n        optional: false,\n        repeat: false,\n        partial: false,\n        asterisk: false,\n        pattern: null\n      });\n    }\n  }\n\n  return attachKeys(path, keys);\n}\n\n/**\n * Transform an array into a regexp.\n */\nfunction arrayToRegexp(path, keys, options) {\n  var parts = [];\n\n  for (var i = 0; i < path.length; i++) {\n    parts.push(pathToRegexp(path[i], keys, options).source);\n  }\n\n  var regexp = new RegExp('(?:' + parts.join('|') + ')', flags(options));\n\n  return attachKeys(regexp, keys);\n}\n\n/**\n * Create a path regexp from string input.\n */\nfunction stringToRegexp(path, keys, options) {\n  return tokensToRegExp(parse(path, options), keys, options);\n}\n\n/**\n * Expose a function for taking tokens and returning a RegExp.\n */\nexport function tokensToRegExp(tokens, keys, options) {\n  if (!Array.isArray(keys)) {\n    options = /** @type {!Object} */ (keys || options);\n    keys = [];\n  }\n\n  options = options || {};\n\n  var strict = options.strict;\n  var end = options.end !== false;\n  var route = '';\n\n  // Iterate over the tokens and create our regexp string.\n  for (var i = 0; i < tokens.length; i++) {\n    var token = tokens[i];\n\n    if (typeof token === 'string') {\n      route += escapeString(token);\n    } else {\n      var prefix = escapeString(token.prefix);\n      var capture = '(?:' + token.pattern + ')';\n\n      keys.push(token);\n\n      if (token.repeat) {\n        capture += '(?:' + prefix + capture + ')*';\n      }\n\n      if (token.optional) {\n        if (!token.partial) {\n          capture = '(?:' + prefix + '(' + capture + '))?';\n        } else {\n          capture = prefix + '(' + capture + ')?';\n        }\n      } else {\n        capture = prefix + '(' + capture + ')';\n      }\n\n      route += capture;\n    }\n  }\n\n  var delimiter = escapeString(options.delimiter || '/');\n  var endsWithDelimiter = route.slice(-delimiter.length) === delimiter;\n\n  // In non-strict mode we allow a slash at the end of match. If the path to\n  // match already ends with a slash, we remove it for consistency. The slash\n  // is valid at the end of a path match, not in the middle. This is important\n  // in non-ending mode, where \"/test/\" shouldn't match \"/test//route\".\n  if (!strict) {\n    route =\n      (endsWithDelimiter ? route.slice(0, -delimiter.length) : route) +\n      '(?:' +\n      delimiter +\n      '(?=$))?';\n  }\n\n  if (end) {\n    route += '$';\n  } else {\n    // In non-ending mode, we need the capturing groups to match as much as\n    // possible by using a positive lookahead to the end or next path segment.\n    route += strict && endsWithDelimiter ? '' : '(?=' + delimiter + '|$)';\n  }\n\n  return attachKeys(new RegExp('^' + route, flags(options)), keys);\n}\n\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n */\n\nexport function pathToRegexp(path, keys?, options?): RegExp {\n  if (!Array.isArray(keys)) {\n    options = /** @type {!Object} */ (keys || options);\n    keys = [];\n  }\n\n  options = options || {};\n\n  if (path instanceof RegExp) {\n    return regexpToRegexp(path, /** @type {!Array} */ (keys));\n  }\n\n  if (Array.isArray(path)) {\n    return arrayToRegexp(\n      /** @type {!Array} */ (path),\n      /** @type {!Array} */ (keys),\n      options\n    );\n  }\n\n  return stringToRegexp(\n    /** @type {string} */ (path),\n    /** @type {!Array} */ (keys),\n    options\n  );\n}\n","/*\n       * Public API Surface of mylib\n       */\nexport * from './lib/tixin';\n","/* tslint:disable:max-line-length */\nexport interface Type<T> extends Function {\n  new (...args: any[]): T;\n}\n\nexport type Tixin<BASE, MIXIN> = BASE & MIXIN;\n\nfunction mixObjects(base: any, mixins: any[]): void {\n  mixins.forEach(mixin => {\n    Object.getOwnPropertyNames(mixin)\n      .concat(Object.getOwnPropertySymbols(mixin) as any)\n      .forEach(name => {\n        // mixin can't override base behaviour, only add\n        if (!base.hasOwnProperty(name)) {\n          // if its a property descriptor we need to rewire the context\n          const propDesc = Object.getOwnPropertyDescriptor(mixin, name);\n          if (propDesc) {\n            Object.defineProperty(base, name, propDesc);\n          } else {\n            base[name] = mixin[name];\n          }\n        }\n      });\n  });\n}\n\n/**\n * Typeless mixin\n */\nexport function TixinFree(\n  base: any,\n  mixin: any,\n  extend: 'class' | 'proto' | 'both' = 'both'\n): any {\n  if (extend === 'proto' || extend === 'both') {\n    mixObjects(base.prototype, [mixin.prototype]);\n  }\n  if (extend === 'class' || extend === 'both') {\n    mixObjects(base, [mixin]);\n  }\n  return base as any;\n}\n\n/* GENERATED BY scripts/generic_codegen.js */\nexport function Tixin<TBASE, CBASE, T1, C1>(\n  base: CBASE & Type<TBASE>,\n  m1: C1 & Type<T1>\n): Type<TBASE & T1> & CBASE & C1;\nexport function Tixin<TBASE, CBASE, T1, C1, T2, C2>(\n  base: CBASE & Type<TBASE>,\n  m1: C1 & Type<T1>,\n  m2: C2 & Type<T2>\n): Type<TBASE & T1 & T2> & CBASE & C1 & C2;\nexport function Tixin<TBASE, CBASE, T1, C1, T2, C2, T3, C3>(\n  base: CBASE & Type<TBASE>,\n  m1: C1 & Type<T1>,\n  m2: C2 & Type<T2>,\n  m3: C3 & Type<T3>\n): Type<TBASE & T1 & T2 & T3> & CBASE & C1 & C2 & C3;\nexport function Tixin<TBASE, CBASE, T1, C1, T2, C2, T3, C3, T4, C4>(\n  base: CBASE & Type<TBASE>,\n  m1: C1 & Type<T1>,\n  m2: C2 & Type<T2>,\n  m3: C3 & Type<T3>,\n  m4: C4 & Type<T4>\n): Type<TBASE & T1 & T2 & T3 & T4> & CBASE & C1 & C2 & C3 & C4;\nexport function Tixin<TBASE, CBASE, T1, C1, T2, C2, T3, C3, T4, C4, T5, C5>(\n  base: CBASE & Type<TBASE>,\n  m1: C1 & Type<T1>,\n  m2: C2 & Type<T2>,\n  m3: C3 & Type<T3>,\n  m4: C4 & Type<T4>,\n  m5: C5 & Type<T5>\n): Type<TBASE & T1 & T2 & T3 & T4 & T5> & CBASE & C1 & C2 & C3 & C4 & C5;\nexport function Tixin<\n  TBASE,\n  CBASE,\n  T1,\n  C1,\n  T2,\n  C2,\n  T3,\n  C3,\n  T4,\n  C4,\n  T5,\n  C5,\n  T6,\n  C6\n>(\n  base: CBASE & Type<TBASE>,\n  m1: C1 & Type<T1>,\n  m2: C2 & Type<T2>,\n  m3: C3 & Type<T3>,\n  m4: C4 & Type<T4>,\n  m5: C5 & Type<T5>,\n  m6: C6 & Type<T6>\n): Type<TBASE & T1 & T2 & T3 & T4 & T5 & T6> &\n  CBASE &\n  C1 &\n  C2 &\n  C3 &\n  C4 &\n  C5 &\n  C6;\nexport function Tixin<\n  TBASE,\n  CBASE,\n  T1,\n  C1,\n  T2,\n  C2,\n  T3,\n  C3,\n  T4,\n  C4,\n  T5,\n  C5,\n  T6,\n  C6,\n  T7,\n  C7\n>(\n  base: CBASE & Type<TBASE>,\n  m1: C1 & Type<T1>,\n  m2: C2 & Type<T2>,\n  m3: C3 & Type<T3>,\n  m4: C4 & Type<T4>,\n  m5: C5 & Type<T5>,\n  m6: C6 & Type<T6>,\n  m7: C7 & Type<T7>\n): Type<TBASE & T1 & T2 & T3 & T4 & T5 & T6 & T7> &\n  CBASE &\n  C1 &\n  C2 &\n  C3 &\n  C4 &\n  C5 &\n  C6 &\n  C7;\n\n/**\n * A type friendly, class based, mixin functions that mix in instance and static members.\n *\n * EXAMPLE:\n * ```ts\n * class User_ {\n *   id: number;\n *   firstName: string;\n *   lastName: string;\n * }\n *\n * class FullName {\n *   get fullName(): string {\n *     return `${this['firstName']} ${this['lastName']}`;\n *   }\n *\n *   static createId(): number {\n *     // a shady id generator.\n *     return Date.now();\n *   }\n * }\n *\n * export const User = Tixin(User_, FullName);\n * export type User = Tixin<User_, FullName>;\n *\n * // not using it:\n * const user = new User();\n * user.id = User.createId();\n * user.firstName = 'John';\n * user.lastName = 'Doe';\n * console.log(user.fullName); // John Doe\n * ```\n *\n * > To allow Generics in static members (e.g. static createUser(): T) see TixinExt\n *\n * ## Limitations:\n * From a type perspective this utility has limitations.\n *\n * #### You can't (currently) extend a mixed in type.\n *```ts\n *  export const User = Tixin(User_, FullName);\n *\n *  export class MyExtendedUser extends User { // <- Type Error\n *  }\n *```\n *\n * ```\n * Type 'Type<User_ & FullName> & typeof FullName & typeof User_' is not a constructor function type.\n * ```\n *\n * The error is misleading, this is a current known TS limitation (see [Github Issue](https://github.com/Microsoft/TypeScript/issues/4890))\n *\n * #### You can use generic inference once, from that point the generic param types for mixin have to be explicitly set:\n * ```ts\n *   export const User = Tixin(User_, FullName); // fine\n *\n *   export const UserNumber2 = Tixin(User, OtherMixin); // Error\n * ```\n *\n * ```\n * The type argument for type parameter 'TBASE' cannot be inferred from the usage.\n * Consider specifying the type arguments explicitly.\n * Type argument candidate 'FullName' is not a valid type argument because it is not a supertype of candidate 'User_'.\n * Property 'fullName' is missing in type 'User_'.\n * ```\n * This might be related to the previous limitation, or not...\n *\n *\n * There are 2 solution:\n *\n * 1) Using the built in interface that supports up to 6 mixins at once. (base + 6)\n * ```ts\n * export const User = Tixin(User_, FullName, OtherMixin); //  FullName, OtherMixin are 2, you can rest param your way for 5 more...\n * export type User = User_ & FullName & OtherMixin\n * ```\n * > This time we cant use `Tixin` to apply the User **type** so we just do it manually...\n *\n * 2) going the long way:\n * ```ts\n *   export const User = Tixin(User_, FullName); // fine\n *\n *   export const UserNumber2 = Tixin<User, typeof User, OtherMixin, typeof OtherMixin>(User, OtherMixin);\n * ```\n *\n *\n * @param base\n * @param mixin\n */\nexport function Tixin<TBASE, CBASE, TMIXIN, CMIXIN>(\n  base: CBASE & Type<TBASE>,\n  ...mixins: Array<CMIXIN & Type<TMIXIN>>\n): Type<TBASE & TMIXIN> & CMIXIN & CBASE {\n  mixObjects(base.prototype, mixins.map(m => m.prototype));\n  mixObjects(base, mixins);\n  return base as any;\n}\n\n/* GENERATED BY scripts/generic_codegen.js */\nexport function TixinExt<TBASE, CBASE, SMIXIN, T1, C1>(\n  base: CBASE & Type<TBASE>,\n  extraStatic: SMIXIN,\n  m1: C1 & Type<T1>\n): Type<TBASE & T1> & SMIXIN & CBASE & C1;\nexport function TixinExt<TBASE, CBASE, SMIXIN, T1, C1, T2, C2>(\n  base: CBASE & Type<TBASE>,\n  extraStatic: SMIXIN,\n  m1: C1 & Type<T1>,\n  m2: C2 & Type<T2>\n): Type<TBASE & T1 & T2> & SMIXIN & CBASE & C1 & C2;\nexport function TixinExt<TBASE, CBASE, SMIXIN, T1, C1, T2, C2, T3, C3>(\n  base: CBASE & Type<TBASE>,\n  extraStatic: SMIXIN,\n  m1: C1 & Type<T1>,\n  m2: C2 & Type<T2>,\n  m3: C3 & Type<T3>\n): Type<TBASE & T1 & T2 & T3> & SMIXIN & CBASE & C1 & C2 & C3;\nexport function TixinExt<TBASE, CBASE, SMIXIN, T1, C1, T2, C2, T3, C3, T4, C4>(\n  base: CBASE & Type<TBASE>,\n  extraStatic: SMIXIN,\n  m1: C1 & Type<T1>,\n  m2: C2 & Type<T2>,\n  m3: C3 & Type<T3>,\n  m4: C4 & Type<T4>\n): Type<TBASE & T1 & T2 & T3 & T4> & SMIXIN & CBASE & C1 & C2 & C3 & C4;\nexport function TixinExt<\n  TBASE,\n  CBASE,\n  SMIXIN,\n  T1,\n  C1,\n  T2,\n  C2,\n  T3,\n  C3,\n  T4,\n  C4,\n  T5,\n  C5\n>(\n  base: CBASE & Type<TBASE>,\n  extraStatic: SMIXIN,\n  m1: C1 & Type<T1>,\n  m2: C2 & Type<T2>,\n  m3: C3 & Type<T3>,\n  m4: C4 & Type<T4>,\n  m5: C5 & Type<T5>\n): Type<TBASE & T1 & T2 & T3 & T4 & T5> &\n  SMIXIN &\n  CBASE &\n  C1 &\n  C2 &\n  C3 &\n  C4 &\n  C5;\nexport function TixinExt<\n  TBASE,\n  CBASE,\n  SMIXIN,\n  T1,\n  C1,\n  T2,\n  C2,\n  T3,\n  C3,\n  T4,\n  C4,\n  T5,\n  C5,\n  T6,\n  C6\n>(\n  base: CBASE & Type<TBASE>,\n  extraStatic: SMIXIN,\n  m1: C1 & Type<T1>,\n  m2: C2 & Type<T2>,\n  m3: C3 & Type<T3>,\n  m4: C4 & Type<T4>,\n  m5: C5 & Type<T5>,\n  m6: C6 & Type<T6>\n): Type<TBASE & T1 & T2 & T3 & T4 & T5 & T6> &\n  SMIXIN &\n  CBASE &\n  C1 &\n  C2 &\n  C3 &\n  C4 &\n  C5 &\n  C6;\nexport function TixinExt<\n  TBASE,\n  CBASE,\n  SMIXIN,\n  T1,\n  C1,\n  T2,\n  C2,\n  T3,\n  C3,\n  T4,\n  C4,\n  T5,\n  C5,\n  T6,\n  C6,\n  T7,\n  C7\n>(\n  base: CBASE & Type<TBASE>,\n  extraStatic: SMIXIN,\n  m1: C1 & Type<T1>,\n  m2: C2 & Type<T2>,\n  m3: C3 & Type<T3>,\n  m4: C4 & Type<T4>,\n  m5: C5 & Type<T5>,\n  m6: C6 & Type<T6>,\n  m7: C7 & Type<T7>\n): Type<TBASE & T1 & T2 & T3 & T4 & T5 & T6 & T7> &\n  SMIXIN &\n  CBASE &\n  C1 &\n  C2 &\n  C3 &\n  C4 &\n  C5 &\n  C6 &\n  C7;\n\n/**\n * For full description see Tixin function.\n *\n * The TixinExt utility does the same as Tixin but also allows adding an extra static type to the intersection.\n *\n * Although static members are mixed in there is a situation that requires an additional static mixin.\n * In a TypeScript class we can not apply generics on static members in the class level, only in a member based level.\n * If we want to return our final mixin type from a static member (e.g: factory) we need a different type.\n *\n * Example:\n * ```ts\n * class User_ {\n *   id: number;\n *   firstName: string;\n *   lastName: string;\n * }\n *\n * class FullName {\n *   get fullName(): string {\n *     return `${this['firstName']} ${this['lastName']}`;\n *   }\n * }\n *\n * const createNew = {\n *   create(): any {\n *     return new User_(); // at this point User_ is fully mixed in.\n *   }\n * }\n *\n * interface CreateStatic<T> {\n *   create(): Tixin<T, FullName>;\n * }\n *\n * export const User = TixinExt(User_, createNew as CreateStatic<User_>, FullName );\n * export type User = Tixin<User_, FullName>;\n * ```\n *\n * > Same as Tixin, TixinExt supports up to 6 mixins but only 1 extra static member.\n * If you need more then 1 just intersect all of your extera static interfaces to 1.\n * @param base\n * @param extraStatic Optional object for extra static member, use for static functions that require generics with Generics.\n * @param mixins\n */\nexport function TixinExt<TBASE, CBASE, SMIXIN, TMIXIN, CMIXIN>(\n  base: CBASE & Type<TBASE>,\n  extraStatic: SMIXIN,\n  ...mixins: Array<CMIXIN & Type<TMIXIN>>\n): Type<TBASE & TMIXIN> & CBASE & SMIXIN & CMIXIN {\n  (Tixin as any)(base, ...mixins);\n  mixObjects(base, Array.of(extraStatic));\n  return base as any;\n}\n/* tslint:disable:max-line-length */\n","var map = {\n\t\"@forms\": [\n\t\t\"./src/modules/@forms/module.ts\",\n\t\t\"common\",\n\t\t\"forms\"\n\t],\n\t\"@http\": [\n\t\t\"./src/modules/@http/module.ts\",\n\t\t\"http~northwind-app\",\n\t\t\"common\",\n\t\t\"http\"\n\t],\n\t\"@northwind-app\": [\n\t\t\"./src/modules/@northwind-app/module.ts\",\n\t\t\"http~northwind-app\",\n\t\t\"common\",\n\t\t\"northwind-app\"\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error('Cannot find module \"' + req + '\".');\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\tvar module = __webpack_require__(ids[0]);\n\t\treturn module;\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";\nmodule.exports = webpackAsyncContext;","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build ---prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * In development mode, to ignore zone related error stack frames such as\n * `zone.run`, `zoneDelegate.invokeTask` for easier debugging, you can\n * import the following file, but please comment it out in production mode\n * because it will have performance impact when throw error\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","// adding the active record plugin, this will give the models the ability to perform CRUD operations on themselves.\n// This adds the runtime logic to register actions on a type.\n// To add design time TypeScript support and declare target actions use an adapter specific mixin\n// for example: ActiveRecord from @tdm/ngx--client-http\nimport '@tdm/data/plugin/active-record';\nimport '@tdm/data/plugin/control-flow';\n\n// adding a resource controller, an object that allows resource instance management.\n// Event stream, self$ stream, promise for next result, replay last action, cancellation and more.\n// The resource control instance is available via a getter on the ResourceControl: ResourceControl.get(instance)\nimport '@tdm/data/plugin/rx-resource-control';\n\n/**\n * Design time information added to models/collection to get the resource control instance.\n * This has no logical implication, just a property on the model/collection instances to easily get the resource control instance.\n */\nimport '@tdm/data/plugin/active-record/lib/$rc';\n\nimport { plugins } from '@tdm/data';\n\n// initializing the plugins.\n\nplugins.RxResourceControl.init();\nplugins.ActiveRecord.init({ resourceControl: '$rc' });\nplugins.ResourceControlFlow.init();\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport './init-tdm';\n\nimport { AppModule } from '@app';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n","module.exports = \"<div class=\\\"tdm-app mat-typography\\\">\\n  <div class=\\\"tdm-navbar mat-elevation-z8\\\">\\n    <mat-toolbar color=\\\"primary\\\">\\n      <a class=\\\"title\\\" [routerLink]=\\\" ['.'] \\\" routerLinkActive=\\\"active\\\" [routerLinkActiveOptions]= \\\"{exact: true}\\\">@TDM</a>\\n      <a *ngFor=\\\"let navItem of topNavService.navItems$ | async\\\"\\n         class=\\\"tdm-top-nav-link\\\" mat-button\\n         [routerLink]=\\\"navItem.routerLink.routerLink\\\" routerLinkActive=\\\"active\\\" [routerLinkActiveOptions]= \\\"navItem.routerLinkActiveOptions || {}\\\">\\n        <img *ngIf=\\\"navItem.imgIconSrc\\\" [src]=\\\"navItem.imgIconSrc\\\" />\\n        {{navItem.title}}\\n      </a>\\n    </mat-toolbar>\\n  </div>\\n  <main>\\n    <div class=\\\"main-view\\\">\\n      <router-outlet></router-outlet>\\n    </div>\\n  </main>\\n</div>\\n\"","module.exports = \".tdm-app {\\n  display: flex;\\n  flex-direction: column;\\n  position: absolute;\\n  top: 64px;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  z-index: 1; }\\n\\n.tdm-navbar {\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  z-index: 2; }\\n\\n.tdm-navbar .title {\\n    margin-right: 25px; }\\n\\nmain {\\n  height: 100%;\\n  width: 100%; }\\n\\nmain .main-view {\\n    flex: 1;\\n    height: 100%;\\n    width: 100%; }\\n\\nmain .main-view router-outlet + * {\\n      display: flex;\\n      flex-direction: column;\\n      height: 100%;\\n      width: 100%; }\\n\\n.title {\\n  color: white;\\n  text-decoration: none; }\\n\\n.tdm-top-nav-link img {\\n  height: 26px;\\n  vertical-align: middle;\\n  margin: 0 4px 3px 0; }\\n\\n.tdm-top-nav-link.active {\\n  background: rgba(0, 0, 0, 0.1); }\\n\"","import { Component, ViewEncapsulation } from '@angular/core';\nimport { TopNavService } from '@shared';\n\n@Component({\n  selector: 'app-root',\n  encapsulation: ViewEncapsulation.None,\n  templateUrl: './app.component.html',\n  styleUrls: [ './app.component.scss' ]\n})\nexport class AppComponent {\n  constructor(public topNavService: TopNavService) { }\n}\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { RouterModule,  PreloadAllModules } from '@angular/router';\n\nimport { SharedModule } from '@shared';\n/*\n * Platform and Environment providers/directives/pipes\n */\nimport { environment } from '../../environments/environment';\nimport { ROUTES } from './app.routes';\n// App is our top level component\nimport { AppComponent } from './app.component';\nimport { HomeComponent } from './home';\nimport { NoContentComponent } from './no-content';\n\n// we first include material-core then styles because styles has @imports that needs to come after material core\n// but material core is not an import but a sass @include so we can control the order\n\n@NgModule({\n  bootstrap: [ AppComponent ],\n  declarations: [\n    AppComponent,\n    HomeComponent,\n    NoContentComponent\n  ],\n  imports: [ // import Angular's modules\n    BrowserModule,\n    RouterModule.forRoot(ROUTES, { useHash: true, preloadingStrategy: PreloadAllModules }),\n    SharedModule.forRoot()\n  ]\n})\nexport class AppModule { }\n","import { Routes } from '@angular/router';\nimport { HomeComponent } from './home';\nimport { NoContentComponent } from './no-content';\n\nexport const ROUTES: Routes = [\n  { path: '',      component: HomeComponent },\n  { path: 'forms', loadChildren: '@forms#FormsAppModule' },\n  // { path: 'playground', loadChildren: '@playground#PlaygroundModule' },\n  { path: 'ngx-http', loadChildren: '@http#NgxHttpAppModule' },\n  { path: 'northwind-app', loadChildren: '@northwind-app#NorthwindAppModule' },\n  { path: '**',    component: NoContentComponent },\n];\n","module.exports = \"/*styles for home content only*/\\n\"","module.exports = \"<div class=\\\"tdm-page-content\\\">\\n  <h1>Type Data Models</h1>\\n  <h3>Documentation is WIP</h3>\\n  <a [routerLink]=\\\"['./forms']\\\">Click for Dynamic Forms</a>\\n</div>\\n\"","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'home',\n  styleUrls: [ './home.component.css' ],\n  templateUrl: './home.component.html'\n})\nexport class HomeComponent {\n\n}\n","export * from './home.component';\n","export * from './app.module';\n","export * from './no-content.component';\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'no-content',\n  template: `\n    <div>\n      <h1>404: page missing</h1>\n    </div>\n  `\n})\nexport class NoContentComponent {\n\n}\n","import {Directive, HostBinding, HostListener, Input, TemplateRef, ViewContainerRef} from '@angular/core';\n\n@Directive({\n  selector: '[cdkDetailRow]'\n})\nexport class CdkDetailRowDirective {\n  private row: any;\n  private tRef: TemplateRef<any>;\n  private opened: boolean;\n\n  @HostBinding('class.expanded')\n  get expended(): boolean {\n    return this.opened;\n  }\n\n  @Input()\n  set cdkDetailRow(value: any) {\n    if (value !== this.row) {\n      this.row = value;\n      // this.render();\n    }\n  }\n\n  @Input('cdkDetailRowTpl')\n  set template(value: TemplateRef<any>) {\n    if (value !== this.tRef) {\n      this.tRef = value;\n      // this.render();\n    }\n  }\n\n  constructor(public vcRef: ViewContainerRef) { }\n\n  @HostListener('click')\n  onClick(): void {\n    this.toggle();\n  }\n\n  toggle(): void {\n    if (this.opened) {\n      this.vcRef.clear();\n    } else {\n      this.render();\n    }\n    this.opened = this.vcRef.length > 0;\n  }\n\n  private render(): void {\n    this.vcRef.clear();\n    if (this.tRef && this.row) {\n      this.vcRef.createEmbeddedView(this.tRef, { $implicit: this.row });\n    }\n  }\n}\n","module.exports = \"<div>\\n  <mat-tab-group *ngIf=\\\"multi\\\">\\n    <ng-container *ngFor=\\\"let c of code\\\">\\n      <mat-tab *ngIf=\\\"c.code\\\">\\n        <ng-template mat-tab-label>\\n          <div fxLayout=\\\"column\\\" fxLayoutAlign=\\\"center center\\\" [matTooltip]=\\\"c.title && c.file\\\">\\n            <span>{{c.title || c.file}} [{{c.lang.toUpperCase()}}]</span>\\n          </div>\\n        </ng-template>\\n        <div class=\\\"tdm-code-example\\\">\\n          <pre><code [innerHtml]=\\\"c.code\\\"></code></pre>\\n        </div>\\n      </mat-tab>\\n    </ng-container>\\n  </mat-tab-group>\\n  <div class=\\\"tdm-code-example\\\" *ngIf=\\\"code && !multi\\\">\\n    <pre><code [innerHtml]=\\\"code.code\\\"></code></pre>\\n  </div>\\n</div>\\n\"","module.exports = \".tdm-code-example {\\n  margin: 10px;\\n  padding: 15px;\\n  max-height: 65vh;\\n  overflow: auto; }\\n\"","import { Component, Input, ChangeDetectionStrategy, SimpleChanges, OnChanges } from '@angular/core';\n\nexport interface CodeViewItem {\n  file?: string;\n  title?: string;\n  code: string;\n  lang: 'ts' | 'html' | 'css' | 'scss';\n}\n\n@Component({\n  selector: 'tdm-code-view',\n  templateUrl: './code-view.component.html',\n  styleUrls: [ './code-view.component.scss' ],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class TdmCodeViewComponent implements OnChanges {\n\n  @Input() code: CodeViewItem | CodeViewItem[];\n  multi: boolean;\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.code) {\n      this.multi = Array.isArray(this.code);\n    }\n  }\n}\n","module.exports = \"<mat-accordion class=\\\"package-feature-list\\\">\\n  <mat-expansion-panel *ngFor=\\\"let f of features\\\">\\n    <mat-expansion-panel-header>\\n      <mat-panel-title><mat-icon>check</mat-icon>{{f.title}}</mat-panel-title>\\n    </mat-expansion-panel-header>\\n    <tdm-markdown-view *ngIf=\\\"f.md\\\" [markdown]=\\\"f.description\\\"></tdm-markdown-view>\\n    <ng-container *ngIf=\\\"!f.md\\\">{{f.description}}</ng-container>\\n  </mat-expansion-panel>\\n</mat-accordion>\\n\"","module.exports = \"/**\\n * Applies styles for users in high contrast mode. Note that this only applies\\n * to Microsoft browsers. Chrome can be included by checking for the `html[hc]`\\n * attribute, however Chrome handles high contrast differently.\\n */\\n/* Theme for the ripple elements.*/\\n/* stylelint-disable material/no-prefixes */\\n/* stylelint-enable */\\n.package-feature-list .mat-expansion-panel:not([class*=mat-elevation-z]) {\\n  box-shadow: none; }\\n.package-feature-list .mat-expansion-panel:not([class*=mat-elevation-z]).mat-expanded {\\n    box-shadow: 0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12); }\\n.package-feature-list mat-panel-title {\\n  line-height: 48px;\\n  height: 48px;\\n  color: rgba(0, 0, 0, 0.54); }\\n.package-feature-list mat-panel-title mat-icon {\\n    line-height: 48px;\\n    height: 48px;\\n    color: #4caf50;\\n    padding-right: 15px; }\\n\"","import { Component, Input, ChangeDetectionStrategy } from '@angular/core';\n\nexport interface TdmFeatureListItem {\n  title: string;\n  description: string;\n  /**\n   * When true, the description is markdown html.\n   */\n  md?: boolean;\n}\n\n@Component({\n  selector: 'tdm-feature-list',\n  templateUrl: './feature-list.component.html',\n  styleUrls: [ './feature-list.component.scss' ],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class TdmFeatureListComponent {\n  @Input() features: TdmFeatureListItem[];\n}\n","export { UiBlock } from './ui-block.component';\nexport { TdmCodeViewComponent, CodeViewItem } from './code-view/code-view.component';\nexport { TdmMarkdownViewComponent } from './markdown-view/markdown-view.component';\nexport { TdmPackageWelcomeComponent } from './package-welcome/package-welcome.component';\nexport { TdmFeatureListComponent, TdmFeatureListItem } from './feature-list/feature-list.component';\nexport { TdmLedComponent } from './led/led.component';\nexport { TutorialPageComponent } from './tutorial-page';\n","module.exports = \"<div class=\\\"tdm-led\\\">\\n  <div class=\\\"status-indicator status-indicator-{{color}}\\\"\\n       [class.status-disabled]=\\\"disabled\\\"\\n       [class.status-blink]=\\\"blink\\\"></div>\\n</div>\\n\"","module.exports = \".tdm-led {\\n  width: 100%;\\n  height: 100%; }\\n  .tdm-led .status-indicator {\\n    margin: 0 auto;\\n    width: 100%;\\n    height: 100%;\\n    border-radius: 50%; }\\n  .tdm-led .status-indicator {\\n    background-color: transparent;\\n    box-shadow: rgba(56, 56, 56, 0.2) 0 -1px 7px 1px, inset #535353 0 -1px 9px, #b0b0b0 0 2px 14px; }\\n  .tdm-led .status-indicator.status-indicator-green {\\n      background-color: #ABFF00;\\n      box-shadow: rgba(0, 0, 0, 0.2) 0 -1px 7px 1px, inset #304701 0 -1px 9px, #89FF00 0 2px 12px; }\\n  @-webkit-keyframes blinkGreen {\\n  from {\\n    background-color: #ABFF00; }\\n  50% {\\n    background-color: #3a5700;\\n    box-shadow: rgba(0, 0, 0, 0.2) 0 -1px 7px 1px, inset #304701 0 -1px 9px, #89FF00 0 2px 0; }\\n  to {\\n    background-color: #ABFF00; } }\\n  @keyframes blinkGreen {\\n  from {\\n    background-color: #ABFF00; }\\n  50% {\\n    background-color: #3a5700;\\n    box-shadow: rgba(0, 0, 0, 0.2) 0 -1px 7px 1px, inset #304701 0 -1px 9px, #89FF00 0 2px 0; }\\n  to {\\n    background-color: #ABFF00; } }\\n  .tdm-led .status-indicator.status-indicator-green.status-blink {\\n        -webkit-animation: blinkGreen 0.75s infinite;\\n        animation: blinkGreen 0.75s infinite; }\\n  .tdm-led .status-indicator.status-indicator-yellow {\\n      background-color: #FF0;\\n      box-shadow: rgba(0, 0, 0, 0.2) 0 -1px 7px 1px, inset #808002 0 -1px 9px, #FF0 0 2px 12px; }\\n  @-webkit-keyframes blinkYellow {\\n  from {\\n    background-color: #FF0; }\\n  50% {\\n    background-color: #575700;\\n    box-shadow: rgba(0, 0, 0, 0.2) 0 -1px 7px 1px, inset #808002 0 -1px 9px, #FF0 0 2px 0; }\\n  to {\\n    background-color: #FF0; } }\\n  @keyframes blinkYellow {\\n  from {\\n    background-color: #FF0; }\\n  50% {\\n    background-color: #575700;\\n    box-shadow: rgba(0, 0, 0, 0.2) 0 -1px 7px 1px, inset #808002 0 -1px 9px, #FF0 0 2px 0; }\\n  to {\\n    background-color: #FF0; } }\\n  .tdm-led .status-indicator.status-indicator-yellow.status-blink {\\n        -webkit-animation: blinkYellow 0.75s infinite;\\n        animation: blinkYellow 0.75s infinite; }\\n  .tdm-led .status-indicator.status-indicator-red {\\n      background-color: #F00;\\n      box-shadow: rgba(0, 0, 0, 0.2) 0 -1px 7px 1px, inset #441313 0 -1px 9px, rgba(255, 0, 0, 0.5) 0 2px 12px; }\\n  @-webkit-keyframes blinkRed {\\n  from {\\n    background-color: #F00; }\\n  50% {\\n    background-color: #570000;\\n    box-shadow: rgba(0, 0, 0, 0.2) 0 -1px 7px 1px, inset #441313 0 -1px 9px, rgba(255, 0, 0, 0.5) 0 2px 0; }\\n  to {\\n    background-color: #F00; } }\\n  @keyframes blinkRed {\\n  from {\\n    background-color: #F00; }\\n  50% {\\n    background-color: #570000;\\n    box-shadow: rgba(0, 0, 0, 0.2) 0 -1px 7px 1px, inset #441313 0 -1px 9px, rgba(255, 0, 0, 0.5) 0 2px 0; }\\n  to {\\n    background-color: #F00; } }\\n  .tdm-led .status-indicator.status-indicator-red.status-blink {\\n        -webkit-animation: blinkRed 0.75s infinite;\\n        animation: blinkRed 0.75s infinite; }\\n  .tdm-led .status-indicator.status-indicator-blue {\\n      background-color: #3F8CFF;\\n      box-shadow: rgba(0, 0, 0, 0.2) 0 -1px 7px 1px, inset #006 0 -1px 9px, #3F8CFF 0 2px 14px; }\\n  @-webkit-keyframes blinkBlue {\\n  from {\\n    background-color: #3F8CFF; }\\n  50% {\\n    background-color: #003c96;\\n    box-shadow: rgba(0, 0, 0, 0.2) 0 -1px 7px 1px, inset #006 0 -1px 9px, #3F8CFF 0 2px 0; }\\n  to {\\n    background-color: #3F8CFF; } }\\n  @keyframes blinkBlue {\\n  from {\\n    background-color: #3F8CFF; }\\n  50% {\\n    background-color: #003c96;\\n    box-shadow: rgba(0, 0, 0, 0.2) 0 -1px 7px 1px, inset #006 0 -1px 9px, #3F8CFF 0 2px 0; }\\n  to {\\n    background-color: #3F8CFF; } }\\n  .tdm-led .status-indicator.status-indicator-blue.status-blink {\\n        -webkit-animation: blinkBlue 0.75s infinite;\\n        animation: blinkBlue 0.75s infinite; }\\n  .tdm-led .status-indicator.status-disabled {\\n      background-color: #b7b7b7;\\n      box-shadow: rgba(56, 56, 56, 0.2) 0 -1px 7px 1px, inset #535353 0 -1px 9px, inset #636363 0 2px 14px; }\\n\"","import { Component, Input, ChangeDetectionStrategy, SimpleChanges, OnChanges } from '@angular/core';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\n\n@Component({\n  selector: 'tdm-led',\n  templateUrl: './led.component.html',\n  styleUrls: [ './led.component.scss' ],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class TdmLedComponent implements OnChanges {\n  @Input() color: 'red' | 'blue' | 'yellow' | 'green';\n  @Input() disabled: boolean;\n  @Input() blink: boolean;\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if ('disabled' in changes) {\n      this.disabled = coerceBooleanProperty(this.disabled);\n    }\n    if ('blink' in changes) {\n      this.blink = coerceBooleanProperty(this.blink);\n    }\n  }\n}\n","module.exports = \"<div class=\\\"markdown-body\\\" [class.overflow-container]=\\\"overflowContainer\\\">\\n  <div class=\\\"markdown-content\\\" *ngIf=\\\"markdown\\\" [innerHtml]=\\\"markdown\\\"></div>\\n  <pre *ngIf=\\\"code\\\" class=\\\"lang-{{code.lang}}\\\"><code class=\\\"lang-{{code.lang}}\\\" [innerHtml]=\\\"code.code\\\"></code></pre>\\n  <ng-content></ng-content>\\n</div>\\n\\n\"","module.exports = \".tdm-code-example {\\n  margin: 10px;\\n  padding: 15px;\\n  max-height: 65vh;\\n  overflow: auto; }\\n\"","import { Component, Input, ChangeDetectionStrategy, SimpleChanges, OnChanges } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\n\n@Component({\n  selector: 'tdm-markdown-view',\n  templateUrl: './markdown-view.component.html',\n  styleUrls: [ './markdown-view.component.scss' ],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class TdmMarkdownViewComponent implements OnChanges {\n  @Input() overflowContainer: boolean;\n  @Input() markdown: string;\n  @Input() code: {\n    lang: string;\n    code: string;\n  };\n\n  constructor(private sanitizer: DomSanitizer) { }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if ('overflowContainer' in changes) {\n      this.overflowContainer = coerceBooleanProperty(this.overflowContainer);\n    }\n    if ('markdown' in changes) {\n      this.markdown = <any> this.sanitizer.bypassSecurityTrustHtml(this.markdown);\n    }\n  }\n}\n","module.exports = \"<header>\\n  <h1>{{title}}</h1>\\n  <h2>{{description}}</h2>\\n  <button class=\\\"tutorial-btn\\\" [routerLink]=\\\"[buttonLink]\\\" mat-raised-button color=\\\"primary\\\">{{buttonText}}</button>\\n  <div class=\\\"install-box mat-body-2\\\">\\n    npm install --save {{installCmd}}\\n  </div>\\n  <div class=\\\"mat-body-2\\\" *ngIf=\\\"version && ngVersion\\\">\\n    version: {{version}} / angular: {{ngVersion}}\\n  </div>\\n</header>\\n\"","module.exports = \"/**\\n * Applies styles for users in high contrast mode. Note that this only applies\\n * to Microsoft browsers. Chrome can be included by checking for the `html[hc]`\\n * attribute, however Chrome handles high contrast differently.\\n */\\n/* Theme for the ripple elements.*/\\n/* stylelint-disable material/no-prefixes */\\n/* stylelint-enable */\\nheader {\\n  text-align: center;\\n  color: #ffffff;\\n  background: #1565c0;\\n  padding: 60px 0; }\\nheader h1 {\\n    font-size: 56px;\\n    font-weight: 300;\\n    line-height: 56px; }\\nheader h2 {\\n    font-size: 18px;\\n    font-weight: 300;\\n    line-height: 28px; }\\nheader .install-box {\\n    margin: 30px 0 0 0;\\n    padding: 20px 0;\\n    background-color: rgba(0, 0, 0, 0.3);\\n    color: #f7ff59;\\n    letter-spacing: 0.3px; }\\n.tutorial-btn {\\n  margin-top: 50px; }\\n\"","import { Component, Input, ChangeDetectionStrategy } from '@angular/core';\n\nfunction fullName(pkg: string): string {\n  return `@tdm/${pkg}`;\n}\n\n@Component({\n  selector: 'tdm-package-welcome',\n  templateUrl: './package-welcome.component.html',\n  styleUrls: [ './package-welcome.component.scss' ],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class TdmPackageWelcomeComponent {\n  @Input() name: string;\n  @Input() deps: string[];\n  @Input() title: string;\n  @Input() description: string;\n  @Input() ngVersion: string;\n  @Input() version: string;\n  @Input() buttonText: string;\n  @Input() buttonLink: string;\n\n  get installCmd(): string {\n    const pkgs = [this.name, ...(this.deps || [])];\n    return pkgs.map(fullName).join('  ');\n  }\n\n}\n","export { TutorialPageComponent } from './tutorial-page.component';\n","module.exports = \"<mat-drawer-container autosize=\\\"autoSize\\\">\\n  <mat-drawer mode=\\\"side\\\" opened=\\\"true\\\">\\n    <mat-nav-list>\\n      <ng-container *ngFor=\\\"let t of tutorialsChanged | async\\\">\\n        <h3 *ngIf=\\\"t.tutorial.subHeader\\\" matSubheader>{{t.tutorial.subHeader}}</h3>\\n        <a mat-list-item\\n           [routerLink]=\\\"['..', t.tutorial.id]\\\"\\n           routerLinkActive=\\\"active\\\">{{t.tutorial.name}}</a>\\n      </ng-container>\\n    </mat-nav-list>\\n  </mat-drawer>\\n  <mat-drawer-content>\\n    <div class=\\\"tdm-page\\\">\\n      <div class=\\\"tdm-page-content\\\" tdmTocArea #tocArea=\\\"tocArea\\\" tdmAnchorTrap>\\n        <span #tutorialView></span>\\n        <tdm-toc [tocArea]=\\\"tocArea\\\">\\n          <a *tocLinkTemplate=\\\"let ctx;\\\"\\n             [routerLink]=\\\"['./']\\\"\\n             [fragment]=\\\"ctx.link.id\\\">{{ ctx.link.name }}</a>\\n        </tdm-toc>\\n      </div>\\n    </div>\\n  </mat-drawer-content>\\n</mat-drawer-container>\\n\"","module.exports = \"/**\\n * Applies styles for users in high contrast mode. Note that this only applies\\n * to Microsoft browsers. Chrome can be included by checking for the `html[hc]`\\n * attribute, however Chrome handles high contrast differently.\\n */\\n/* Theme for the ripple elements.*/\\n/* stylelint-disable material/no-prefixes */\\n/* stylelint-enable */\\nmat-drawer-container {\\n  background: none;\\n  flex: 1; }\\nmat-drawer {\\n  background: #1565c0; }\\nmat-drawer a[mat-list-item] {\\n    color: #FFFFFF; }\\n\"","import { Subscription } from 'rxjs/Subscription';\nimport { Observable } from 'rxjs/Observable';\nimport { debounceTime, tap } from 'rxjs/operators';\nimport {\n  AfterViewInit,\n  Component,\n  ComponentFactoryResolver,\n  Inject,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n  ViewContainerRef\n} from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport { ActivatedRoute, Router } from '@angular/router';\n\nimport { TutoriableComponent, TutorialService } from '../../services/tutorial.service';\nimport { TocAreaDirective } from '../../toc';\n\n@Component({\n  selector: 'tutorial-page',\n  styleUrls: [ './tutorial-page.component.scss' ],\n  templateUrl: './tutorial-page.component.html'\n})\nexport class TutorialPageComponent implements OnInit, AfterViewInit, OnDestroy {\n  autoSize: boolean = false;\n  tutorialsChanged: Observable<Array<TutoriableComponent<any>>>;\n  @ViewChild('tutorialView', { read: ViewContainerRef }) tutVcRef: ViewContainerRef;\n  @ViewChild('tocArea') tocArea: TocAreaDirective;\n\n  private _subs: Subscription;\n\n  constructor(@Inject(DOCUMENT) private document: Document,\n              private tutorialService: TutorialService,\n              private resolver: ComponentFactoryResolver,\n              private route: ActivatedRoute,\n              private router: Router) {\n    this.tutorialsChanged = tutorialService.tutorialsChanged\n      .pipe(\n        debounceTime(100),\n        tap(() => {\n          this.autoSize = true;\n          setTimeout(() => this.autoSize = false, 1);\n        })\n      );\n  }\n\n  ngOnInit(): void {\n    this._subs = this.route.paramMap.subscribe(params => {\n      const id = params.get('name');\n      const tutorial = this.tutorialService.get(id);\n      if ( !tutorial ) {\n        this.router.navigate([ '/page-404' ]);\n      } else {\n        this.renderTutorial(tutorial);\n      }\n    });\n  }\n\n  ngAfterViewInit(): void {\n    // On init, the sidenav content element doesn't yet exist, so it's not possible\n    // to subscribe to its scroll event until next tick (when it does exist).\n    Promise.resolve().then(() => {\n      this.tocArea.scrollContainer = this.document.querySelector('.mat-drawer-content');\n    });\n  }\n\n  ngOnDestroy(): void {\n    this._subs.unsubscribe();\n  }\n\n  private renderTutorial(tutorial: TutoriableComponent<any>): void {\n    this.tutVcRef.clear();\n    const componentFactory = this.resolver.resolveComponentFactory(tutorial);\n    const cmpRef = this.tutVcRef.createComponent<any>(\n      componentFactory,\n      this.tutVcRef.length\n    );\n    this.tocArea.reinitQueryLinks(Promise.resolve(cmpRef.instance.code));\n  }\n}\n","import { Component } from \"@angular/core\";\n\n@Component({\n  selector: 'ui-block',\n  template: `\n<mat-spinner color=\"primary\"></mat-spinner>\n<span>Please wait...</span>\n`\n})\nexport class UiBlock {\n\n}\n","import { Observable } from 'rxjs/Observable';\nimport { Subject } from 'rxjs/Subject';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\nimport { Subscription } from 'rxjs/Subscription';\nimport { combineLatest as CombineLatest } from 'rxjs/observable/combineLatest';\nimport { map, tap, combineLatest } from 'rxjs/operators';\n\nimport { SelectionModel, CollectionViewer } from '@angular/cdk/collections';\nimport { DataSource } from '@angular/cdk/table';\nimport { MatTableSortData } from './types';\nimport { createFilter, filter, DataSourceFilter, DataSourceFilterToken } from './filtering';\nimport { sortData } from './sorting';\nimport { Paginator, PaginatorChangeEvent } from './pagination';\n\nconst emptySort: MatTableSortData = {column: null, order: 'asc'};\n\nexport class DataSourceContainer<T = any> extends DataSource<T> {\n\n  /**\n   * If true, pagination is used.\n   *\n   * @see DataSourceDirective#pagination\n   *\n   * @default false\n   * @type {boolean}\n   */\n  usePagination: boolean = false;\n\n  /**\n   * The buffer for virtual lists.\n   *\n   * @default 10\n   */\n  buffer: number = 10;\n\n  /**\n   * Notification stream for source changes.\n   */\n  readonly onSourceChanged: Observable<void>;\n\n  /**\n   * Notification stream for data changes.\n   * Data change is different from source change.\n   * A Source change will trigger a data change but a data change might also trigger from different\n   * actions, e.g. filtering\n   */\n  readonly onDataChanged: Observable<void>;\n\n  /**\n   * When set to True will not disconnect upon table disconnection, otherwise unsubscribe from the\n   * datatsource when the table disconnects.\n   */\n  readonly keepAlive: boolean;\n\n  get sort(): MatTableSortData {\n    return this._sort$.value;\n  }\n  set sort(sort: MatTableSortData) {\n    this._sort$.next(sort);\n  }\n\n  get filteredData(): T[] {\n    return this._filteredData;\n  }\n\n  get filter(): DataSourceFilter {\n    return this._filter$.value;\n  }\n\n  get length(): number {\n    return this._rawData$.value.length;\n  }\n\n  get source(): T[] {\n    return this._rawData$.value;\n  }\n\n  get pagination(): Paginator {\n    return this._pagination;\n  }\n\n  /**\n   * Represents selected items on the data source.\n   * @returns {SelectionModel<T>}\n   */\n  get selection(): SelectionModel<T> {\n    return this._selection;\n  }\n\n  protected _pagination = new Paginator();\n  protected _selection = new SelectionModel<T>(true, []);\n  protected _renderedData: T[] = [];\n  protected _rawData$ = new BehaviorSubject<T[]>([]);\n  protected _filteredData$: Observable<T[]>;\n  protected _filter$ = new BehaviorSubject<DataSourceFilter>(undefined);\n  protected _sort$ = new BehaviorSubject<MatTableSortData>({column: null, order: 'asc'});\n\n  protected gc: Subscription;\n\n  private _sourceChanged$: Subject<void> = new Subject<void>();\n  private _filteredData: T[];\n\n  constructor(initialData: T[] | Observable<T[]> | boolean, keepAlive: boolean)\n  constructor(initialData: T[] | Observable<T[]>)\n  constructor(keepAlive: boolean)\n  constructor()\n  /**\n   *\n   * @param initialData\n   * @param keepAlive When set to True will not disconnect upon table disconnection, otherwise does.\n   */\n  constructor(initialData?: T[] | Observable<T[]> | boolean, keepAlive?: boolean) {\n    super();\n\n    if (typeof initialData === 'boolean') {\n      keepAlive = initialData;\n    } else if (initialData) {\n      this.updateSource(initialData);\n    }\n    this.keepAlive = keepAlive;\n\n    this.onSourceChanged = this._sourceChanged$.asObservable();\n\n    this._filteredData$ = CombineLatest([this._rawData$, this._filter$])\n      .pipe(\n        map( () => filter(this._rawData$.value, this.filter) ),\n        tap( filteredData => {\n          if (this.usePagination) {\n            this.pagination.total = filteredData.length;\n            this.pagination.page = filteredData.length > 0 ? 1 : 0;\n          }\n        }),\n        combineLatest(this._sort$, (filteredData, sort) => {\n          if (!sort || sort.order === '') {\n            return this._filteredData = filteredData;\n          }\n\n          const sortFn = typeof sort.sortFn === 'function'\n            ? sort.sortFn\n            : sortData\n          ;\n          return this._filteredData =  sortFn(sort, filteredData);\n        })\n      );\n    this.onDataChanged = this._filteredData$.pipe(map( f => { return undefined; } ));\n  }\n\n  // workaround to refresh the page since row header and row can't communicate\n  refresh(): void {\n    this._rawData$.next(this._rawData$.value);\n  }\n\n  setFilter(value: DataSourceFilterToken, ...properties: string[]): void {\n    this._filter$.next(createFilter(value, properties));\n  }\n\n  /**\n   * Updates the source.\n   * If a an array is supplied, it is a one time value set as the source.\n   * If an array is supplied while an observable is already set, the array value will be set but and subsequent streams\n   * will override the values.\n   * To disconnect an observable source invoke the dispose() method\n   * @param data\n   * @param aggregateMode {boolean} [false] when true, the data is added to the previous data-set (async pagination)\n   */\n  updateSource(data: T[] | Observable<T[]>, aggregateMode: boolean = false): void {\n\n    if (!Array.isArray(data) && typeof (data as Observable<any>).subscribe !== 'function') {\n      data = [];\n    }\n\n    this.dispose(true);\n\n    if (Array.isArray(data)) {\n      this.updateRawData(data, aggregateMode);\n    } else {\n      this.gc = data.subscribe( d =>  this.updateRawData(d, aggregateMode) );\n    }\n  }\n\n  dispose(local?: boolean): void {\n    if (this.gc) {\n      this.gc.unsubscribe();\n      this.gc = undefined;\n    }\n    if (!local) {\n      this._sourceChanged$.unsubscribe();\n    }\n  }\n\n  disconnect(cv: CollectionViewer): void {\n    if (this.keepAlive === false) {\n      this.dispose();\n    }\n  }\n\n  connect(cv: CollectionViewer): Observable<T[]> {\n    return CombineLatest(cv.viewChange, this._filteredData$, this._pagination.onChange)\n      .pipe(\n        map((result: [{start: number, end: number}, T[], PaginatorChangeEvent]) => {\n          let [view, displayData, pageChange] = result;\n\n          if (this.usePagination && this._pagination.total !== displayData.length) {\n            this._pagination.total = displayData.length;\n            return this._renderedData;\n          }\n\n          // Set the rendered rows length to the virtual page size. Fill in the data provided\n          // from the index start until the end index or pagination size, whichever is smaller.\n          if (this.usePagination) {\n            const range = this.pagination.range;\n            displayData = displayData.slice(range[0], range[1]);\n          }\n\n          this._renderedData.length = displayData.length;\n\n          const rangeStart = Math.max(0, view.start - this.buffer);\n          const rangeEnd = Math.min(displayData.length, view.end + this.buffer);\n\n          for (let i = rangeStart; i < rangeEnd; i++) {\n            this._renderedData[i] = displayData[i];\n          }\n\n          return this._renderedData; // Currently ignoring the view\n        })\n      );\n  }\n\n  protected updateRawData(data: T[], aggregateMode: boolean): void {\n    this.selection.clear();\n    this.sort = emptySort;\n\n    const coll: T[] = aggregateMode === true &&  Array.isArray(this._rawData$.value)\n      ? [ ...this._rawData$.value, ...data ] // TODO: check performance\n      : data.slice()\n    ;\n\n    this._rawData$.next(coll);\n    this._sourceChanged$.next();\n  }\n}\n","import { Directive, Input } from '@angular/core';\n\nimport { coerceBooleanProperty, coerceNumberProperty } from '@angular/cdk/coercion';\nimport { DataSourceContainer } from './data-source-container';\n\n@Directive({\n  selector: 'cdk-table[dataSource], mat-table[dataSource]',\n  exportAs: 'dataSource'\n})\nexport class DataSourceDirective<T> {\n\n  get dataSource(): DataSourceContainer<T> { return this._dataSource; }\n  @Input() set dataSource(value: DataSourceContainer<T>) {\n    this._dataSource = value;\n    this.sync();\n  }\n\n  get buffer(): number { return this.ghost.buffer; }\n  @Input() set buffer(value: number) {\n    this.ghost.buffer = coerceNumberProperty(value);\n    this.sync();\n  }\n\n  /**\n   * Proxy to the usePagination property in DataSourceContainer.\n   * @returns {boolean}\n   */\n  get pagination(): boolean { return this.ghost.usePagination; }\n  @Input() set pagination(value: boolean) {\n    this.ghost.usePagination = coerceBooleanProperty(value);\n    this.sync();\n  }\n\n\n  /**\n   * Just an alias for DataSourceDirective#tableDataSource\n   * @returns {DataSourceContainer<T>}\n   */\n  get ds(): DataSourceContainer<T> {\n    return this._dataSource;\n  }\n\n  private _dataSource: DataSourceContainer<T>;\n  /** A ghost object to hold properties synced with _dataSource  */\n  private ghost: Partial<DataSourceContainer<T>> = {};\n\n  private sync(): void {\n    if (this._dataSource) {\n      if (typeof this.ghost.buffer === 'number') {\n        this._dataSource.buffer = this.ghost.buffer;\n      }\n\n      if (typeof this.ghost.usePagination === 'boolean') {\n        this._dataSource.usePagination = this.ghost.usePagination;\n      }\n    }\n  }\n\n}\n","\nexport type DataSourcePredicate = (item: any, properties?: string[]) => boolean;\nexport type DataSourceFilterToken = undefined | DataSourcePredicate | any;\n\nexport interface DataSourceFilterType {\n  type: 'value' | 'predicate';\n  properties?: string[]\n  filter: any | DataSourcePredicate;\n}\n\n\nexport type DataSourceFilter = undefined | DataSourceFilterType ;\n\nexport function createFilter(value: DataSourceFilterToken, properties: string[]): DataSourceFilter {\n  return value === undefined\n    ? undefined\n    : {\n      properties: properties.length > 0 ? properties : undefined,\n      type: typeof value === 'function' ? 'predicate' : 'value',\n      filter: value\n    };\n}\n\nexport function filter<T>(rawData: T[], filter: DataSourceFilter): T[] {\n  if (!filter || !rawData || rawData.length === 0) {\n    return rawData;\n  } else {\n    const props = filter.properties\n      ? filter.properties\n      : Object.keys(rawData[0]) // assuming all objects are identical\n    ;\n\n    if (filter.type === 'predicate') {\n      const value: DataSourcePredicate = <any>filter.filter;\n      return rawData.filter( v => value(v, props) );\n    } else if ( filter.type === 'value' ) {\n      const value = filter.filter;\n      return rawData.filter( v => props.some( f => v[f] === value) );\n    }\n\n  }\n  return rawData;\n}\n","export { MatTableSortData, SortHandler } from './types';\nexport { Paginator, PaginatorChangeEvent } from './pagination';\nexport { DataSourceDirective } from './data-source.directive';\nexport { DataSourceContainer } from './data-source-container';\n","import { Observable } from 'rxjs/Observable';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\n\nexport interface PaginatorChangeEvent {\n  page?: [number, number];\n  perPage?: [number, number];\n  total?: [number, number];\n}\n\nexport class Paginator {\n\n  get perPage(): number { return this._perPage; }\n  set perPage(value: number) {\n    if (value < 1) {\n      throw new Error(`Invalid total size value ${value}`);\n    }\n\n    if (this._perPage !== value) {\n      const changes: PaginatorChangeEvent = { perPage: [this._perPage, this._perPage = value] };\n\n      const prev = this._page;\n      this.calcPages();\n      if (prev !== this._page) {\n        changes.page = [prev, this._page];\n      }\n\n      this.onChange$.next(changes);\n    }\n\n  }\n\n  /**\n   * Get / Set the current page\n   * @returns {number}\n   */\n  get page(): number { return this._page; }\n  set page(value: number) {\n    if (value < 0 || value > this._totalPages) {\n      throw new Error(`Invalid page index ${value}`);\n    }\n\n    if (this._page !== value) {\n      this.setPage(value, true);\n    }\n  }\n\n  get total(): number { return this._total; }\n  set total(value: number) {\n    if (value < 0) {\n      throw new Error(`Invalid total size value ${value}`);\n    }\n\n    if (this._total !== value) {\n      const changes: PaginatorChangeEvent = { total: [this._total, this._total = value] };\n\n      const prev = this._page;\n      this.calcPages();\n      if (prev !== this._page) {\n        changes.page = [prev, this._page];\n      }\n\n      this.onChange$.next(changes);\n    }\n  }\n\n  /**\n   * The amount of pages in this paginator\n   * @returns {number}\n   */\n  get totalPages(): number {\n    return this._totalPages;\n  }\n\n  get range(): [number, number] {\n    const start = (this.page - 1) * this.perPage;\n    return [start, Math.min(this._total, start + this.perPage)];\n  }\n\n  readonly onChange: Observable<PaginatorChangeEvent>;\n  protected onChange$: BehaviorSubject<PaginatorChangeEvent>;\n\n  private _total: number = 0;\n  private _perPage: number = 10;\n  private _page: number = 1;\n  private _totalPages: number = 0;\n\n  constructor() {\n    this.onChange$ = new BehaviorSubject<PaginatorChangeEvent>({page: [null, 1]});\n    this.onChange = this.onChange$.asObservable();\n  }\n\n  canMove(value: number): boolean {\n    const p = this._page + value;\n    return p >= 1 && p <= this.totalPages;\n  }\n  hasNext(): boolean { return this.canMove(1); }\n  hasPrev(): boolean { return this.canMove(-1); }\n\n  move(value: number): void { this.page = this._page + value; }\n  nextPage(): void { this.move(1); }\n  prevPage(): void { this.move(-1); }\n\n\n  reset(): void {\n    this.page = 1;\n  }\n\n  protected setPage(value: number, emitOnChange: boolean): void {\n    const prev = this._page;\n    this._page = value;\n    if (emitOnChange) {\n      this.onChange$.next({page: [prev, value]});\n    }\n  }\n\n  /**\n   * Calculate the number of pages.\n   * returns true if the current page has changed due to calculation. (current page > new pages value)\n   * @returns {boolean}\n   */\n  protected calcPages(): void {\n    this._totalPages = Math.ceil(this._total / this.perPage);\n    if (this._totalPages > 0 && this._page > this._totalPages) {\n      this.setPage(this._totalPages, false);\n    }\n  }\n}\n","import { MatTableSortData } from './types';\n\nexport function sortData<T>(sort: MatTableSortData, data: T[]): T[] {\n  let prop = sort.column;\n  if (!prop) return data;\n\n  return data.slice().sort((a, b) => {\n\n    let valueA = isNaN(+a[prop]) ? a[prop] : +a[prop];\n    let valueB = isNaN(+b[prop]) ? b[prop] : +b[prop];\n\n    return (valueA < valueB ? -1 : 1) * (sort.order === 'asc' ? 1 : -1);\n  });\n}\n","import { Directive, HostListener, Input } from '@angular/core';\nimport { LocationService } from '../services/location.service';\n\nconst DEFAULT_OPTIONS = { cssTrap: 'tdm-anchor-trap', maxBubble: 3 };\n\n@Directive({\n  selector: '[tdmAnchorTrap]'\n})\nexport class AnchorTrapDirective {\n  @Input('ngdAnchorTrap') options?: { cssTrap?: string; maxBubble?: number };\n\n  constructor(private location: LocationService) { }\n\n  @HostListener('click', ['$event'])\n  onClick($event: MouseEvent): any {\n    let anchor: HTMLAnchorElement = <any> $event.target;\n    const cssTrap = (this.options && this.options.cssTrap) || DEFAULT_OPTIONS.cssTrap;\n    const maxBubble = (this.options && this.options.maxBubble) || DEFAULT_OPTIONS.maxBubble;\n    for (let i = 0; i < maxBubble && anchor; i++) {\n      if (anchor.classList.contains(cssTrap)) {\n        this.location.tryNavigateToAnchor(anchor);\n        $event.stopPropagation();\n        $event.preventDefault();\n      }\n      anchor = <any> anchor.parentElement;\n    }\n  }\n}\n","export { TutorialService, TutoriableComponent, Tutorial } from './services/tutorial.service';\nexport { UiBlockService, BlockingRef, UiBlockOptions, UiBlockRef } from './services/ui-block';\nexport { LocationService } from './services/location.service';\nexport { TopNavService, TopNavLink } from './services/top-nav.service';\nexport * from './data-source';\nexport { SharedModule } from './shared.module';\nexport { MaterialModule } from './material';\nexport {\n  UiBlock,\n  TdmCodeViewComponent,\n  CodeViewItem,\n  TdmFeatureListItem,\n  TutorialPageComponent\n} from './components';\n\nexport * from './toc';\n","import { NgModule } from '@angular/core';\n\nimport { OverlayModule } from '@angular/cdk/overlay';\nimport { PortalModule } from '@angular/cdk/portal';\n\nimport {\n  MatAutocompleteModule,\n  MatButtonModule,\n  MatButtonToggleModule,\n  MatCardModule,\n  MatChipsModule,\n  MatCheckboxModule,\n  MatDialogModule,\n  MatExpansionModule,\n  MatGridListModule,\n  MatIconModule,\n  MatInputModule,\n  MatListModule,\n  MatMenuModule,\n  MatProgressBarModule,\n  MatProgressSpinnerModule,\n  MatRadioModule,\n  MatRippleModule,\n  MatSelectModule,\n  MatSidenavModule,\n  MatSliderModule,\n  MatSlideToggleModule,\n  MatStepperModule,\n  MatSnackBarModule,\n  MatTabsModule,\n  MatToolbarModule,\n  MatTooltipModule,\n  MatSortModule,\n  MatPaginatorModule,\n  MatTableModule,\n  MatDatepickerModule,\n  MatNativeDateModule\n} from '@angular/material';\n\nconst MATERIAL_MODULES = [\n  OverlayModule,\n  PortalModule,\n  MatAutocompleteModule,\n  MatButtonModule,\n  MatButtonToggleModule,\n  MatCardModule,\n  MatChipsModule,\n  MatCheckboxModule,\n  MatDialogModule,\n  MatExpansionModule,\n  MatGridListModule,\n  MatIconModule,\n  MatInputModule,\n  MatListModule,\n  MatMenuModule,\n  MatProgressBarModule,\n  MatProgressSpinnerModule,\n  MatRadioModule,\n  MatRippleModule,\n  MatSelectModule,\n  MatSidenavModule,\n  MatSliderModule,\n  MatSlideToggleModule,\n  MatStepperModule,\n  MatSnackBarModule,\n  MatTabsModule,\n  MatToolbarModule,\n  MatTooltipModule,\n  MatSortModule,\n  MatPaginatorModule,\n  MatTableModule,\n  MatDatepickerModule,\n  MatNativeDateModule\n];\n\n@NgModule({\n  imports: MATERIAL_MODULES,\n  exports: MATERIAL_MODULES,\n})\nexport class MaterialModule {\n}\n","import { CommonModule } from '@angular/common';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { FlexLayoutModule } from '@angular/flex-layout';\nimport { RouterModule } from '@angular/router';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { HttpClientModule } from '@angular/common/http';\nimport { HttpClientResourceModule } from '@tdm/ngx-http-client';\n\nimport { MaterialModule } from './material';\nimport { TocModule } from './toc';\n\nexport const ROOT_MODULES: any = [\n  CommonModule,\n  BrowserAnimationsModule,\n  FlexLayoutModule,\n  ReactiveFormsModule,\n  HttpClientModule,\n  MaterialModule,\n  HttpClientResourceModule,\n  TocModule\n];\n\nexport const MODULES: any = [\n  CommonModule,\n  FlexLayoutModule,\n  ReactiveFormsModule,\n  RouterModule,\n  HttpClientModule,\n  MaterialModule,\n  HttpClientResourceModule,\n  TocModule\n];\n","import { Pipe, PipeTransform, Type } from '@angular/core';\nimport { stringify, Omit } from '@tdm/core/tdm';\nimport { ExtractedCode } from '@webpack-ext/tdm-code-sample/client';\n\nexport interface CodeExtractSectionQuery extends Partial<Omit<ExtractedCode, 'code'>> { }\n\nfunction invalidPipeArgumentError(type: Type<any>, value: any) {\n  return Error(`InvalidPipeArgument: '${value}' for pipe '${stringify(type)}'`);\n}\n\n/**\n * Filter's a collection [[ExtractedCode]] instances based on a provided a query and returns the filtered collection or\n * when explicitly set, the code of each [[ExtractedCode]] instance.\n *\n * ```\n * ExtractedCodeResult instance | tdmCode[:query[:codeOnly]]`\n * ```\n *\n * The query is an object, similar to [[ExtractedCode]] but without the code, where each property->value pair in the\n * query must match the same property->value pair in the extracted code. If all match the query pass.\n *\n * To return the code instead of the [[ExtractedCode]] instance, set the 2nd parameter (`codeOnly`) to true.\n */\n@Pipe({name: 'tdmCode'})\nexport class TdmCodeExtractPipe implements PipeTransform {\n  transform(value: ExtractedCode[], query: CodeExtractSectionQuery[],\n            codeOnly?: boolean): Array<string | ExtractedCode> {\n    if (!Array.isArray(query) || query.length === 0) {\n      throw invalidPipeArgumentError(TdmCodeExtractPipe, 'query');\n    }\n    if (!value) {\n      return [];\n    }\n\n    if (!Array.isArray(value) && (value && Array.isArray((<any> value)['default'])) ) {\n      value = (<any> value)['default'];\n    } else if (!Array.isArray(value)) {\n      throw invalidPipeArgumentError(TdmCodeExtractPipe, `Value must be an array, got ${stringify(value)}`);\n    }\n\n    const queryKeys = [];\n    const result = value.filter( v => {\n      for (let i in query) { // tslint:disable-line\n        const keys = queryKeys[i] || (queryKeys[i] = Object.keys(query[i]));\n        if (keys.every( k => v[k] === query[i][k])) {\n          return true;\n        }\n      }\n    });\n    return codeOnly === true ? result.map( c => c.code ) : result;\n  }\n}\n","export { TdmCodeExtractPipe } from './code-filter.pipe';\n","/**\n * Based on https://github.com/angular/angular/blob/master/aio/src/app/shared/location.service.ts\n */\nimport { Observable } from 'rxjs/Observable';\nimport { ReplaySubject } from 'rxjs/ReplaySubject';\nimport { map } from 'rxjs/operators';\nimport { Injectable } from '@angular/core';\nimport { Location, PlatformLocation } from '@angular/common';\nimport { NavigationExtras, Router, UrlSegment } from '@angular/router';\n\n@Injectable()\nexport class LocationService {\n  currentUrl: Observable<string>;\n  currentPath: Observable<string>;\n  private urlSubject: ReplaySubject<string>;\n\n  constructor(private router: Router,\n              private location: Location,\n              private platformLocation: PlatformLocation) {\n    this.urlSubject = new ReplaySubject<string>(1);\n    this.currentUrl = this.urlSubject.pipe( map(url => this.stripSlashes(url)) );\n    this.currentPath = this.currentUrl.pipe( map(url => url.match(/[^?#]*/)[0]) );\n    this.urlSubject.next(location.path(true));\n    this.location.subscribe(state => this.urlSubject.next(state.url) );\n  }\n\n  // TODO?: ignore if url-without-hash-or-search matches current location?\n  go(url: string) {\n    if (!url) {\n      return;\n    }\n    url = this.stripSlashes(url);\n    if (/^http/.test(url)) {\n      // Has http protocol so leave the site\n      // (or do a \"full page navigation\" if a ServiceWorker update has been activated)\n      this.goExternal(url);\n    } else {\n      this.location.go(url);\n      this.urlSubject.next(url);\n    }\n  }\n\n  goExternal(url: string) {\n    window.location.assign(url);\n  }\n\n  replace(url: string) {\n    window.location.replace(url);\n  }\n\n  private stripSlashes(url: string) {\n    return url.replace(/^\\/+/, '').replace(/\\/+(\\?|#|$)/, '$1');\n  }\n\n  tryNavigateToAnchor(anchor: HTMLAnchorElement): void {\n    const extras: NavigationExtras = {};\n\n    if (anchor.hash) {\n      extras.fragment = anchor.hash.substr(1);\n    }\n    let href = anchor.getAttribute('href') || '.';\n    href = href.split('#')[0];\n\n    if (href[0] === '.') {\n      const path = href.split('/').filter( s => !!s);\n      const urlTree = this.router.parseUrl(this.location.path(true));\n      const primary = urlTree.root.children.primary;\n      urlTree.fragment = extras.fragment;\n      for ( let p of path) {\n        if (p === '..') {\n          primary.segments.pop();\n        } else if (p !== '.') {\n          primary.segments.push(new UrlSegment(p, {}));\n        }\n      }\n      this.router.navigateByUrl(urlTree, extras);\n    } else {\n      this.router.navigate(href.split('/').filter(s => !!s ), extras);\n    }\n  }\n}\n","import { BehaviorSubject } from 'rxjs/BehaviorSubject';\nimport { Injectable } from '@angular/core';\nimport { RouterLink } from '@angular/router';\n\nexport interface TopNavLink {\n  title: string;\n  imgIconSrc?: string;\n  // tslint:disable-next-line:max-line-length\n  routerLink: Partial<Pick<RouterLink, 'queryParams' | 'fragment' | 'queryParamsHandling' | 'preserveFragment' | 'skipLocationChange' | 'replaceUrl' | 'routerLink' | 'preserveQueryParams'>>;\n  routerLinkActiveOptions?: {\n    exact: boolean;\n  };\n  domain?: string;\n}\n\n@Injectable()\nexport class TopNavService {\n  navItems$ = new BehaviorSubject<TopNavLink[]>([]);\n\n  private currDomain: string;\n  private domainStack: string[] = [];\n  private domains: { [key: string]: TopNavLink[] } = {};\n  private rootDomain: TopNavLink[] = this.navItems$.getValue();\n\n  pushDomain(domain: string): void {\n    if (this.currDomain) {\n      this.domainStack.push(this.currDomain);\n    }\n    this.currDomain = domain;\n    this.emit(domain);\n  }\n\n  popDomain(): string | undefined {\n    this.currDomain = this.domainStack.pop();\n    this.emit(this.currDomain);\n    return this.currDomain;\n  }\n\n  addNavItem(nav: TopNavLink): void {\n    if (nav.domain) {\n      if (!this.domains[nav.domain]) {\n        this.domains[nav.domain] = [];\n      }\n      this.domains[nav.domain].push(nav);\n    } else {\n      this.rootDomain.push(nav);\n    }\n    this.emit(nav.domain);\n  }\n\n  removeNavItem(nav: TopNavLink): boolean {\n    const items: TopNavLink[] = nav.domain ? this.domains[nav.domain] : this.rootDomain;\n\n    const idx = items ? items.indexOf(nav) : -1;\n    if (idx > -1) {\n      items.splice(idx, 1);\n      this.emit(nav.domain);\n      return true;\n    }\n    return false;\n  }\n\n  private emit(domain?: string): void {\n    if (!domain && !this.currDomain) {\n      this.navItems$.next(this.rootDomain.slice());\n    } else if (domain === this.currDomain) {\n      this.navItems$.next(this.domains[domain].slice());\n    }\n  }\n}\n","import { Observable } from 'rxjs/Observable';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\nimport { shareReplay } from 'rxjs/operators';\nimport { Injectable } from '@angular/core';\n\nexport interface Tutorial {\n  id: string;\n  name: string;\n  subHeader?: string;\n}\n\nexport interface TutoriableComponent<T> extends Function {\n  new (...args: any[]): T;\n  tutorial: Tutorial;\n}\n\n@Injectable()\nexport class TutorialService {\n  tutorialsChanged: Observable<Array<TutoriableComponent<any>>>;\n  private tuts = new Map<string, TutoriableComponent<any>>();\n  private tuts$ = new BehaviorSubject<Array<TutoriableComponent<any>>>([]);\n\n  constructor() {\n    this.tutorialsChanged = this.tuts$.pipe(shareReplay());\n  }\n\n  addTutorial<T>(tutorial: TutoriableComponent<T>): void {\n    this.tuts.set(tutorial.tutorial.id, tutorial);\n    this.tuts$.next(Array.from(this.tuts.values()));\n  }\n\n  get(id: string): TutoriableComponent<any> | undefined {\n    return this.tuts.get(id);\n  }\n}\n","import { Observable } from 'rxjs/Observable';\nimport { Subscription } from 'rxjs/Subscription';\nimport { Injectable } from '@angular/core';\nimport { MatDialog, MatDialogRef, MatDialogConfig } from '@angular/material';\nimport { ComponentType } from '@angular/cdk/portal';\n\ninterface ActiveStream {\n  subs: Subscription,\n  ref?: UiBlockRef<any>\n}\n\nexport interface UiBlockOptions {\n  block?: boolean;\n  timeout?: number;\n  promise?: Promise<any>;\n}\n\nexport type UiBlockRef<T> =  MatDialogRef<T> & { blocking: BlockingRef };\n\nexport class BlockingRef implements UiBlockOptions {\n  block?: boolean;\n  timeout?: number;\n  promise?: Promise<any>;\n\n  private closed: boolean;\n\n  get isClosed(): boolean {\n    return this.closed;\n  }\n\n  constructor(private dialogRef: MatDialogRef<any>, private options: UiBlockOptions) {\n\n    if (this.options.timeout > 0) {\n      setTimeout(() => this.onTimeout(), this.options.timeout);\n    }\n\n    if (this.options.promise && typeof this.options.promise.then === 'function') {\n      this.options.promise\n        .then( () => this.onPromise() )\n        .catch( () => this.onPromise() );\n    }\n\n    dialogRef.afterClosed().subscribe( () => this.onClose() );\n  }\n\n  close(): void {\n    if (this.closed === true) {\n      return;\n    }\n    this.dialogRef.close();\n  }\n\n  private onTimeout(): void {\n    if (this.closed === true) {\n      return;\n    }\n    this.dialogRef.close();\n  }\n\n  private onPromise(): void {\n    if (this.closed === true) {\n      return;\n    }\n    this.dialogRef.close();\n  }\n\n  private onClose(): void {\n    if (this.closed === true) {\n      return;\n    }\n    this.closed = true;\n  }\n}\n\n@Injectable()\nexport class UiBlockService {\n  private activeStreams = new Map<Observable<boolean>, ActiveStream>();\n  private options: UiBlockOptions = {} as any;\n\n  constructor(protected dialog: MatDialog) {\n\n  }\n\n  block(value: boolean): this {\n    this.options.block = value;\n    return this;\n  }\n\n  closeWithTimeout(seconds: number): this {\n    this.options.timeout = seconds * 1000;\n    return this;\n  }\n\n  closeWithPromise(promise: Promise<any>): this {\n    this.options.promise = promise;\n    return this;\n  }\n\n  fromObservable<T>(obs$: Observable<boolean> ,component: ComponentType<T>,\n                 config?: MatDialogConfig): void {\n    const next = value => {\n      if (value && !this.activeStreams.get(obs$).ref ) {\n        const ref = this.open(component, config);\n        this.activeStreams.get(obs$).ref = ref;\n        ref.afterClosed().subscribe( () => this.activeStreams.get(obs$).ref = undefined );\n      } else {\n        const ref = this.activeStreams.get(obs$).ref;\n        if (ref) {\n          this.activeStreams.get(obs$).ref = undefined; // to prevent async re-call\n          ref.close();\n        }\n      }\n    };\n\n    const error = err => this.disconnectObservable(obs$);\n    const complete = () => this.disconnectObservable(obs$);\n\n    const activeStream: ActiveStream = <any>{};\n    this.activeStreams.set(obs$, activeStream);\n\n    activeStream.subs = obs$.subscribe(next, error, complete);\n\n  }\n\n  disconnectObservable(obs$): void {\n    const obsStore = this.activeStreams.get(obs$);\n    if (obsStore) {\n      if (!obsStore.subs.closed) {\n        obsStore.subs.unsubscribe();\n      }\n      if (obsStore.ref) {\n        obsStore.ref.close();\n      }\n      this.activeStreams.delete(obs$);\n    }\n  }\n\n  open<T>(component: ComponentType<T>,\n          config?: MatDialogConfig): UiBlockRef<T> {\n\n    if (config && !config.hasOwnProperty('disableClose')) {\n      config.disableClose = !this.options.block;\n    }\n\n    const dialogRef = this.dialog.open(component, config);\n\n    const blocking = new BlockingRef(dialogRef, this.options);\n\n    this.options = {} as any;\n\n    return Object.create(dialogRef, { blocking: { value: blocking } });\n  }\n\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { HttpDefaultConfig } from '@tdm/ngx-http-client';\n\nimport { MODULES, ROOT_MODULES } from './modules';\nimport { UiBlockService } from './services/ui-block';\nimport { LocationService } from './services/location.service';\nimport { TopNavService } from './services/top-nav.service';\n\nimport {\n  UiBlock,\n  TdmCodeViewComponent,\n  TdmMarkdownViewComponent,\n  TdmPackageWelcomeComponent,\n  TdmFeatureListComponent,\n  TdmLedComponent,\n  TutorialPageComponent\n} from './components';\nimport { CdkDetailRowDirective } from './cdk-detail-row.directive';\nimport { AnchorTrapDirective } from './directives/anchor-trap.directive';\nimport { DataSourceDirective } from './data-source';\nimport { TdmCodeExtractPipe } from './pipes';\n\nconst DECLARATIONS = [\n  TdmCodeViewComponent,\n  TdmMarkdownViewComponent,\n  TdmPackageWelcomeComponent,\n  TdmFeatureListComponent,\n  TdmLedComponent,\n  TutorialPageComponent,\n  UiBlock,\n  CdkDetailRowDirective,\n  AnchorTrapDirective,\n  DataSourceDirective,\n  TdmCodeExtractPipe\n];\n\n@NgModule({\n  declarations: DECLARATIONS,\n  imports: MODULES,\n  entryComponents: [ UiBlock ],\n  exports: DECLARATIONS\n})\nexport class DeclarationSharedModule {\n}\n\n// tslint:disable-next-line\n@NgModule({\n  imports: ROOT_MODULES,\n  exports: [\n    ...MODULES,\n    DeclarationSharedModule\n  ],\n  providers: [\n    UiBlockService,\n    LocationService,\n    TopNavService,\n    { provide: HttpDefaultConfig, useValue: HttpDefaultConfig.create({baseUrl: '/api'} ) }\n  ]\n})\nexport class SharedModuleRoot { }\n\n// tslint:disable-next-line\n@NgModule({\n  imports: MODULES,\n  exports: [\n    ...MODULES,\n    DeclarationSharedModule\n  ]\n})\nexport class SharedModule {\n  static forRoot(): ModuleWithProviders {\n    return { ngModule: SharedModuleRoot };\n  }\n}\n","export { TocHeadDirective } from './toc-head.directive';\nexport { TocAreaDirective } from './toc-area.directive';\nexport { TocLinkTemplateDirective } from './toc-link-template';\nexport { TocComponent } from './toc.component';\nexport { TocModule } from './toc.module';\n","import { Observable } from 'rxjs/Observable';\nimport { Subscription } from 'rxjs/Subscription';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\nimport { fromEvent } from 'rxjs/observable/fromEvent';\nimport { debounceTime } from 'rxjs/operators';\nimport { AfterContentInit, Directive, ElementRef, Input, OnDestroy, Optional } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\n\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { TocHeadDirective } from './toc-head.directive';\n\nconst DEFAULT_OFFSET_CACHE: [number, number] = [0, 0];\n\nconst DEFAULT_SELECTOR = `h1[id]:not(.no-toc), h2[id]:not(.no-toc), h3[id]:not(.no-toc)\\\n, h1 > a[id].anchor, h2 > a[id].anchor, h3 > a[id].anchor`;\n\nfunction isPromise<T>(value: any | Promise<T>): value is Promise<T> {\n  return value && typeof (<any> value).subscribe !== 'function' && typeof (value as any).then === 'function';\n}\n\n/**\n * A logical container and unit of work for a table of contents.\n * [[TocAreaDirective]] represents A group of [[TocHeadDirective]] and with them form an instance of\n * table of contents.\n *\n * [[TocAreaDirective]] contains the logic for handling the behaviour, which includes\n * adding/removing [[TocHeadDirective]] instances and handling scrolling to reflect the active\n * link.\n *\n * [[TocComponent]] uses [[TocAreaDirective]] to create a UI representation of the TOC.\n *\n * [[TocAreaDirective]] can works in a Directive mode or in standalone mode.\n *\n * ## Directive mode\n * In this mode, [[TocAreaDirective]] works with the [[TocHeadDirective]] directive using the\n * angular DI system and collects all instances of [[TocHeadDirective]] within its scope.\n * When the angular router is used, [[TocAreaDirective]] will use [[ActivatedRoute]] via DI\n * to automatically detect changes to the fragment portion of the URL and will try to scroll to\n * the link representing the fragment.\n *\n * > The HTML element H1, H2 and H3 when set with an `id` attribute (`<h1 id=\"4\">Title</h1>`) are\n * triggered by [[TocHeadDirective]], to exclude such elements add the class `no-toc`.\n *\n * ## Standalone mode\n * In this mode, [[TocAreaDirective]] requires manual instantiation by the developer and does not\n * go through the templates.\n * Standalone mode provides TOC support for static HTML content where [[TocHeadDirective]] are\n * manually created by searching for matching elements using the querySelector API.\n * [[TocHeadDirective]] support this scenario with [[TocHeadDirective#fromElement]]\n *\n * To automatically scroll a header link element into view when the fragment portion of a URL has\n * changed the developer needs to manually register to such notification and then use\n * [[TocAreaDirective.scrollTo]] to try and scroll it into view.\n * An alternative, easier way, is to initialize [[TocAreaDirective]] with an [[ActivatedRoute]]\n * instance and [[TocAreaDirective]] will take care of fragment changes.\n */\n@Directive({\n  selector: '[tdmTocArea]',\n  exportAs: 'tocArea'\n})\nexport class TocAreaDirective implements AfterContentInit, OnDestroy {\n  @Input()\n  set scrollContainer(value: Element) {\n    this._isWindowContainer = !value;\n    const scrollContainer = value || window;\n    if (scrollContainer !== this._scrollContainer) {\n      if (this._scrollSubscription) {\n        this._scrollSubscription.unsubscribe();\n      }\n      this._scrollContainer = scrollContainer;\n      if (scrollContainer) {\n        this._scrollSubscription = fromEvent(this._scrollContainer, 'scroll')\n          .pipe(debounceTime(10))\n          .subscribe(() => this.onScroll());\n      }\n    }\n  }\n\n  @Input() tocTitle: string;\n\n  /**\n   * When true will treat the internal content as static and will query for possible links.\n   * Query selector can be customised in [[TocAreaDirective.selector]].\n   *\n   * > Using `staticHtmlMode` when angular renders the internal content is possible but not\n   * recommended. Duplicate links will register (has workaround) and order is not preserved,\n   * angular elements will comes before or after static elements. (before on first route rendering,\n   * after on 2nd route rendering [same route, different params])\n   */\n  @Input() staticHtmlMode: boolean | Promise<any>;\n\n  /**\n   * The selector to use when `staticHtmlMode` is true.\n   * When not set default to [[TocAreaDirective#defaultSelector]]\n   *\n   * You can apply generic selector such as `a[id][name][level]` or to work in `staticHtmlMode` and\n   * support link elements activated by angular without duplication: `a[id][name][level]:not([ng-reflect-id])`\n   */\n  @Input() selector: string;\n\n  readonly linksChanged: Observable<TocHeadDirective[]>;\n  readonly activeLinkChanged: Observable<TocHeadDirective | undefined>;\n\n  private links: TocHeadDirective[] = [];\n  private _linksChanged$: BehaviorSubject<TocHeadDirective[]>;\n  private _activeLink$: BehaviorSubject<TocHeadDirective | undefined>;\n  private _fragmentSubscription: Subscription;\n  private _scrollSubscription: Subscription;\n\n  private _urlFragment = '';\n  private _scrollContainer: Element | Window;\n  private _lastHeight: number;\n  private _isWindowContainer: boolean;\n  private _offsetCache: [number, number] = DEFAULT_OFFSET_CACHE;\n\n  private get containerHeight(): number {\n    return this._isWindowContainer\n      ? (<Window> this._scrollContainer).innerHeight\n      : (<HTMLElement> this._scrollContainer).scrollHeight;\n  }\n\n  /** Gets the scroll offset of the scroll container */\n  private get getScrollOffset(): number {\n    return this._isWindowContainer\n      ? (<Window> this._scrollContainer).pageYOffset\n      : (<HTMLElement> this._scrollContainer).scrollTop +\n          (<HTMLElement> this._scrollContainer).getBoundingClientRect().top;\n  }\n\n  constructor(@Optional() route?: ActivatedRoute, @Optional() private elRef?: ElementRef) {\n    this._activeLink$ = new BehaviorSubject<TocHeadDirective | undefined>(undefined);\n    this._linksChanged$ = new BehaviorSubject<TocHeadDirective[]>(this.links);\n    this.linksChanged = this._linksChanged$.asObservable();\n    this.activeLinkChanged = this._activeLink$.asObservable();\n\n    if (route) {\n      this._fragmentSubscription = route.fragment.subscribe(fragment => {\n        this._urlFragment = fragment;\n        if (fragment) {\n          this.scrollTo(fragment);\n        }\n      });\n    }\n  }\n\n  ngAfterContentInit(): void {\n    const el: HTMLElement = this.elRef && this.elRef.nativeElement;\n    if (el && isPromise(this.staticHtmlMode)) {\n      this.staticHtmlMode.then( () => {\n        this.queryLinksAndAdd(el);\n      });\n    } else if (el && coerceBooleanProperty(this.staticHtmlMode)) {\n      this.queryLinksAndAdd(el);\n    }\n  }\n\n  reinitQueryLinks(p: Promise<any>): void {\n    const el: HTMLElement = this.elRef && this.elRef.nativeElement;\n    p.then( () => {\n      setTimeout( () => {\n        this.links = [];\n        this.queryLinksAndAdd(el);\n        this._linksChanged$.next(this.links);\n      }, 25);\n    });\n  }\n\n  /**\n   * analyze link and publish links changed event\n   * @param tocLink\n   */\n  initLink(tocLink: TocHeadDirective): void {\n    if (this._urlFragment && this._urlFragment === tocLink.link.id) {\n      this.scrollIntoView(tocLink);\n    }\n    this._linksChanged$.next(this.links);\n  }\n\n  /**\n   * Add the tocLink to the collection but does not analyze or publish links changed event\n   * @param tocLink\n   */\n  add(tocLink: TocHeadDirective): void {\n    this.links.push(tocLink);\n  }\n\n  remove(tocLink: TocHeadDirective): void {\n    const linkIdx = this.links.indexOf(tocLink);\n    if (linkIdx > -1) {\n      this.links.splice(linkIdx, 1);\n      this._linksChanged$.next(this.links);\n      if (linkIdx <= this._offsetCache[1]) {\n        this._offsetCache = DEFAULT_OFFSET_CACHE;\n      }\n    }\n  }\n\n  ngOnDestroy(): void {\n    if (this._fragmentSubscription) {\n      this._fragmentSubscription.unsubscribe();\n    }\n    if (this._scrollSubscription) {\n      this._scrollSubscription.unsubscribe();\n    }\n  }\n\n  /**\n   * Try to find a [[TocHeadDirective]] using the supplied `fragment`\n   * (i.e. fragment equals [[TocLink.id]]) and if found scroll it into view.\n   * @param fragment\n   */\n  scrollTo(fragment: string): void {\n    const tocLink = this.links.find(l => l.link.id === fragment);\n    if (tocLink) {\n      this.scrollIntoView(tocLink);\n    }\n  }\n\n  private scrollIntoView(tocLink: TocHeadDirective): void {\n    // scroll after angular finishes rendering the page\n    // so resizing operation, element init expansion etc are taking into consideration\n    setTimeout(() => {\n      this._activeLink$.next(tocLink);\n      tocLink.scrollIntoView();\n    });\n  }\n\n  private queryLinksAndAdd(el: HTMLElement): void {\n    const headers = el.querySelectorAll(this.selector || DEFAULT_SELECTOR);\n    Array.from(headers).forEach(node => {\n      TocHeadDirective.fromElement(<any> node, this);\n    });\n  }\n\n  private onScroll(): void {\n    const height = this.containerHeight;\n    const scrollOffset = this.getScrollOffset;\n\n    /* We check if the height of the scroll container has changed since last scroll\n       If it changed we need to calculate all top positions for the links elemnts as they might\n       have change. A good example is an expending element that when opened or closed change the top\n       position for all header links below it. */\n    if (height !== this._lastHeight) {\n      let offset = scrollOffset;\n\n      // The top position of the header link DOM element contains the top section\n      // and the scrollOffset also contains it, we reduce one.\n      if (!this._isWindowContainer) {\n        offset -= (<HTMLElement> this._scrollContainer).getBoundingClientRect().top;\n      }\n\n      for (let i = 0, len = this.links.length; i < len; i++) {\n        this.links[i].reCalcPosition(offset);\n      }\n\n      // cache the height\n      this._lastHeight = height;\n    }\n\n    this.setActive(scrollOffset);\n  }\n\n  /**\n   * Set the active header link based on the scrolling offset.\n   * The implementation assumes linear scrolling is common so each call to setActive creates a state\n   * for the next call to come. The state holds the last offset and active link index.\n   * With the state the direction of the scroll is known, and based on the direction of scrolling\n   * the array of links is iterated (up/down) from that last active index.\n   *\n   * This will average iterations to O(1), when each scroll usually either doesn't change the active\n   * header or changes it to the next/prev header.\n   * @param scrollOffset\n   */\n  private setActive(scrollOffset: number): void {\n    const arr = this.links;\n    const direction = scrollOffset >= this._offsetCache[0] ? 1 : -1;\n    for (let i = this._offsetCache[1]; !!arr[i]; i = i + direction) {\n      if (this.isLinkActive(scrollOffset, arr[i], arr[i + 1])) {\n        if (arr[i] !== this._activeLink$.getValue()) {\n          this._offsetCache = [scrollOffset, i];\n          this._activeLink$.next(arr[i]);\n        }\n        return;\n      }\n    }\n\n    this._offsetCache = DEFAULT_OFFSET_CACHE;\n    this._activeLink$.next(undefined);\n  }\n\n  private isLinkActive(scrollOffset: number, currentLink: TocHeadDirective, nextLink: TocHeadDirective): boolean {\n    // A link is considered active if the page is scrolled passed the anchor without also\n    // being scrolled passed the next link\n    return scrollOffset >= currentLink.link.top && !(nextLink && nextLink.link.top < scrollOffset);\n  }\n\n  static get defaultSelector(): typeof DEFAULT_SELECTOR {\n    return DEFAULT_SELECTOR;\n  }\n}\n","import { AfterViewInit, Directive, ElementRef, HostBinding, Input, OnDestroy } from '@angular/core';\n\nimport { TocAreaDirective } from './toc-area.directive';\n\nexport interface TocLink {\n  /* id of the section*/\n  id: string;\n\n  /* header type h3/h4 */\n  level: number;\n\n  /* name of the anchor */\n  name: string;\n\n  /* top offset px of the anchor */\n  top: number;\n}\n\n/**\n * A directive that represents a header that has a TOC record (link).\n *\n * Automatically set H1, H2 and H3 elements that has an `id` attribute (`<h1 id=\"4\">Title</h1>`).\n * To exclude an H1, H2 or H3 elements (that has an id) add the class `no-toc` to it.\n *\n * Other elements can also be used as link headers, to mark them add the `tdmTocHead` attribute to\n * them following and id attribute. If the element is not an [[HTMLHeadingElement]] (Hx) it is\n * mandatory to set the `level` (1 to n) attribute. (`<a id=\"link\" name=\"title\" level=\"2\"></a>`)\n *\n * The title used in the TOC is the value in the `name` attribute (Input binging supported) or\n * if not set, the innerText value of the element. Usually the inner text is sufficient unless it\n * includes context that is not visible via CSS / JS.\n *\n * A link directive/element can set/override the `level` value by setting it on the\n * html element explicitly. If set, the attribute overrides the Heading level.\n *\n * This directive is built with support for TOC on static HTML content using the querySelector API.\n * See [[TocHeadDirective#fromElement]]\n */\n@Directive({\n  selector: '[tdmTocHead][id], h1[id]:not(.no-toc), h2[id]:not(.no-toc), h3[id]:not(.no-toc)'\n})\nexport class TocHeadDirective implements AfterViewInit, OnDestroy {\n  link: TocLink = {\n    name: '',\n    level: 1,\n    top: 0,\n    id: ''\n  };\n\n  assignLink(value: Partial<TocLink>): void {\n    if (value) {\n      Object.assign(this.link, value);\n    }\n  }\n\n  // HostBinding + Input to reflect input for static caching.\n  /**\n   * Ths ID, used as link reference.\n   */\n  @HostBinding('attr.id')\n  @Input()\n  id: string;\n  /**\n   * The name to display in the TOC, if not set taken from the innerText of the element.\n   */\n  @HostBinding('attr.name')\n  @Input()\n  name: string;\n  /**\n   * The level in the TOC.\n   * Valid values from 0 to n.\n   * Mandatory, unless the element is Hx which will result in x being the level.\n   *\n   * > When used as directive, the supported elements are h1, h2 and h3.\n   * To use height H elements add the `tdmTocHead` attribute (level will be taken from tag name)\n   */\n  @HostBinding('attr.level')\n  @Input()\n  level: number;\n\n  private el: HTMLElement;\n\n  constructor(private elementRef: ElementRef, private tocArea: TocAreaDirective) {\n    this.el = elementRef.nativeElement;\n    this.tocArea.add(this);\n  }\n\n  ngAfterViewInit(): void {\n    this.addToService();\n  }\n\n  scrollIntoView(): void {\n    this.el.scrollIntoView();\n  }\n\n  ngOnDestroy(): void {\n    this.tocArea.remove(this);\n  }\n\n  reCalcPosition(scrollTop: number): void {\n    this.link.top = this.el.getBoundingClientRect().top + scrollTop;\n  }\n\n  private addToService(): void {\n    if (!this.link.name) {\n      // because we bind @Inputs id,name,level to their respective attributes\n      // they are now in the element and createLink will grab them.\n      this.link = TocHeadDirective.createLink(this.el);\n    }\n    if (this.link.name && this.link.id) {\n      this.tocArea.initLink(this);\n    }\n  }\n\n  /**\n   * Creates an instance of [[TocHeadDirective]] for use outside of angular.\n   * This will allow treating [[TocHeadDirective]] as a simple class to implement TOC on static\n   * HTML content using querySelector API.\n   * @param element\n   * @param tocArea\n   * @param link Optional data to set on the [[TocLink]] object, it is recommended to apply such\n   * data here and not after initializing.\n   * @return {TocHeadDirective}\n   */\n  static fromElement(element: HTMLElement, tocArea: TocAreaDirective, link?: TocLink): TocHeadDirective {\n    if (element.tagName === 'A') {\n      element = element.parentElement;\n    }\n    const tocHead = new TocHeadDirective(new ElementRef(element), tocArea);\n\n    if (!link) {\n      link = TocHeadDirective.createLink(element);\n    }\n\n    tocHead.assignLink(link);\n    tocHead.ngAfterViewInit();\n    return tocHead;\n  }\n\n  private static createLink(element: HTMLElement): TocLink {\n    const tagName = element.tagName.match(/^h(\\d)$/i);\n    let id: string = element.id;\n    if (!id) {\n      const anchor = element.querySelector('a.anchor');\n      if (anchor) {\n        id = anchor.id;\n      }\n    }\n    return {\n      name: element.getAttribute('name') || element.innerText,\n      level: element.getAttribute('level') || <any> (tagName ? tagName[1] : 1),\n      top: 0,\n      id\n    };\n  }\n}\n","import { Directive, TemplateRef } from '@angular/core';\n\nimport { TocComponent, TocLinkTemplateContext } from './toc.component';\n\n@Directive({\n  selector: '[tocLinkTemplate]'\n})\nexport class TocLinkTemplateDirective {\n  constructor(tocComponent: TocComponent, template: TemplateRef<TocLinkTemplateContext>) {\n    tocComponent.setLinkTemplate(template);\n  }\n}\n","module.exports = \"<div class=\\\"tdm-toc-container\\\">\\n  <div *ngIf=\\\"linksChanged | async as links\\\" class=\\\"tdm-toc-inner\\\">\\n    <div *ngIf=\\\"tocArea.tocTitle\\\" class=\\\"tdm-toc-heading\\\">{{ tocArea.tocTitle }}</div>\\n    <ul class=\\\"tdm-toc-list\\\">\\n      <li *ngFor=\\\"let l of links; let i = index\\\"\\n          class=\\\"tdm-toc-link tdm-toc-level-{{l.link.level}}\\\"\\n          [class.active]=\\\"l === activeLink\\\">\\n        <ng-container *ngTemplateOutlet=\\\"linkTemplate || defaultLinkTemplate; context: { $implicit: { rootUrl: rootUrl, link: l.link } }\\\"></ng-container>\\n      </li>\\n    </ul>\\n  </div>\\n</div>\\n<ng-template #defaultLinkTemplate let-ctx>\\n  <a [href]=\\\"'#' + ctx.rootUrl + '#' + ctx.link.id\\\">{{ ctx.link.name }}</a>\\n</ng-template>\\n\"","import { Subject } from 'rxjs/Subject';\nimport { debounceTime, filter } from 'rxjs/operators';\nimport { Subscription } from 'rxjs/Subscription';\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  Input,\n  OnDestroy, TemplateRef,\n  ViewEncapsulation\n} from '@angular/core';\nimport { Router, NavigationEnd } from '@angular/router';\n\nimport { TocAreaDirective } from './toc-area.directive';\nimport { TocHeadDirective, TocLink } from './toc-head.directive';\n\nexport interface TocLinkTemplateContext {\n  $implicit: {\n    rootUrl: string;\n    link: TocLink;\n  };\n}\n\n@Component({\n  selector: 'tdm-toc',\n  templateUrl: './toc.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None\n})\nexport class TocComponent implements OnDestroy {\n  rootUrl: string;\n\n  /**\n   * Use an internal subject to proxy all incoming data from the TocAreaDirective.linksChanged stream\n   * The proxy is in-place to prevent redundant rendering of items in the link detection phase\n   * where link's register one by one\n   * @internal\n   */\n  linksChanged = new Subject<TocHeadDirective[]>();\n\n  /**\n   * @internal\n   */\n  activeLink: TocHeadDirective;\n\n  @Input()\n  get tocArea(): TocAreaDirective {\n    return this._tocArea;\n  }\n  set tocArea(value: TocAreaDirective) {\n    if (this._tocArea !== value) {\n      this._tocArea = value;\n      this.destroyLocal();\n      if (value) {\n        this._linksChangedSubscription = value.linksChanged\n          .pipe(debounceTime(10))\n          .subscribe(this.linksChanged);\n\n        this._activeLinkSubscription = value.activeLinkChanged\n          .pipe(filter(activeLink => activeLink !== this.activeLink))\n          .subscribe(al => {\n            this.activeLink = al;\n            this.cdr.detectChanges();\n          });\n      }\n    }\n  }\n\n  linkTemplate?: TemplateRef<TocLinkTemplateContext>;\n\n  private _tocArea: TocAreaDirective;\n  private _routeSubscription: Subscription;\n  private _linksChangedSubscription: Subscription;\n  private _activeLinkSubscription: Subscription;\n\n  constructor(router: Router, private cdr: ChangeDetectorRef) {\n    this._routeSubscription = router.events\n      .pipe(filter(event => event instanceof NavigationEnd))\n      .subscribe(event => (this.rootUrl = router.url.split('#')[0]));\n  }\n\n  setLinkTemplate(template: TemplateRef<TocLinkTemplateContext>): void {\n    this.linkTemplate = template;\n  }\n\n  ngOnDestroy(): void {\n    this._routeSubscription.unsubscribe();\n    this.destroyLocal();\n  }\n\n  private destroyLocal(): void {\n    if (this._linksChangedSubscription) {\n      this._linksChangedSubscription.unsubscribe();\n      this._linksChangedSubscription = undefined;\n    }\n    if (this._activeLinkSubscription) {\n      this._activeLinkSubscription.unsubscribe();\n      this._activeLinkSubscription = undefined;\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TocHeadDirective } from './toc-head.directive';\nimport { TocAreaDirective } from './toc-area.directive';\nimport { TocComponent } from './toc.component';\nimport { TocLinkTemplateDirective } from './toc-link-template';\n\n@NgModule({\n  imports: [ CommonModule ],\n  declarations: [ TocAreaDirective, TocHeadDirective, TocComponent, TocLinkTemplateDirective ],\n  exports: [ TocAreaDirective, TocHeadDirective, TocComponent, TocLinkTemplateDirective ]\n})\nexport class TocModule { }\n"],"sourceRoot":""}